<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />


<title>Config Files - CPU 2017</title>
<!-- $Id: config.html 6358 2019-08-16 19:59:38Z JohnHenning $ -->
<!-- You'll want a nice wide screen (132 columns) when editing this ............................................................ -->

<link rel="STYLESHEET" href="css/cpudocs.css" type="text/css" />
<link rel="STYLESHEET" href="css/cpudocsNoLinkie.css" media="print" type="text/css" />
<style type="text/css">


a.switchstrike {white-space:nowrap; margin-left:1.3em; text-decoration:line-through;}
span.switchstrike {white-space:nowrap; text-decoration:line-through;}
.tdc { text-align:center; }

.pex             {font-size:125%; }

table#consumerTable a.switch {margin-left:2px;}
table#consumerTable th       {vertical-align:middle;font-weight:bold;font-family:sans-serif;}
table#consumerTable td       {vertical-align:middle;}
tr#consRow1 td {vertical-align:bottom;}
td.tocRef      {font-size:110%;text-align:center;}
td.tocRef a    {font-size:130%;text-decoration:none;}

h2               {border-top:thin solid gray;}

.resultpage a:link, .resultpage a:visited {
  text-decoration: none;
  border-bottom: 1px dashed black;
  color: black;
}

div.notes h2 {
  text-align: center;
  margin: 0.1em;
}

div.resultpage {margin-left:3em;width:800px;border:thin solid black;}
div.resultpage h2 {font-family: "Times Roman", times, serif;font-size:1.5em;font-weight:bold; text-align:center;border:none;}

</style>

</head>
<body>


<!-- .......................................................................................................................... -->
<h1 id="top">  SPEC CPU&reg;2017 Config Files
</h1>
<table class="version">
   <tr>
      <th>$Id: config.html 6358 2019-08-16 19:59:38Z JohnHenning $</th>
      <td>Latest: <a class="external" href="https://www.spec.org/cpu2017/Docs/">www.spec.org/cpu2017/Docs/</a></td>
   </tr>
</table>

<p>This document describes config files for SPEC CPU&reg;2017, a product of the SPEC&reg; non-profit corporation 
<a href="https://www.spec.org/spec/" class="external">(about SPEC)</a>.  </p>


<p class="contentsrl1" id="Dtoc_I"> <a href="#sectionI">    I. Config file basics</a></p>
<table class="noborder">
   <tr>
      <td style="border-top:none;">
         <p class="contentsrl2"> <a href="#sectionI.A">     A.</a> What is a config file?</p>
         <p class="contentsrl2"> <a href="#sectionI.B">     B.</a> Benchmark selection</p>
         <p class="contentsrl2"> <a href="#sectionI.C">     C.</a> Five consumers</p>
      </td>
      <td style="border-top:none;padding-left:1em;padding-right:1em;">
         <p class="contentsrl2"> <a href="#sectionI.D">     D.</a> Config file syntax </p>
         <p class="contentsrl3"> <a href="#sectionI.D.1">      1.</a> Sections and scope</p>
         <p class="contentsrl3"> <a href="#sectionI.D.2">      2.</a> Comments</p>
         <p class="contentsrl3"> <a href="#sectionI.D.3">      3.</a> Whitespace</p>
         <p class="contentsrl3"> <a href="#sectionI.D.4">      4.</a> Quoting</p>
         <p class="contentsrl3"> <a href="#sectionI.D.5">      5.</a> Line continuation</p>
         <p class="contentsrl3"> <a href="#sectionI.D.6">      6.</a> Included files</p>
         <p class="contentsrl3"> <a href="#sectionI.D.7">      7.</a> Section markers</p>
         <p class="contentsrl2"> <a href="#sectionI.E">     E.</a> Section merging</p>
      </td>
      <td style="border-top:none;vertical-align:middle;">
         <div class="l1snugbot" style="font-size:85%;border:thin dotted blue;">Precedence Examples
            <br /><a href="#pex1">1.</a> Benchmark specifier
            <br /><a href="#pex2">2.</a>  Tuning specifier
            <br /><a href="#pex3">3.</a> Label specifier
            <br /><a href="#pex4">4.</a> Combining sections
            <br /><a href="#pex5">5.</a> Conflicting sections
            <br /><a href="#pex6">6.</a> Section order
            <br /><a href="#pex7">7.</a> Repeated Sections
         </div>
      </td>
      <!-- Note that the table of contents often uses less wordy section names than the actual real sections.  This is
         intentional, so as to make the TOC more likely to be compact and useful. -->
      <td style="padding-left:1em;border-top:none;">
         <p class="contentsrl2"> <a href="#sectionI.F">     F.</a> Variables </p>
         <p class="contentsrl3"> <a href="#sectionI.F.1">      1.</a> Defining variables</p>
         <p class="contentsrl3"> <a href="#sectionI.F.2">      2.</a> $[square] substitution</p>
         <p class="contentsrl3"> <a href="#sectionI.F.3">      3.</a> Useful $[variables]</p>
         <p class="contentsrl3"> <a href="#sectionI.F.4">      4.</a> ${curly} interpolation</p>
         <p class="contentsrl3"> <a href="#sectionI.F.5">      5.</a> Useful ${variables} </p>
         <p class="contentsrl3"> <a href="#sectionI.F.6">      6.</a> Unsetting "%undef%" </p>
         <p class="contentsrl3"> <a href="#sectionI.F.7">      7.</a> Debug tips</p>
      </td>
      <td style="vertical-align:middle;">
         <div class="l1snug" style="font-size:85%;border:thin dotted blue;">
            <p class="contentsrl2" style="margin-bottom:1px;">All&nbsp;variable&nbsp;types</p>
            <a class="switch" href="#makevars">$(MAKEVAR)</a>
            <br /><a class="switch" href="#shellvars">\$SHELLVAR</a>
            <br /><a class="switch" href="#square">$[startup]</a>
            <br /><a class="switch" href="#curly">${during_run}</a>/<a href="#curly">$during_run</a>
            <br /><a class="switch" href="#macros">%{macro}</a>
            <br /><a class="switch" href="#ENVmacros">%{ENV_var}</a>&nbsp;<span class="new">New with CPU 2017</span>
         </div>
      </td>
   </tr>
</table>


<p class="contentsrl1" id="Dtoc_II"> <a href="#sectionII"     >   II. Config file options for runcpu</a></p>
<p class="contentsrl2"> <a href="#sectionII.A">        A.</a> Precedence: config file vs. runcpu command line</p>

<!-- OK, here's an oddity.  With the web browser Safari 1.3.2 (v312.6) it has sometimes appeared that if there is a space
(and then a newline) after each of the items in the list below, they wrap as expected.  But if they only have newline
characters, the display sometimes has wraps that appear odd to the eye.  So, we add a space.
    Years later, another observation, this time with Firefox 45.5.1 on Linux: a space between the angle bracket and the
text also improves wrapping.  So, consistently include that too.
-->

<!--
<a class="switch" href="#absolutely_no_locking"> absolutely_no_locking</a>
-->
<p class="contentsrl2"> <a href="#sectionII.B">B.</a> Options </p>
<p class="contentsrl3noh">
<a class="switch" href="#action">                  action</a>
<a class="switch" href="#allow_label_override">    allow_label_override</a><span class="new">New</span>
<a class="switch" href="#backup_config">           backup_config</a>
<a class="switch" href="#basepeak">                basepeak</a>
<a class="switch" href="#bind">                    bind</a>
<a class="switch" href="#check_version">           check_version</a>
<a class="switch" href="#command_add_redirect">    command_add_redirect</a>
<a class="switch" href="#copies">                  copies</a>
<a class="switch" href="#current_range">           current_range</a><span class="new">New</span>
<a class="switch" href="#delay"     >              delay</a>
<a class="switch" href="#deletework">              deletework</a>
<a class="switch" href="#difflines">               difflines</a>
<a class="switch" href="#enable_monitor">          enable_monitor</a><span class="new">New</span>
<a class="switch" href="#env_vars">                env_vars</a>
<a class="switch" href="#expand_notes">            expand_notes</a>
<a class="switch" href="#expid">                   expid</a>
<a class="switch" href="#fail">                    fail</a>
<a class="switch" href="#fail_build">              fail_build</a>
<a class="switch" href="#fail_run">                fail_run</a>
<a class="switch" href="#feedback">                feedback</a>
<a class="switch" href="#flagsurl">                flagsurl</a>
<a class="switch" href="#force_monitor">           force_monitor</a><span class="new">New</span>
<a class="switch" href="#http_proxy">              http_proxy</a>
<a class="switch" href="#http_timeout">            http_timeout</a>
<a class="switch" href="#idle_current_range">      idle_current_range</a><span class="new">New</span>
<a class="switch" href="#ignore_errors">           ignore_errors</a>
<a class="switch" href="#ignore_sigint">           ignore_sigint</a>
<a class="switch" href="#info_wrap_columns">       info_wrap_columns</a>
<a class="switch" href="#iterations">              iterations</a>
<a class="switch" href="#keeptmp">                 keeptmp</a>
<a class="switch" href="#label">                   label</a><span class="new">New</span>
<a class="switch" href="#line_width">              line_width</a>
<a class="switch" href="#locking">                 locking</a>
<a class="switch" href="#log_line_width">          log_line_width</a>
<a class="switch" href="#log_timestamp">           log_timestamp</a>
<a class="switch" href="#mail_reports">            mail_reports</a>
<a class="switch" href="#mailcompress">            mailcompress</a>
<a class="switch" href="#mailmethod">              mailmethod</a>
<a class="switch" href="#mailport">                mailport</a>
<a class="switch" href="#mailserver">              mailserver</a>
<a class="switch" href="#mailto">                  mailto</a>
<a class="switch" href="#make">                    make</a>
<a class="switch" href="#make_no_clobber">         make_no_clobber</a>
<a class="switch" href="#makeflags">               makeflags</a>
<a class="switch" href="#mean_anyway">             mean_anyway</a>
<a class="switch" href="#minimize_builddirs">      minimize_builddirs</a>
<a class="switch" href="#minimize_rundirs">        minimize_rundirs</a>
<a class="switch" href="#nobuild">                 nobuild</a>
<a class="switch" href="#no_input_handler">        no_input_handler</a>
<a class="switch" href="#no_monitor">              no_monitor</a>
<a class="switch" href="#notes_wrap_columns">      notes_wrap_columns</a>
<a class="switch" href="#notes_wrap_indent">       notes_wrap_indent</a>
<a class="switch" href="#output_format">           output_format</a>
<a class="switch" href="#output_root">             output_root</a>
<a class="switch" href="#parallel_test">           parallel_test</a>
<a class="switch" href="#parallel_test_submit">    parallel_test_submit</a>
<a class="switch" href="#parallel_test_workloads"> parallel_test_workloads</a><span class="new">New</span>
<a class="switch" href="#plain_train">             plain_train</a>
<a class="switch" href="#power">                   power</a><span class="new">New</span>
<a class="switch" href="#power_analyzer">          power_analyzer</a><span class="new">New</span>
<a class="switch" href="#preenv">                  preenv</a>
<a class="switch" href="#rebuild">                 rebuild</a>
<a class="switch" href="#reportable">              reportable</a>
<a class="switch" href="#runlist">                 runlist</a>
<a class="switch" href="#save_build_files">        save_build_files</a><span class="new">New</span>
<a class="switch" href="#section_specifier_fatal"> section_specifier_fatal</a>
<a class="switch" href="#setprocgroup">            setprocgroup</a>
<a class="switch" href="#size">                    size</a>
<a class="switch" href="#srcalt">                  src.alt</a>
<a class="switch" href="#strict_rundir_verify">    strict_rundir_verify</a>
<a class="switch" href="#sysinfo-program">         sysinfo_program</a>
<a class="switch" href="#table">                   table</a>
<a class="switch" href="#teeout"     >             teeout</a>
<a class="switch" href="#temp_meter">              temp_meter</a><span class="new">New</span>
<a class="switch" href="#threads">                 threads</a><span class="new">New</span>
<a class="switch" href="#train_single_thread">     train_single_thread</a><span class="new">New</span>
<a class="switch" href="#train_with" >             train_with</a>
<a class="switch" href="#tune">                    tune</a>
<a class="switch" href="#use_submit_for_compare">  use_submit_for_compare</a><span class="new">New</span>
<a class="switch" href="#use_submit_for_speed">    use_submit_for_speed</a>
<a class="switch" href="#verbose">                 verbose</a>
<a class="switch" href="#verify_binaries">         verify_binaries</a><span class="new">New</span>
<a class="switch" href="#voltage_range">           voltage_range</a><span class="new">New</span>
<br /><span class="new">Power measurement was introduced as an experimental feature in CPU 2017 v1.0.  
   As of v1.1, more fields have been added, and the feature is now fully supported.</span></p>


<p class="contentsrl1" id="Dtoc_III"> <a href="#sectionIII">III. Config file options for specmake</a></p>
<table class="noborder">
   <tr>
      <td>
         <p class="contentsrl2"> <a href="#sectionIII.A">A.</a> Commonly used Make variables</p>
         <p class="contentsrl3noh">
         <a class="switch" href="#makeCompiler"      >CC, CXX, FC</a><br />
         <a class="switch" href="#makePortability"   >PORTABILITY</a> <span style="font-size:80%;">(+ several similar options)</span><br />
         <a class="switch" href="#makeOptimize"      >OPTIMIZE</a> <span style="font-size:80%;">(+etc.)</span><br />
         <a class="switch" href="#makeOther"         >EXTRA_CFLAGS</a> <span style="font-size:80%;">(+etc.)</span><br />
         <a class="switch" href="#makeLib"           >LIBS</a><br />
         <a class="switch" href="#makePassN"         >PASS1_OPTIMIZE</a> <span style="font-size:80%;">(+etc.)</span></p>
      </td>
      <td style="padding-left:2em;padding-right:2em;">
         <p class="contentsrl2"> <a href="#sectionIII.B">B.</a> <span class="new">New with CPU 2017:</span> Using OpenMP and/or Autopar </p>
         <p class="contentsrl3"> <a href="#sectionIII.B.1">1.</a> Summary</p>
         <p class="contentsrl3"> <a href="#sectionIII.B.2">2.</a> SPECrate: no OpenMP.  No Autopar.</p>
         <p class="contentsrl3"> <a href="#sectionIII.B.3">3.</a> SPECspeed: your choice</p>
         <p class="contentsrl3"> <a href="#sectionIII.B.4">4.</a> Detail - conditions for enabling OpenMP</p>
      </td>
      <td>
         <p class="contentsrl2"> <a href="#sectionIII.C">C.</a> Creating your own Make variables</p>
         <p class="contentsrl2"> <a href="#sectionIII.D">D.</a> += is available but use with caution</p>
         <p class="contentsrl2"> <a href="#sectionIII.E">E.</a> Using <kbd>buildsetup</kbd> to create a sandbox</p>
         <p class="contentsrl2"> <a href="#sectionIII.F">F.</a> About Automatic Rebuilds</p>
      </td>
   </tr>
   <tr>
      <td colspan="3">
         <p class="contentsrl3noh"> <a class="switch" href="#makeVersion"       >{C|CXX|F}C_VERSION_OPTION</a> <span class="new">New and <b>required</b> with CPU 2017</span></p>
      </td>
   </tr>
</table>

<p class="contentsrl1" id="Dtoc_IV"> <a href="#sectionIV"     >   IV. Config file options for the shell </a></p>
<table class="noborder">
   <tr>
      <td style="width:450px;padding-right:1em;">
         <p class="contentsrl2"> <a href="#sectionIV.A">       A.</a> \$SHELLVAR variable substitution</p>
         <p class="contentsrl2"> <a href="#sectionIV.B">       B.</a> Shell Options</p>
         <p class="contentsrl3noh">
         <a class="switch" href="#bench_post_setup"> bench_post_setup</a>
         <a class="switch" href="#build_pre_bench">  build_pre_bench</a>
         <a class="switch" href="#build_post_bench"> build_post_bench</a>
         <a class="switch" href="#fdo_make_cleanN">  fdo_make_clean_passN</a>
         <a class="switch" href="#fdo_make_passN">   fdo_make_passN</a>
         <a class="switch" href="#fdo_postN">        fdo_postN</a>
         <a class="switch" href="#fdo_post_makeN">   fdo_post_makeN</a>
         <a class="switch" href="#fdo_pre0">         fdo_pre0</a>
         <a class="switch" href="#fdo_preN">         fdo_preN</a>
         <a class="switch" href="#fdo_pre_makeN">    fdo_pre_makeN</a>
         <a class="switch" href="#fdo_runN">         fdo_runN</a>
         <a class="switch" href="#monitor">          monitor_X</a>
         <a class="switch" href="#post_setup">       post_setup</a>
         <a class="switch" href="#submit">           submit</a></p>
      </td>
      <td>
         <p class="contentsrl2"> <a href="#sectionIV.C">       C.</a> Using submit</p>
         <p class="contentsrl3"> <a href="#sectionIV.C.1">1.</a> Basic usage</p>
         <p class="contentsrl3"> <a href="#sectionIV.C.2">2.</a> Script generation</p>
         <p class="contentsrl3"> <a href="#sectionIV.C.3">3.</a> Quote traps</p>
         <p class="contentsrl3"> <a href="#sectionIV.C.4">4.</a> Debug tips</p>
         <p class="contentsrl3"> <a href="#sectionIV.C.5">5.</a> Maintainability</p>
         <p class="contentsrl3"> <a href="#sectionIV.C.6">6.</a> Reporting</p>
      </td>
      <td style="vertical-align:middle;">
         <div class="l1snug" style="font-size:90%;border:thin dotted blue;">
            <p class="contentsrl2" style="margin-bottom:1px;">Submit Examples:</p>
            <p class="contentsrl3"><a href="#submitExample1">1.</a> ${command} and $SPECCOPYNUM</p>
            <p class="contentsrl3"><a href="#submitExample2">2.</a> bind list </p>
            <p class="contentsrl3"><a href="#submitExample3">3.</a> Generating scripts and command_add_redirect</p>
            <p class="contentsrl3"><a href="#submitExample4">4.</a> Generating a script for numactl</p>
            <p class="contentsrl3"><a href="#submitExample5">5.</a> Line continuation</p>
            <p class="contentsrl3"><a href="#submitExample6">6.</a> Magical notes_submit</p>
         </div>
      </td>
   </tr>
</table>

<p class="contentsrl1" id="Dtoc_V">
   <span id="Reader-fields"> </span>
   <span id="Reader.fields"> </span>
   <span id="ReaderFields"> </span>
   <span id="Reader_fields"> </span>
   <span id="Readerfields"> </span>
   <span id="reader-fields"> </span>
   <span id="reader.fields"> </span>
   <span id="readerFields"> </span>
   <span id="reader_fields"> </span>
   <span id="readerfields"> </span>

   <span id="Readers"> </span>
   <span id="readers"> </span>

   <span id="Humans"> </span>
   <span id="humans"> </span>



<a href="#sectionV">  V. <span id="fieldsForHumans">Config file options for human readers</span></a></p>
<table class="noborder">
   <tr>
<!-- OK, here's an oddity.  With the web browser Safari 1.3.2 (v312.6) it has sometimes appeared that if there is a space
(and then a newline) after each of the items in the list below, they wrap as expected.  But if they only have newline
characters, the display sometimes has wraps that appear odd to the eye.  So, we add a space.  Years later, another observation, this time with Firefox 45.5.1 on Linux: a space between the angle bracket and the
text also improves wrapping.  So, consistently include that too.
-->
      <td style="width:60%;padding-right:1em;">
         <p class="contentsrl2"> <a href="#sectionV.A">       A.</a> Descriptive fields</p>
         <p class="contentsrl3noh">
         <a class="switch" href="#fw_bios">                fw_bios</a><span class="new">New</span>
         <a class="switch" href="#fw_management">          fw_management</a><span class="new">New</span>
         <a class="switch" href="#hw_avail">               hw_avail</a>
         <a class="switch" href="#hw_backplane">           hw_backplane</a><span class="new">New</span>
         <a class="switch" href="#hw_cpu_max_mhz">         hw_cpu_max_mhz</a><span class="new">New</span>
         <a class="switch" href="#hw_cpu_name">            hw_cpu_name</a>
         <a class="switch" href="#hw_cpu_nominal_mhz">     hw_cpu_nominal_mhz</a><span class="new">New</span>
         <a class="switch" href="#hw_disk">                hw_disk</a>
         <a class="switch" href="#hw_line_standard">       hw_line_standard</a><span class="new">New</span>
         <a class="switch" href="#hw_memory">              hw_memory</a>
         <a class="switch" href="#hw_memory_mode">         hw_memory_mode</a><span class="new">New</span>
         <a class="switch" href="#hw_model">               hw_model</a>
         <a class="switch" href="#hw_nchips">              hw_nchips</a>
         <a class="switch" href="#hw_ncores">              hw_ncores</a>
         <a class="switch" href="#hw_ncpuorder">           hw_ncpuorder</a>
         <a class="switch" href="#hw_nics">                hw_nics</a><span class="new">New</span>
         <a class="switch" href="#hw_nics_connected">      hw_nics_connected</a><span class="new">New</span>
         <a class="switch" href="#hw_nics_enabled">        hw_nics_enabled</a><span class="new">New</span>
         <a class="switch" href="#hw_nthreadspercore">     hw_nthreadspercore</a>
         <a class="switch" href="#hw_ocache">              hw_ocache</a>
         <a class="switch" href="#hw_other">               hw_other</a>
         <a class="switch" href="#hw_other_model">         hw_other_model</a><span class="new">New</span>
         <a class="switch" href="#hw_other_storage">       hw_other_storage</a><span class="new">New</span>
         <a class="switch" href="#hw_pcache">              hw_pcache</a>
         <a class="switch" href="#hw_power_cal_date">      hw_power_{id}_cal_date</a><span class="new">New</span>
         <a class="switch" href="#hw_power_cal_label">     hw_power_{id}_cal_label</a><span class="new">New</span>
         <a class="switch" href="#hw_power_cal_org">       hw_power_{id}_cal_org</a><span class="new">New</span>
         <a class="switch" href="#hw_power_connection">    hw_power_{id}_connection</a><span class="new">New</span>
         <a class="switch" href="#hw_power_label">         hw_power_{id}_label</a><span class="new">New</span>
         <a class="switch" href="#hw_power_met_inst">      hw_power_{id}_met_inst</a><span class="new">New</span>
         <a class="switch" href="#hw_power_model">         hw_power_{id}_model</a><span class="new">New</span>
         <a class="switch" href="#hw_power_serial">        hw_power_{id}_serial</a><span class="new">New</span>
         <a class="switch" href="#hw_power_setup">         hw_power_{id}_setup</a><span class="new">New</span>
         <a class="switch" href="#hw_power_vendor">        hw_power_{id}_vendor</a><span class="new">New</span>
         <a class="switch" href="#hw_power_provisioning">  hw_power_provisioning</a><span class="new">New</span>
         <a class="switch" href="#hw_psu">                 hw_psu</a><span class="new">New</span>
         <a class="switch" href="#hw_psu_info">            hw_psu_info</a><span class="new">New</span>
         <a class="switch" href="#hw_scache">              hw_scache</a>
         <a class="switch" href="#hw_storage_model">       hw_storage_model</a><span class="new">New</span>
         <a class="switch" href="#hw_tcache">              hw_tcache</a>
         <a class="switch" href="#hw_temperature_connection">hw_temperature_{id}_connection</a><span class="new">New</span>
         <a class="switch" href="#hw_temperature_label">   hw_temperature_{id}_label</a><span class="new">New</span>
         <a class="switch" href="#hw_temperature_model">   hw_temperature_{id}_model</a><span class="new">New</span>
         <a class="switch" href="#hw_temperature_serial">  hw_temperature_{id}_serial</a><span class="new">New</span>
         <a class="switch" href="#hw_temperature_setup">   hw_temperature_{id}_setup</a><span class="new">New</span>
         <a class="switch" href="#hw_temperature_vendor">  hw_temperature_{id}_vendor</a><span class="new">New</span>
         <a class="switch" href="#hw_vendor">              hw_vendor</a>
         <a class="switch" href="#license_num">            license_num</a>
         <a class="switch" href="#power_management">       power_management</a><span class="new">New</span>
         <a class="switch" href="#prepared_by">            prepared_by</a>
         <a class="switch" href="#sw_avail">               sw_avail</a>
         <a class="switch" href="#sw_base_ptrsize" >       sw_base_ptrsize</a>
         <a class="switch" href="#sw_compiler">            sw_compiler</a>
         <a class="switch" href="#sw_file">                sw_file</a>
         <a class="switch" href="#sw_os">                  sw_os</a>
         <a class="switch" href="#sw_other">               sw_other</a>
         <a class="switch" href="#sw_peak_ptrsize" >       sw_peak_ptrsize</a>
         <a class="switch" href="#sw_state">               sw_state</a>
         <a class="switch" href="#tester">                 tester</a>
         <a class="switch" href="#test_sponsor">           test_sponsor</a>
         <a class="switch" href="#test_elevation">         test_elevation</a><span class="new">New</span>
         <br /><span class="new">Power measurement was introduced as an experimental feature in CPU 2017 v1.0.  
            As of v1.1, more fields have been added, and the feature is now fully supported.</span>
         </p>
      </td>
      <td>
         <p class="contentsrl2"> <a href="#sectionV.B"     >       B.</a> Fields can vary by scope</p>
         <p class="contentsrl2"> <a href="#sectionV.C"     >       C.</a> Additional notes for the reader</p>
         <p class="contentsrl3"><a href="#sectionV.C.1">1.</a> Notes sections</p>
         <p class="contentsrl3noh">
         <a class="switch" href="#notes_comp">       notes_comp_NNN</a>
         <a class="switch" href="#notes_port">       notes_port_NNN</a>
         <a class="switch" href="#notes_base">       notes_base_NNN</a>
         <a class="switch" href="#notes_peak">       notes_peak_NNN</a>
         <a class="switch" href="#notes_submit">     notes_submit_NNN</a>
         <a class="switch" href="#notes_os">         notes_os_NNN</a>
         <a class="switch" href="#notes_part">       notes_part_NNN</a>
         <a class="switch" href="#notes">            notes_NNN</a>
         <a class="switch" href="#notes_plat">       notes_plat_NNN</a>
         <a class="switch" href="#notes_power">      notes_power_NNN</a></p>
         <p class="contentsrl3"><a href="#sectionV.C.2">2.</a> Note numbering</p>
         <p class="contentsrl3"><a href="#sectionV.C.3">3.</a> Additional tags</p>
         <p class="contentsrl3"><a href="#sectionV.C.4">4.</a> Links in notes sections</p>
         <!--   <p class="contentsrl3"><a href="#sectionV.C.5">5.</a> Attachments</p> -->
         <p class="contentsrl2"> <a href="#sectionV.D"     >       D.</a> Parallel Reporting</p>
      </td>
   </tr>
</table>


<p class="contentsrl1" id="Dtoc_VI"><a href="#sectionVI" >VI.  Using Feedback Directed Optimization (FDO)</a></p>
<table class="noborder">
   <tr>
      <td style="padding-right:1em;">
         <p class="contentsrl2"><a href="#sectionVI.A">       A.</a> Minimum required: <kbd>PASSn</kbd> or <kbd>fdo_</kbd></p>
         <p class="contentsrl2"><a href="#sectionVI.B">       B.</a> Flexible build models </p>
         <p class="contentsrl2"><a href="#sectionVI.C">       C.</a> The config file <kbd>feedback</kbd> option</p>
         <p class="contentsrl2"><a href="#sectionVI.D">       D.</a> <kbd class="nb">runcpu --feedback</kbd></p>
      </td>

      <td style="vertical-align:middle;">
         <div class="l1snug" style="font-size:90%;border:thin dotted blue;">
            <table class="noborder">
               <tr>
                  <td colspan="2"><p class="contentsrl2" style="margin-bottom:1px;">FDO Examples:</p></td>
               </tr>
               <tr>
                  <td>
         <p  class="contentsrl3"><a href="#fdoExample1"> 1.</a> build - train - rebuild  </p>
         <p  class="contentsrl3"><a href="#fdoExample2"> 2.</a> build - train - othertool  </p>
         <p  class="contentsrl3"><a href="#fdoExample3"> 3.</a> Finding fdo commands with <kbd class="nb">--fake</kbd>   </p>
         <p  class="contentsrl3"><a href="#fdoExample4"> 4.</a> build - train - partial rebuild  </p>
                  </td>
                  <td>
         <p  class="contentsrl3"><a href="#fdoExample5"> 5.</a> build-train-build-train-build-train-postopt + file movement </p>
         <p  class="contentsrl3"><a href="#fdoExample6"> 6.</a> feedback=no</p>
         <p  class="contentsrl3"><a href="#fdoExample7"> 7.</a> runcpu --feedback </p>
         <p  class="contentsrl3"><a href="#fdoExample8"> 8.</a> FDO tracks in the log file </p>
                  </td>
               </tr>
            </table>
         </div>

      </td>
   </tr>
</table>

<p class="contentsrl1" id="Dtoc_VII"> <a href="#sectionVII" >VII. The config file preprocessor</a></p>


<table class="noborder">
   <tr>
      <td>
         <p class="contentsrl3">  <a href="#sectionVII.A">      A.</a>     Introduction </p>
         <p class="contentsrl3">  <a href="#sectionVII.B">      B.</a>     Preprocessor Syntax Basics </p>
         <p class="contentsrl4">  <a href="#sectionVII.B.1">      1.</a>   Column 1.  Always Punch Column 1</p>
         <p class="contentsrl4">  <a href="#sectionVII.B.2">      2.</a>   One line per directive</p>
         <p class="contentsrl4">  <a href="#sectionVII.B.3">      3.</a>   Comments</p>
         <p class="contentsrl3">  <a href="#sectionVII.C">      C.</a>     Macro Definition</p>
         <p class="contentsrl4">  <a href="#sectionVII.C.1">      1.</a>   Defining Macros</p>
         <p class="contentsrl4">  <a href="#sectionVII.C.2">      2.</a>   Undefining macros </p>
         <p class="contentsrl4">  <a href="#sectionVII.C.3">      3.</a>   Redefining macros</p>
      </td>
      <td style="padding-left:2em;padding-right:2em;">
         <p class="contentsrl3">  <a href="#sectionVII.D">      D.</a>     Macro Usage</p>
         <p class="contentsrl3">  <a href="#sectionVII.E">      E.</a>     Conditionals </p>
         <p class="contentsrl4">  <a href="#sectionVII.E.1">      1.</a>   %ifdef </p>
         <p class="contentsrl4">  <a href="#sectionVII.E.2">      2.</a>   %ifndef </p>
         <p class="contentsrl4">  <a href="#sectionVII.E.3">      3.</a>   %if and expression evaluation</p>
         <p class="contentsrl4">  <a href="#sectionVII.E.4">      4.</a>   %else </p>
         <p class="contentsrl4">  <a href="#sectionVII.E.5">      5.</a>   %elif </p>
         <p class="contentsrl4">  <a href="#sectionVII.E.6">      6.</a>   Preprocessor Example: Picking CPUs </p>
      </td>
      <td style="padding-left:2em;padding-right:2em;">
         <p class="contentsrl3">  <a href="#sectionVII.F">      F.</a>     Informational Directives </p>
         <p class="contentsrl4">  <a href="#sectionVII.F.1">      1.</a>   %warning </p>
         <p class="contentsrl4">  <a href="#sectionVII.F.2">      2.</a>   %error </p>
      <p class="contentsrl4">  <a href="#sectionVII.F.3">      3.</a>   %info <span class="new">New with CPU 2017</span></p>
      <p class="contentsrl4">  <a href="#sectionVII.F.4">      4.</a>   %dumpmacros <span class="new">New with CPU 2017</span></p>
      <p class="contentsrl3">  <a href="#sectionVII.G">      G.</a>     Predefined macros and the environment <span class="new">New with CPU 2017</span></p>
      <p class="contentsrl4">  <a href="#sectionVII.G.1">      1.</a>  Automating output_root</p>
      <p class="contentsrl4">  <a href="#sectionVII.G.2">      2.</a>   Example: Adjusting the Environment </p>
      </td>
   </tr>
</table>


<p class="contentsrl1" id="Dtoc_VIII"> <a href="#sectionVIII" >   VIII. Output files - and how they relate to your config file</a></p>
<table class="noborder">
   <tr>
      <td>
         <p class="contentsrl2"> <a href="#sectionVIII.A"     >       A.</a> Help, I've got too many config files!</p>
         <p class="contentsrl2"> <a href="#sectionVIII.B"     >       B.</a> The log file</p>
         <p class="contentsrl3"> <a href="#sectionVIII.B.1"   >          1.</a> Useful Search Strings</p>
         <p class="contentsrl3"> <a href="#sectionVIII.B.2"   >          2.</a> About Temporary Debug Logs</p>
         <p class="contentsrl3"> <a href="#sectionVIII.B.3"   >          3.</a> Verbosity levels</p>
         <p class="contentsrl2"> <a href="#sectionVIII.C"     >       C.</a> Deciphering an FDO log file </p>
      </td>
      <td style="padding-left:2em;">
         <p class="contentsrl2"> <a href="#sectionVIII.D"     >       D.</a> Help, I've got too many log files! </p>
         <p class="contentsrl2"> <a href="#sectionVIII.E"     >       E.</a> Finding the build directory</p>
         <p class="contentsrl2"> <a href="#sectionVIII.F"     >       F.</a> Files in the build directory</p>
         <p class="contentsrl2"> <a href="#sectionVIII.G"     >       G.</a> For more information</p>
      </td>
   </tr>
</table>

<p class="contentsrl1" id="Dtoc_IX"> <a href="#sectionIX" >        IX. Power Measurement</a></p>
<p class="contentsrl2"> <a href="#sectionIX.A">         A.</a> Getting started with power measurement</p>
<p class="contentsrl2"> <a href="#sectionIX.B">         B.</a> PTD examples</p>
<p class="contentsrl2"> <a href="#sectionIX.C">         C.</a> Descriptive fields for power and temperature </p>
<p class="contentsrl2"> <a href="#sectionIX.D">         D.</a> Current ranges</p>
<p class="contentsrl2"> <a href="#sectionIX.E">         E.</a> Power questions? </p>


<p class="contentsrl1" id="Dtoc_Appendices"> <a href="#Appendices" >Appendices</a></p>
<p class="contentsrl2">   <a href="#AppendixA">  A.</a> Auxiliary benchmark sets</p>
<p class="contentsrl2">   <a href="#AppendixB">  B.</a> Troubleshooting</p>
<p class="contentsrl2">   <a href="#AppendixC">  C.</a> Obsolete/removed items</p>
<p class="contentsrl3noh">
         <a class="switchstrike" href="#allow_extension_override"   >allow_extension_override    </a>
         <a class="switchstrike" href="#company_name"               >company_name</a>
         <a class="switchstrike" href="#ext"                        >ext    </a>
         <a class="switchstrike" href="#hw_cpu_char"                >hw_cpu_char    </a>
         <a class="switchstrike" href="#hw_cpu_mhz"                 >hw_cpu_mhz     </a>
         <a class="switchstrike" href="#hw_cpu_ncoresperchip"       >hw_cpu_ncoresperchip     </a>
         <a class="switchstrike" href="#hw_fpu"                     >hw_fpu</a>
         <a class="switchstrike" href="#mach"                       >mach</a>
         <a class="switchstrike" href="#machine_name"               >machine_name</a>
         <a class="switchstrike" href="#max_active_compares"        >max_active_compares    </a>
         <a class="switchstrike" href="#rate"                       >rate  </a>
         <a class="switchstrike" href="#speed"                      >speed   </a>
         <a class="switchstrike" href="#sw_auto_parallel"           >sw_auto_parallel</a>
         <a class="switchstrike" href="#test_date"                  >test_date</a>
         <a class="switchstrike" href="#tester_name"                >tester_name</a>
         <a class="switchstrike" href="#VENDOR"                     >VENDOR</a>
</p>

<p>&nbsp;<br /></p>


<!-- .......................................................................................................................... -->
<h2 id="sectionI">          I.         Config file basics
</h2>

<table style="margin-top:.1em;" class="noborder">
   <tr >
      <td style=" padding-right:1em;">

         <!-- ................................................................................................................... -->
      <h3 id="sectionI.A">        I.A.       What is a config file?
      </h3>

      <p>A SPEC CPU <var>config file</var> is a file that defines how to build, run, and report on the SPEC CPU benchmarks in a
      particular environment. It defines how SPEC CPU 2017 interacts with your test environment, and lets you describe that environment
      in human-readable form.</p>

      <p class="snugish">A config file provides detailed control of testing, including:</p>
      <ul class="snugish">
         <li>Tuning and portability, which you may customize for your compilers.</li>
         <li>The runtime environment, which you may customize for your operating system.</li>
         <li>A description of the <var>SUT</var> (System Under Test), which you should customize to create an accurate report.</li>
      </ul>

      <p>Using your customized options, the SPEC CPU tools automatically create Makefiles, build the benchmarks, run them,
      generate reports, and write log files.</p>

      <p>Because they collect your options into one place, config files are key to result reproducibility.</p>
      <p class="l1snugbot">For example, if a vendor publishes CPU 2017 results for the SuperHero Model 42 at the SPEC web site
      <a class="external" href="https://www.spec.org/cpu2017/">www.spec.org/cpu2017</a>, it is expected that a customer can
      demonstrate similar performance using only 3 ingredients:</p>
      <ol class="l2snugish">
         <li>The SPEC CPU 2017 media, ordered from SPEC.</li>
         <li>The software and hardware as specified in the full disclosure from the published result.</li>
         <li>The config file, which is posted along with the results.</li>
      </ol>
      </td>

      <td style="width:33%;border-top:none;vertical-align:middle;">
         <div style="background:#f0f0f0; padding:.2em .5em; border:thin solid gray;">

            <p class="hanging1snug" style="font-family:sans-serif;"> q. This document looks big and intimidating.  Where do I
            start?</p>

            <p class="hanging1snug">a. Don't start here.  Start with the <a class="external"
            href="overview.html">Overview</a> and <a class="external" href="runcpu.html">Using SPEC
            CPU 2017 - the 'runcpu' Command</a>.</p>

            <p class="snugbot">Afer that, please read section <a href="#sectionI.C">I.C</a> carefully, which explains that config
            files contain options for five&nbsp;(5) different <a href="#consumers">consumers</a>.  You need to recognize
            which options are for which consumers.</p>

            <p>Please notice that config files have 3 kinds of <a href="#sections">sections</a>.  You need to know how
            <a href="#namedSections">named sections</a> work.</p>

            <p>From that point on, you can probably skip around among topics as they may interest you.</p>

            <p class="hanging1snugbot"><b>Tip:</b> Most topics can be found by adding '#topic' to the URL for this
            document.  Examples:
            <a href="#consumers">#consumers</a>&nbsp;
            <a href="#shell">#shell</a>&nbsp;
            <a href="#readers">#readers</a>&nbsp;
            <a href="#sw_compiler">#sw_compiler</a>&nbsp;
            <a href="#OpenMP">#OpenMP</a>
            </p>
         </div>
      </td>
   </tr>
</table>




<!-- .......................................................................................................................... -->
<h3 id="sectionI.B">        I.B.       Benchmark selection
   <span id="Benchmarks"> </span>
   <span id="benchmarks"> </span>
   <span id="BenchmarkSets"> </span>
   <span id="benchmark-sets"> </span>
   <span id="benchmark.sets"> </span>
   <span id="benchmarkSets"> </span>
   <span id="benchmark_sets"> </span>
   <span id="benchmarksets"> </span>
   <span id="Bset"> </span>
   <span id="bset"> </span>
   <span id="Bsets"> </span>
   <span id="bsets"> </span>
</h3>




<p class="snugish">In a config file, you can reference:
   One or more individual benchmarks, such as <samp class="nbsnugr">500.perlbench_r</samp>, or
   entire suites, using the Short Tags in the table below.</p>

<div class="l1">

         <!-- ReUsable: benchmarks, tags, and suites -->
         <table class="snugtop">
            <tr>
               <td style="font-family:monospace;vertical-align:middle;"><b>Short<br />Tag</b></td>
               <td style="vertical-align:middle;"><b>Suite</b></td>
               <td style="vertical-align:middle;"><b>Contents</b></td>
               <td style="vertical-align:middle;"><b>Metrics</b></td>
               <td style="font-size:85%;"><b>How many copies?<br />What do Higher Scores Mean?</b></td>
            </tr>
            <tr>
               <td style="font-family:monospace;vertical-align:middle;">intspeed</td>
               <td style="vertical-align:middle"><a class="external" href="index.html#intspeed">SPECspeed&reg; 2017 Integer</a> </td>
               <td style="vertical-align:middle;">10 integer benchmarks</td>
               <td style="font-family:monospace;">SPECspeed2017_int_base<br />SPECspeed2017_int_peak</td>
               <td style="font-size:85%;vertical-align:middle;" rowspan="2">SPECspeed suites always run one copy of each benchmark.
                  <br />Higher scores indicate that less time is needed.
               </td>
            </tr>
            <tr>
               <td style="font-family:monospace;vertical-align:middle;">fpspeed</td>
               <td style="vertical-align:middle"><a class="external" href="index.html#fpspeed">SPECspeed&reg; 2017 Floating Point</a> </td>
               <td style="vertical-align:middle;">10 floating point benchmarks</td>
               <td style="vertical-align:middle;font-family:monospace;">SPECspeed2017_fp_base<br />SPECspeed2017_fp_peak</td>
            </tr>
            <tr>
               <td style="font-family:monospace;vertical-align:middle;">intrate</td>
               <td style="vertical-align:middle"><a class="external" href="index.html#intrate">SPECrate&reg; 2017 Integer</a> </td>
               <td style="vertical-align:middle;">10 integer benchmarks</td>
               <td style="vertical-align:middle;font-family:monospace;">SPECrate2017_int_base<br />SPECrate2017_int_peak</td>
               <td style="font-size:85%;vertical-align:middle;" rowspan="2">SPECrate suites run multiple concurrent copies of
                  each benchmark.
                  <br />The tester selects how many.
                  <br />Higher scores indicate more <var>throughput</var> (work per unit of time). </td>
            </tr>
            <tr>
               <td style="vertical-align:middle;font-family:monospace;vertical-align:middle;">fprate</td>
               <td style="vertical-align:middle"><a class="external" href="index.html#fprate">SPECrate&reg; 2017 Floating Point</a> </td>
               <td style="vertical-align:middle;">13 floating point benchmarks</td>
               <td style="font-family:monospace;">SPECrate2017_fp_base<br />SPECrate2017_fp_peak</td>
            </tr>
            <tr>
               <td colspan="5" style="padding-top:3px;font-size:80%;">
                  The "Short Tag" is the canonical abbreviation for use with <samp class="snugr">runcpu</samp>, where context
                  is defined by the tools.  In a published document, context may not be clear.
                  <br />
                  To avoid ambiguity in published documents, the Suite Name or the Metrics should be spelled as
                  shown above.
               </td>
            </tr>
         </table>
         <!-- end of ReUsable benchmarks, tags, and suites -->

</div>


<p>(Other benchmarks sets are available, but must be used with great caution. They are described in <a
     href="#AppendixA">Appendix A</a>.)</p>


<!-- .......................................................................................................................... -->
<h4 id="sectionI.C">        I.C.       Five consumers
   <span id="Consumers"> </span>
   <span id="consumers"> </span>
   <span id="Consumer"> </span>
   <span id="consumer"> </span>
   <span id="FiveConsumers"> </span>
   <span id="five-consumers"> </span>
   <span id="five.consumers"> </span>
   <span id="fiveConsumers"> </span>
   <span id="five_consumers"> </span>
   <span id="fiveconsumers"> </span>
</h4>



<p>A config file has content for five (5) distinct consumers, as shown in the table.
<br />To understand a config file, you <span class="caution">must understand which</span> consumer is addressed at any given
point.
<br />Column 3 below provides a few examples for each; click the roman numerals in column 2 for many more.
</p>

<table id="consumerTable">
   <tr id="consRow1">
      <td><b>Consumer</b></td>
      <td><b>List of<br />options</b></td>
      <td><b>Examples</b></td>
      <td><b>Brief description</b></td>
   </tr>

   <tr>
      <th>runcpu</th>
      <td class="tocRef"><a href="#Dtoc_II">II</a></td>
      <td>
         <a class="switch" href="#copies">copies</a>
         <br /><a class="switch" href="#output_format">output_format</a>
         <br /><a class="switch" href="#reportable">reportable</a>
         <br /><a class="switch" href="#threads">threads</a>
         </td>
      <td>
         <p class="snug">Options that change how <samp>runcpu</samp> itself works.  Many should be familiar from <a
            class="external" href="runcpu.html">Using SPEC CPU 2017</a>.  <br />Putting your desired options in the config file can
         simplify the command line.  For example, if <kbd>michael.cfg</kbd> includes the lines:</p>
         <pre class="l2snug">output_format = text,csv
tune          = base
reportable    = yes
runlist       = fpspeed </pre>
         <p class="snug">then the defaults for the runcpu command would change as shown. Both of these would do
         the same thing:</p>
         <pre class="l1snug">runcpu --config=michael
runcpu --config=michael --output=text,csv --tune=base --reportable fpspeed </pre>
      </td>
   </tr>

   <tr>
      <th>specmake</th>
      <td class="tocRef"><a href="#Dtoc_III">III</a></td>
      <td>
         <a class="switch" href="#OPTIMIZE">OPTIMIZE</a>
         <br /><a class="switch" href="#PORTABILITY">PORTABILITY</a>
      </td>
      <td>
         <p class="snug">Make variables, to control benchmark builds via <kbd class="snugr">specmake</kbd>.  </p>
         <p class="l1snug">
            Commonly used <kbd>specmake</kbd> variables:  section <a href="#sectionIII">III</a>
            <br />Many more: <a href="makevars.html" class="external">Make Variables</a>
            <br />Using <kbd>specmake</kbd> on the command line: <a href="utility.html#specmake" class="external">Utilities</a></p>
      </td>
   </tr>

   <tr>
      <th>shell <br />(or <br />cmd.exe)</th>
      <td class="tocRef"><a href="#Dtoc_IV">IV</a></td>
      <td>
         <a class="switch" href="#fdo_postN">fdo_post1</a>
         <br /><a class="switch" href="#fdo_runN">fdo_run1</a>
         <br /><a class="switch" href="#post_setup">post_setup</a>
         <br /><a class="switch" href="#submit">submit</a>
      </td>
      <td>

         <p class="snug">Commands to be executed by the Unix shell (<kbd class="snuglr">/bin/sh</kbd>) or the Windows command interpreter
         (<kbd class="snuglr">cmd.exe</kbd>).
         <br />Example:</p>

         <pre class="l2snug">fdo_pre0 = rm -Rf /tmp/manmohan/feedback
fdo_pre1 = mkdir /tmp/manmohan/feedback </pre>
         <p class="snug">Above, a directory (and all its contents) are deleted, and a new one created,
         prior to a training run for feedback-directed optimization.   </p>

         <!-- ReUsableBegin: shell commands  ......................................................................  -->
         <p style="margin:.5em 1em .2em 6em; text-indent:-4em;">
         <span class="alarm">Warning:</span> SPEC CPU config files can execute <span class="caution"> arbitrary </span>
         <a class="external" href="config.html#shell" >shell</a> commands.
         <br />Read a config file before using it.
         <br />Don't be <a class="external" href="system-requirements.html#root" >root</a>.
         Don't run as <a class="external" href="system-requirements.html#root" >Administrator</a>.
         Turn privileges off.  </p>
         <!-- shell commands ReUsableEnd   ......................................................................  -->

      </td>
   </tr>

   <tr>
      <th>readers</th>
      <td class="tocRef"><a href="#Dtoc_V">V</a></td>
      <td><a class="switch" href="#hw_model">hw_model</a>
         <br /><a class="switch" href="#notes">notes100</a>
         <br /><a class="switch" href="#sw_compiler">sw_compiler</a>
      </td>
      <td>
         <p class="snug">System Under Test (SUT) description, with enough detail so that the reader can understand what was
         tested and can reproduce your results.  If a SPEC CPU 2017 result is published (whether at <a class="external"
            href="https://www.spec.org/cpu2017/">SPEC</a> or independently) it <a href="runrules.html#fullDisclosure"
            class="external">must</a> be fully described.  </p>
      </td>
   </tr>

   <tr>
      <th>preprocessor</th>
      <td class="tocRef"><a href="#Dtoc_VII">VII</a></td>
      <td><a class="switch" href="#define">%define</a>
         <br /><a class="switch" href="#ifdef">%ifdef</a>
      </td>
      <td>
         <p class="snug">Preprocessing directives and definitions to adjust your config file prior to use.  All preprocessor
         directives begin in column 1.  Example:</p>
         <pre class="l2snug">
%if %{bits} == 64
%   define model  -m64
%else
%   define model  -m32
%endif
CC  = gcc %{model} </pre>
      </td>
   </tr>
</table>





<!-- .......................................................................................................................... -->
<h3 id="sectionI.D" style="margin-bottom:18px;">        I.D.       Config file syntax
</h3>


<!-- .......................................................................................................................... -->
<h4 id="sectionI.D.1" class="snugtop">      I.D.1.     Sections and scope
   <span id="Section"> </span>
   <span id="section"> </span>
   <span id="Sections"> </span>
   <span id="sections"> </span>
</h4>



<p>A config file contains: a header section, named sections, and a HASH section.
</p>

<p id="scope" class="hanging1"><b>Scope:</b> Every line is considered to be within the scope of one of these three.
Lines prior to the first section marker are in the scope of the header section.  All other lines are either in the scope of
the most recently preceding section marker or in the HASH section.</p>

<table>
   <tr>
      <td><b>Sections</b></td>
      <td><b>Description</b></td>
      <td><b>Example</b></td>
   </tr>

   <tr>
      <th  style="vertical-align:bottom;">header section
         <span id="HeaderSection"> </span>
         <span id="header-section"> </span>
         <span id="header.section"> </span>
         <span id="headerSection"> </span>
         <span id="header_section"> </span>
         <span id="headersection"> </span>
         <span id="Header"> </span>
         <span id="header"> </span>
      </th>
      <td>
         <p class="snug">The <i>header section</i> is the first section, prior to the any named section.  Most attempts to
         address runcpu itself are done in the header section.  In the example, lines 1 through 6 are in the
         header section.</p>
      </td>
      <td rowspan="4"><pre style="margin-left:3px;border-right:thin solid lightgray" class="snug">$ cat -n threeSections.cfg
 1  flagsurl             = $[top]/config/flags/gcc.xml
 2  iterations           = 1
 3  output_format        = text
 4  runlist              = 519.lbm_r
 5  size                 = test
 6  tune                 = peak
 7  fprate=peak:
 8     CC_VERSION_OPTION = -v
 9     CC                = gcc
10     OPTIMIZE          = -O2
11  519.lbm_r=peak:
12     OPTIMIZE          = -O3
13
14  __HASH__
15  519.lbm_r=peak=none:
16  # Last updated 2017-02-06 14:29:40
17  opthash=ff6059d6d9ec9577f7f49d05178c58688f31004089
18  baggage=
19  compiler_version=\
20  @eNo1jbEOgjAYhPc+RUcdaFEJIWwGHEhQjBLjRn7LLzapLWkL8
21  kpP9OCqkdX070hmtk0bTjMUspiuhQA9RFgfDki3brEkLdkCf0y
22  0NO36VHldDROLqTSzoNS2JfS5pT/DqUAH54cv4tAsjDEC6M9au
23  FuH/CZ+c5Q+pyRd+tUlX
24  compile_options=\
25  @eNp1T11PgzAUfe+vaPrOMjNfJGMJlLqhQBtLX3xptHYGBWoKM
26  vNp93Vjs3obadX2I+sHXZtD+0D3VXr9bX+8/InJBEMAeKBFZLq
27  KgWj06epUADLlCVqe+rFquJaKiHumJSaC1YWAuOAr/DPWvfu4I
28  mALF6zzeSpj96+RITFhJd3rG/dMaQTzEIJYV2T0DJl8RlGfl7Z
29  hjyd8vw+D9MirnY6z5LRW9NOC1yNkc/OfAJtxnuD
30  exehash=5290fe504238c6de1a13e275ab8ca11e035fbb4e7e
31
$
         </pre>
      </td>
   </tr>
   <tr>
      <th style="border-top:none;">&nbsp;&nbsp;<i>or</i><br />default:</th>
      <td id="returnToHeader" style="border-top:none;">

         <p id="headerReturn" class="snug">Options for the header section may also be entered in section </p>
         <pre class="l1snug">default=default=default:</pre>
         <p class="snug">or a <a href="#omitspecs">shorter</a> spelling thereof, such as </p>
         <pre class="l1snug">default:</pre>
         <p class="snugtop">This can be helpful if you need to effectively return to the header section, perhaps when using
         <a href="#include">include</a>. </p>

         <p class="hanging1snugbot"><b>Tip:</b> Nevertheless, it is usually easier to maintain a config files that keeps all
         runcpu options near the top, preferably in alphabetical order.</p>
      </td>
   </tr>
   <tr>
      <th>Named sections</th>
      <td>
         <p class="snugtop">A <i>named section</i> is a portion of the config file that follows a line that contains a section
         marker.  </p>
         <p>Briefly, a section marker is a 1-to-3 part string with equals signs in the middle and a colon at the end; see detail
         <a href="#sectionMarkers">below</a>.  The example has 2 named sections, delimited by 2 section markers on lines 7 and 11.
         </p>
         <p class="snugbot">Notice that the example sets <kbd>OPTIMIZE</kbd> in both of the named sections.  To understand
         which one gets used, see the <a href="#precedence">precedence rules</a>, which describe how sections interact.</p>
      </td>
   </tr>
   <tr>
      <th>HASH section
         <span id="HASH"> </span>
         <span id="hash"> </span>
         <span id="HASH-Section"> </span>
         <span id="HASH.Section"> </span>
         <span id="HASHSection"> </span>
         <span id="HASH_Section"> </span>
         <span id="HashSection"> </span>
         <span id="hash-section"> </span>
         <span id="hash.section"> </span>
         <span id="hashSection"> </span>
         <span id="hash_section"> </span>
         <span id="hashsection"> </span>
      </th>
      <td>
         <p class="snug">The <i>HASH Section</i> is the final, automatically-generated section. It starts
         with <kbd class="nb">__HASH__</kbd> and contains checksums.  The
         example starts the HASH section at line 14.  (For readability, the lines are truncated on the right.)</p>
         <p>The automatically-updated checksums ensure that binaries match their config file.  You can
         optionally disable checking, but doing so is strongly discouraged.  See <a
                    href="#verify_binaries"><kbd>verify_binaries</kbd></a>.</p>
         <p class="snugbot">Config files printed by <a href="runcpu.html#outputConfig"
            class="external">--output_format=config</a> do not include the HASH section.</p>
      </td>
   </tr>
</table>



<!-- .......................................................................................................................... -->
<h4 id="sectionI.D.2">      I.D.2.     Comments
   <span id="Comments"> </span>
   <span id="comments"> </span>
</h4>



<p class="snugbot">Comments begin with '<kbd class="snuglr">#</kbd>'.  There are two types:</p>
<table style="width:800px;margin:.6em 2em 1em;" class="snugtop">
   <tr>
      <th>Syntax</th>
      <th>Type</th>
      <th>Saved?</th>
      <th>Detail</th>
   </tr>
   <tr>
      <th class="ttc">#</th>
      <td>Regular</td>
      <td>Yes</td>
      <td>Regular comments can be <a href="#full-line">full-line</a> or <a href="#trailing">trailing</a>.   A copy of your
         config file is saved with the test results.  If you submit your results to SPEC for publication, the regular
         comments can be read by anyone.  </td>
   </tr>
   <tr>
      <th class="ttc">#&gt;</th>
      <td id="protected_comments">Protected
         <span id="ProtectedComments"> </span>
         <span id="protected-comments"> </span>
         <span id="protected.comments"> </span>
         <span id="protectedComments"> </span>
         <span id="protectedcomments"> </span>
      </td>
      <td>No</td>
      <td><p class="snug">A <a href="#full-line">full-line</a> comment that begins with <kbd><b>#&gt;</b></kbd> is a
         <i>protected comment</i> and will not be saved with your results.  You can use protected comments for proprietary
         information, for example:</p>
         <pre style="margin-left:.1em;" class="snug">#&gt; I didn't use the C++ beta because of Bob's big back-end bug.  </pre>
      </td>
   </tr>
</table>
<p class="snugtop">Both types of comments are ignored when processing the config file.</p>

<p id="full-line"><b>Full-line comments:</b> If <kbd>#</kbd> is the first non-blank item on a line, then the whole line is a
comment. Comment lines can be placed anywhere in a config file.   </p>

<p class="snugbot" id="trailing"><b>Trailing comments:</b> If a line has non-blank items, you can <a
                   href="#notAcomment">(usually)</a>  add regular
comments.  You <i>cannot</i> write a protected trailing comment.   If you try to use a protected comment after some
other element, it is treated as a regular comment.  </p>
<p class="l1snugbot">All comments below will be saved except the one that says 'NOT saved'.</p>
<pre class="l2snugish">
                       # New optimizers.
default=base:          # Most optimizers go up to ten.
   OPTIMIZE   = -O11   #    These go to eleven.
                       #&gt; This comment is NOT saved
   COPTIMIZE  = -std   #&gt; This comment is saved
</pre>

<p id="notAcomment" class="snugbot"><b>Not a comment:</b> These instances of <kbd>#</kbd> do not start a comment:</p>
<ul class="snug">

   <li><p class="snugish"><b><kbd>\#</kbd></b> &nbsp;&nbsp; To use a <kbd>#</kbd> without starting a comment, put a backslash in front of it:</p>
<pre class="l2snug">
hw_model = Mr. Lee's \#1 Semi-Autonomous Unit
</pre></li>

<li><p class="snugbot"><b><kbd>notesN...#</kbd></b> &nbsp;&nbsp; Config file <a href="#notes">notes</a> are printed in reports as entered, including any instances of <kbd>#</kbd></p>
<pre class="l2snugish">
#notes100  = This note will not be printed, because # was the first item on the line.T
notes110   = This note will be printed in reports.  All of it.  # Even this part.
</pre></li>


</ul>



<!-- .......................................................................................................................... -->
<h4 id="sectionI.D.3">      I.D.3.     Whitespace
   <span id="WhiteSpace"> </span>
   <span id="white-space"> </span>
   <span id="white.space"> </span>
   <span id="whiteSpace"> </span>
   <span id="white_space"> </span>
   <span id="whitespace"> </span>
</h4>

<p><b>Blank lines</b> can be placed anywhere in a config file.  They are ignored.</p>

<p class="hanging1"><b>Spaces at the beginning of lines</b> are ignored, with the exception that preprocessor directives always begin with a
percent sign (%) in the first column.  You can put spaces after the percent sign, if you wish (<a
href="#percentspace">example</a>).</p>

<p class="hanging1" style="margin-bottom:.1em;"><b>Spaces within a line</b> are usually ignored.  Don't try to break up a <a
   href="#sectionMarker">section marker</a>, and you can't break up a single word (say '<kbd class="snuglr">OPTIMIZE</kbd>' not
'<kbd class="snuglr">OPT&nbsp;I&nbsp;MIZE</kbd>').  If multiple spaces separate line elements, it is as if there were only one space.  Each of
these have the same meaning:</p>
<pre class="l2snug">   OPTIMIZE=-O2 -noalias
   OPTIMIZE   =  -O2      -noalias
</pre>
<p class="l1snugtop">One place where spaces are considered significant is in <a href="#notes">notes</a>, where you
can use spaces to line up your comments.  Notes are printed in a fixed-width font.</p>

<p class="snugbot"><b>Trailing spaces and tabs</b> are ignored, unless they are preceded by a backslash.  For example, if
<kbd>space.cfg</kbd> contains:</p>

<pre class="l2snugish">$ <b>cat trailing_space.cfg </b>
PATH1   = /path/without/any/trailer
FC      = $(PATH1)/f90
PATH2   = /path/with/trailing/space\
CC      = $(PATH2)/cc
$
</pre>
<p class="l1snugish"> then we can use <a class="external" href="runcpu.html#fake">fake</a> to demonstrate the compile
commands that would be generated (+ Unix commands <kbd class="snugr">grep</kbd>, <kbd class="snugr">head</kbd>, and
<kbd>cut</kbd> to pick out one example).
</p>
<pre class="l2snugish">$ <b>cat trailing_space.sh </b>
runcpu -c space --fake 527.cam4 | grep without/ | head -1 | cut -b 1-80
runcpu -c space --fake 527.cam4 | grep trailing | head -1 | cut -b 1-80
$
$ <b>./trailing_space.sh </b>
/path/without/any/trailer/f90 -c -o ESMF_BaseMod.fppized.o -I. -Iinclude -Inetcd
/path/with/trailing/space /cc -c -o GPTLget_memusage.o -DSPEC -DSPEC_CPU -DNDEBU
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
<p class="l1snugtop">Notice that the <kbd>PATH2</kbd> trailing space is preserved</p>


<!-- .......................................................................................................................... -->
<h4 id="sectionI.D.4">      I.D.4.     Quoting
   <span id="Quoting"> </span>
   <span id="quoting"> </span>
</h4>

<p>If you use double (<kbd class="snuglr">"</kbd>) or single (<kbd class="snuglr">'</kbd>) quotes within a config file, runcpu leaves them
alone.  The assumption is that you put them there because one of the <a href="#consumers">consumers</a> (such as a
<a href="#shell">shell</a>) needs them.  The quotes are not significant to runcpu but may be highly significant to
the consumer.  See the section on <a href="#quoteTraps">quote traps</a>.</p>

<p class="snugbot">If you use a backslash (<kbd class="snuglr">\</kbd>) it is usually not significant.  The exceptions are:</p>
<ul>
   <li><kbd>\#</kbd> prevents the pound sign from starting a <a href="#comments">comment</a>.</li>
   <li><kbd>\space</kbd> at the end of a line prevents the trailing <a href="#whitespace">space</a> from being stripped.</li>
   <li><kbd>\$SYMBOL</kbd> prevents runcpu <a href="#variables">variable substitution</a>, typically because you
      are passing <kbd>$SYMBOL</kbd> to a <a href="#shell">shell</a></li>
</ul>




<!-- .......................................................................................................................... -->
<h4 id="sectionI.D.5">      I.D.5.     Line continuation
   <span id="LineContinuation"> </span>
   <span id="line-continuation"> </span>
   <span id="line.continuation"> </span>
   <span id="lineContinuation"> </span>
   <span id="line_continuation"> </span>
   <span id="linecontinuation"> </span>
   <span id="ContinuationLines"> </span>
   <span id="continuation-lines"> </span>
   <span id="continuation.lines"> </span>
   <span id="continuationLines"> </span>
   <span id="continuation_lines"> </span>
   <span id="continuationlines"> </span>
   <span id="Continuation"> </span>
   <span id="continuation"> </span>
   <span id="HereDocument"> </span>
   <span id="here-document"> </span>
   <span id="here.document"> </span>
   <span id="hereDocument"> </span>
   <span id="here_document"> </span>
   <span id="heredocument"> </span>
   <span id="HereDocuments"> </span>
   <span id="here-documents"> </span>
   <span id="here.documents"> </span>
   <span id="hereDocuments"> </span>
   <span id="here_documents"> </span>
   <span id="heredocuments"> </span>
</h4>

<p class="snugbot">Many fields, including most <a href="#Dtoc_V">reader</a> fields, can be continued by
adding a number:</p>

<pre class="l2snug">sw_os1         = Turboblaster OS V1.0
sw_os2         = (Tested with Early Hardware Release 0.99
sw_os3         = and Patch 42.)
hw_disk105     = 42 TB on 6x 8 TB 10K RPM SAS Disks
hw_disk110     = arranged as 4x 2-way mirrors; plus
hw_disk115     = Turboblaster Disk Accelerator
</pre>

<p class="snugtop" id="nocontinue">The fields which cannot be continued are the ones that are expecting a simple integer,
such as <a href="#hw_nchips">hw_nchips</a> and <a href="#license_num">license_num</a>; and the ones that expect a date, such
as <a href="#hw_avail">hw_avail</a>. You can pick your own style of numbering, as in the examples above.  (Note: the stored
results from your test always use three-digit numbers, and have slightly different syntax, as discussed in <a
      class="external" href="utility.html#cont">utility.html</a>.)</p>

<p class="snugbot">Shell-style "here documents" with double angle brackets and a delimiter word (e.g. <kbd class="snugr">&lt;&lt;EOT</kbd>)
can be used to set multi-line values.  Backslash-continued lines are also supported.  For example:</p>

<pre class="l2snugish">$ <b>cat continued_lines.cfg</b>
expand_notes   = 1
output_format  = text
output_root    = /tmp/fake_lines
runlist        = 519.lbm_r

here_continued = &lt;&lt;EOT
      + This is +
       + a test  +
EOT

backslash_continued = + So is +\
 + this  +

notes1 = ${here_continued}
notes2 = ${backslash_continued}
$ <b>cat continued_lines.sh </b>
runcpu --config=continued_lines --fakereport | grep txt
grep '+' /tmp/fake_lines/result/CPU2017*txt
$ <b>./continued_lines.sh </b>
    format: Text -&gt; /tmp/fake_lines/result/CPU2017.001.fprate.refrate.txt
           + This is +
           + a test  +
     + So is +
     + this  +
$   <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>





<!-- .......................................................................................................................... -->
<h4 id="sectionI.D.6">      I.D.6.     Included files
   <span id="IncludeFiles"> </span>
   <span id="include-files"> </span>
   <span id="include.files"> </span>
   <span id="includeFiles"> </span>
   <span id="include_files"> </span>
   <span id="includefiles"> </span>
   <span id="Include"> </span>
   <span id="include"> </span>
   <span id="IncludedFiles"> </span>
   <span id="included-files"> </span>
   <span id="included.files"> </span>
   <span id="includedFiles"> </span>
   <span id="included_files"> </span>
   <span id="includedfiles"> </span>
</h4>


<p>You can include other files in your config file using <kbd>include:</kbd>
<br />Multiple files may be included.
<br />Included files may use <a href="#macros">macros</a> (and you can use <a class="external"
   href="utility.html#configpp">configpp</a> to check the effect).
<br />Included files may write to arbitrary <a href="#namedSections">sections</a>, including
(<a href="#returnToHeader">effectively</a>) the header section.</p>

         <p class="snugbot">Example: a config file is developed on one system, and applied on a different System Under Test
         (SUT). The compilers are, of course, installed on the development system.  They might not be present on the SUT. </p>
<table class="noborder">
   <tr>
      <td>
         <p class="snugish">
         The compiler is described in the main config file on lines 10-12.
         <br />
         The hardware is described in <kbd>SUT.inc</kbd> which is included via line 6.
         </p>

<pre class="snugish">$ <b>cat -n include.cfg</b>
 1  iterations    = 1
 2  output_format = text
 3  output_root   = /tmp/example
 4  runlist       = 519.lbm_r
 5  size          = test
 6  include: SUT.inc
 7  default:
 8    CC                = gcc
 9    CC_VERSION_OPTION = -V
10    sw_compiler001    = C/C++/Fortran: Version 6.2.0 of GCC
11    sw_compiler002    = the GNU Compiler Collection
12    sw_avail          = Aug-2016
$</pre>
<p class="snugish">Note the software date (<kbd class="snuglr">sw_avail</kbd>) on line 12 above.
<br />Today's SUT is the Turboblaster SuperHero IV.
<br />Copy its information to the expected place.</p>
<pre class="snugish">$ <b>cp Turboblaster.inc SUT.inc</b>
$ <b>cat Turboblaster.inc </b>
default:
   hw_model  = SuperHero IV
   hw_avail  = Feb-2018
   hw_vendor = Turboblaster
$</pre>
<p class="snugish">Note the hardware date (<kbd class="snuglr">hw_avail</kbd>) in the include file.
<br />Both dates are referenced in reports:</p>
<pre class="snugish">$ <b>cat include.sh </b>
runcpu --config=include | grep txt
grep avail /tmp/example/result/*txt
$ <b>./include.sh </b>
format: Text -&gt; /tmp/example/result/CPU2017.001.fprate.test.txt
Test sponsor: Turboblaster      Hardware availability: Feb-2018
Tested by:    Turboblaster      Software availability: Aug-2016
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>

      </td>

      <td style="border:2px solid #e0e0e0;padding:2px 2px 2px 6px;margin:2px 2px 2px 6px; font-size:100%;" >
         <p class="snug">
   <span id="Example"> </span>
   <span id="example"> </span>
   <span id="Examples"> </span>
   <span id="examples"> </span>
   <span id="Example-format"> </span>
   <span id="Example.format"> </span>
   <span id="ExampleFormat"> </span>
   <span id="Example_format"> </span>
   <span id="Exampleformat"> </span>
   <span id="example-format"> </span>
   <span id="example.format"> </span>
   <span id="exampleFormat"> </span>
   <span id="example_format"> </span>
   <span id="exampleformat"> </span>

         <b>Notes on the Examples</b>
         </p>

         <p class="snugish">Many of the examples that begin with <kbd>cat somefile</kbd> are on your installed copy of SPEC
         CPU 2017, in directory
         <samp class="nb">$SPEC/config/tiny-examples</samp>  or
         <samp class="nb">%SPEC%\config\tiny-examples.</samp>  </p>

         <p class="hanging1snug"><kbd><b>cat example.cfg</b></kbd> Display config file.  Windows users can use <kbd
            class="snugr">type</kbd>.  </p>

         <p class="hanging1snug"><kbd><b>cat example.sh</b></kbd> For config files with many lines of output, a corresponding
         <kbd>.sh</kbd> script file has commands to pick out a subset.  Windows users could create a <kbd>.bat</kbd> file
         with <kbd class="nbsnugr">call runcpu</kbd>.</p>

         <p class="hanging1snug"><kbd class="nb"><b>cat -n </b></kbd> Add line numbers.</p>

         <p class="hanging1snug"><kbd><b>CC_VERSION_OPTION</b></kbd> How to say to the compiler "Please tell me your version".
         A <i>required</i> option for all except fake runs. <a style="font-size:85%;" href="#CC_VERSION_OPTION">(detail)</a> </p>

         <p class="hanging1snug"><kbd><b>cp</b></kbd> Copy a file.  Windows users could say <kbd class="snugr">copy</kbd>.</p>

         <p class="hanging1snug"><kbd><b>cut, head, tail </b></kbd> Various ways to subset output. </p>

         <p class="hanging1snug"><kbd><b>default=base:</b></kbd> A <a href="#sectionMarkers">section marker</a></p>

         <p class="hanging1snug"><kbd class="nb"><b>--fake</b></kbd> Many examples use <a class="external"
            href="runcpu.html#fake">--fake</a> or <a class="external" href="runcpu.html#fakereportable">--fakereportable</a>,
         to quickly provide a dry run demonstration. You can try fake examples without even installing a compiler.</p>

         <p class="hanging1snug"><kbd><b>iterations=1</b></kbd> Demonstrate using just one repetition.  <span
            class="caution">Warning:</span> Reportable runs use at least 2.</p>

         <p class="hanging1snug"><kbd><b>grep</b></kbd> Search the output.  Windows users could try <kbd>findstr</kbd> </p>

         <p class="hanging1snug"><kbd><b>ls</b></kbd> List files. Windows users could say <kbd class="snugr">dir</kbd>. </p>

         <p class="hanging1snug"><kbd><b>output_root</b></kbd> Send results to named directory.</p>

         <p class="hanging1snug"><kbd><b>runlist</b></kbd> Often, 519.lbm_r is demonstrated because it compiles quickly. </p>

         <p class="hanging1snug"><kbd><b>size=test</b></kbd> For demonstration purposes, use the very short workload.  <span
            class="caution">Warning:</span> The intent of 'test' is just a sanity check that a binary works.  It is not a <a
            class="external" href="https://www.spec.org/fairuse.html">comparable</a> metric.  If you publish results, you must
            use the 'ref' workloads.</p>

      <p>For other fields, see table of contents.  Most examples were tested with a SPEC CPU 2017 release candidate and this
      document contains their actual output, except: white space was liberally edited and (in a very few cases) line width
      was reduced by chopping out words.  <!-- An insignificant prize will go to the first (and only the first) person who
      hunts down proof of a word that I removed.
      --> </p>


      </td>


   </tr>
</table>







<!-- .......................................................................................................................... -->
<h4 id="sectionI.D.7">      I.D.7.     Section markers and Named sections
   <span id="SectionMarker"> </span>
   <span id="section-marker"> </span>
   <span id="section.marker"> </span>
   <span id="sectionMarker"> </span>
   <span id="section_marker"> </span>
   <span id="sectionmarker"> </span>
   <span id="SectionMarkers"> </span>
   <span id="section-markers"> </span>
   <span id="section.markers"> </span>
   <span id="sectionMarkers"> </span>
   <span id="section_markers"> </span>
   <span id="sectionmarkers"> </span>
   <span id="NamedSection"> </span>
   <span id="named-section"> </span>
   <span id="named.section"> </span>
   <span id="namedSection"> </span>
   <span id="named_section"> </span>
   <span id="namedsection"> </span>
   <span id="NamedSections"> </span>
   <span id="named-sections"> </span>
   <span id="named.sections"> </span>
   <span id="namedSections"> </span>
   <span id="named_sections"> </span>
   <span id="namedsections"> </span>
</h4>



<p class="hanging2">A <i>named section</i> begins with a section marker and continues until the next section marker or the HASH section is
reached.
<br />Named sections can be entered in any order.
<br />Section markers can be repeated. Material from repeated sections is automatically <a href="#pex4">consolidated</a>.
</p>

<p>A <i>section marker</i> is a one- to three-part string of the form:</p>

<pre>   benchmark[,...]=tuning[,...]=label[,...]:
</pre>

<p>The three parts of a section marker are called the <i>section specifiers</i>, with allowed values:
<span id="SectionSpecifier"> </span>
<span id="section-specifier"> </span>
<span id="section.specifier"> </span>
<span id="sectionSpecifier"> </span>
<span id="section_specifier"> </span>
<span id="sectionspecifier"> </span>
<span id="SectionSpecifiers"> </span>
<span id="section-specifiers"> </span>
<span id="section.specifiers"> </span>
<span id="sectionSpecifiers"> </span>
<span id="section_specifiers"> </span>
<span id="sectionspecifiers"> </span>
<span id="Specifiers"> </span>
<span id="specifiers"> </span>
<span id="Specifier"> </span>
<span id="specifier"> </span>

</p>

<table class="l2">
   <tr><th>Section<br />specifier</th><th>Allowed values</th></tr>
<tr><td><kbd><b>benchmark</b></kbd>  </td>
               <td><kbd>default</kbd>
               <br />A metric: <kbd class="snugr">intrate</kbd>, <kbd class="snugr">intspeed</kbd>, <kbd class="snugr">fprate</kbd>, or <kbd>fpspeed</kbd>
               <div><span style="font-size:95%;color:#b0b0b0;">An <a style="color:#6868f8;text-decoration:none;" href="#AppendixA">Auxiliary</a>
                     Benchmark Set</span>
                  <span style="font-size:90%;"><i>(not recommended; see <a style="text-decoration:none;"
                                                                           href="#bset_warning">warning</a>)</i></span></div>
               Any individual benchmark, such as <kbd>503.bwaves_r</kbd>
               <br />A list, such as: <kbd>503.bwaves_r,603.bwaves_s</kbd>
               </td>
</tr>
<tr><td><kbd><b>tuning </b> </kbd>  </td>
               <td> <kbd>default</kbd>
               <br /> <kbd>base</kbd>
               <br /> <kbd>peak</kbd>
               <br /> A list of tuning levels: <kbd>base,peak</kbd> </td>
</tr>
<tr><td><kbd><b>label</b></kbd> </td>
               <td> <kbd>default</kbd>
                  <br />Any specific <a href="#label">label</a>: an arbitrary tag to identify binaries and directories
               <br />A list of labels, separated by commas </td>
</tr>
</table>

<p class="snugbot" id="omitspecs">Trailing <kbd>default</kbd> section specifiers may be omitted from a section marker.  In the
pairs below, in each case, the second line is equivalent to the first:</p>

<pre>
intrate=default=default:     628.pop2_s=base=default:      default=default=default:
intrate:                     628.pop2_s=base:              default:
</pre>



<!-- .......................................................................................................................... -->
<h3 id="sectionI.E">        I.E.       Section merging and precedence rules
   <span id="Precedence"> </span>
   <span id="precedence"> </span>
</h3>



<p>By constructing section markers, you determine how you would like your options applied.  Benchmarks are built according
to instructions in the sections that they match, subject to rules for combining sections and resolving conflicts among them.
Sections are combined using these rules.
<br />Click <img src="images/down.png" alt="down arrow" /> to go to an example.
</p>

<ul style="list-style-type:none;">
   <li><p class="snug"><a href="#pex1"><img alt="down arrow" src="images/down.png" /></a> For the benchmark specifier, the precedence is:</p>
      <pre class="l2snug">
highest   named benchmark(s)
          suite name
lowest    default </pre>
      <p class="l1snug">(See also Appendix <a href="#AppendixA">A</a>)</p></li>
      <li style="margin-top:.3em;"><a href="#pex2"><img alt="down arrow" src="images/down.png" /></a> For the tuning specifier, <kbd>base</kbd>
         or <kbd>peak</kbd> has higher precedence than <kbd class="snugr">default</kbd>. </li>
      <li style="margin-top:.3em;"><a href="#pex3"><img alt="down arrow" src="images/down.png" /></a> For the label specifier, any named label
         is at a higher precedence level than <kbd class="snugr">default</kbd>.</li>
      <li style="margin-top:.3em;">Combining sections:
         <ol class="snug" style="list-style-type:none;">
            <li><a href="#pex4"><img alt="down arrow" src="images/down.png" /></a> Combine sections that apply to a benchmark, if there is no
               conflict among them.</li>
            <li><p class="snug"><a href="#pex5"><img alt="down arrow" src="images/down.png" /></a> If sections conflict with each other, the
               order of precedence is:</p>
               <pre class="l2snug">
highest     benchmark
            tuning
lowest      label </pre>
            </li>
         </ol>
      </li>
      <li style="margin-top:.3em;">Section order:
         <ul class="snug" style="list-style-type:none;">
            <li><p class="snug"><a href="#pex6"><img alt="down arrow" src="images/down.png" /></a> For sections at differing precedence
               levels, order does not matter.</p></li>
            <li><p class="snug"><a href="#pex7"><img alt="down arrow" src="images/down.png" /></a> If a section occurs more than once, the
               settings are combined. If there are conflicts, the last instance wins.</p></li>
         </ul>
      </li>
</ul>



<table id="pex1" style="margin-top:2em;">
   <tr>
      <td colspan="2" class="pex">Precedence Example 1: benchmark specifiers</td>
   </tr>
   <tr>
      <td style="border-top:none;">
         <p>For the benchmark specifier, the precedence is:</p>
         <pre class="l1">
  highest   named benchmark(s)
            suite name
  lowest    default</pre>
         <p>The <a href="#flagsurl">flagsurl</a> line picks up definitions that are provided with SPEC CPU 2017. </p>
         <p><kbd>519.lbm_r</kbd> is an <kbd>fprate</kbd> benchmark, but it does not use the setting on lines
         14-15.  Instead, it uses the higher precedence lines 10-11 (named benchmark).</p>
         <p><kbd>619.lbm_s</kbd> is an <kbd>fpspeed</kbd> benchmark.  The highest precedence section for it is on lines
         12-13.</p>
         <p><kbd>505.mcf_r</kbd> is an <kbd>intrate</kbd> benchmark.  It gets the low-precedence OPTIMIZE setting from lines
         16-17.</p>
      </td>
      <td style="border-top:none;">
         <pre class="l2snugish">$ <b>cat -n precedence_example1.cfg</b>
     1  flagsurl             = $[top]/config/flags/gcc.xml
     2  iterations           = 1
     3  output_format        = text
     4  output_root          = /tmp/ptest
     5  runlist              = 519.lbm_r,619.lbm_s,505.mcf_r
     6  size                 = test
     7  default:
     8     CC_VERSION_OPTION = -v
     9     CC                = gcc
    10  519.lbm_r:
    11     OPTIMIZE          = -O3
    12  fpspeed:
    13     OPTIMIZE          = -O2
    14  fprate:
    15     OPTIMIZE          = -O1
    16  default:
    17     OPTIMIZE          = -O0
$ <b>cat -n precedence_example1.sh </b>
     1  runcpu --config=precedence_example1 | grep txt
     2  cd /tmp/ptest/result
     3  grep 'O[0-9]' *txt
$ <b>./precedence_example1.sh </b>
    format: Text -&gt; /tmp/ptest/result/CPU2017.001.fprate.test.txt
    format: Text -&gt; /tmp/ptest/result/CPU2017.001.fpspeed.test.txt
    format: Text -&gt; /tmp/ptest/result/CPU2017.001.intrate.test.txt
CPU2017.001.fprate.test.txt: 519.lbm_r: -O3
CPU2017.001.fpspeed.test.txt: 619.lbm_s: -O2
CPU2017.001.intrate.test.txt: 505.mcf_r: -O0
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
      </td>
   </tr>
</table>



<table id="pex2" style="margin-top:2em;">
   <tr>
      <td colspan="2" class="pex">Precedence Example 2: tuning specifiers</td>
   </tr>

   <tr>
      <td style="border-top:none;">
         <p>For the tuning specifier, <kbd>base</kbd> or <kbd>peak</kbd> has higher precedence than <kbd
          class="snugr">default</kbd>. </p>
         <p>The first few lines of the config file use similar features as the <a
          href="#pex1">previous</a> example.</p>
         <p>The tuning from line 12 is used for base, and line 14 for peak.</p>
      </td>
      <td style="border-top:none;">
         <pre class="l2snugish">$ <b>cat -n precedence_example2.cfg </b>
     1  flagsurl             = $[top]/config/flags/gcc.xml
     2  iterations           = 1
     3  output_format        = text
     4  output_root          = /tmp/ptest2
     5  runlist              = 519.lbm_r
     6  size                 = test
     7  default=default:
     8     CC_VERSION_OPTION = -v
     9     CC                = gcc
    10     OPTIMIZE          = -O0
    11  default=base:
    12     OPTIMIZE          = -O1
    13  default=peak:
    14     OPTIMIZE          = -O3
$ <b>cat precedence_example2.sh </b>
runcpu --config=precedence_example2 --tune=base | grep txt
runcpu --config=precedence_example2 --tune=peak | grep txt
cd /tmp/ptest2/result
grep 'O[0-9]' *txt
$ <b>./precedence_example2.sh </b>
    format: Text -&gt; /tmp/ptest2/result/CPU2017.001.fprate.test.txt
    format: Text -&gt; /tmp/ptest2/result/CPU2017.002.fprate.test.txt
CPU2017.001.fprate.test.txt: 519.lbm_r: -O1
CPU2017.002.fprate.test.txt: 519.lbm_r: -O3
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
      </td>
   </tr>
</table>


<table id="pex3" style="margin-top:2em;">
   <tr>
      <td colspan="2" class="pex">Precedence Example 3: label specifiers</td>
   </tr>
   <tr>
      <td style="border-top:none;">
         <p>For the label specifier, any named <a href="#label">label</a> has higher precedence than the <kbd
            class="snugr">default</kbd>.</p>
         <p>This config file is simpler than the previous examples, because we don't even bother to run it; instead,
         <a class="external" href="runcpu.html#fake">--fake</a> is used.</p>
         <p>The <kbd>runcpu</kbd> command uses <kbd class="nbsnugr">--label=OhTwo</kbd>.  Therefore, the <kbd>default</kbd>
         setting for <kbd>OPTIMIZE</kbd> on line 6 is over-ridden by the settings on lines 7-8.</p>
      </td>
      <td style="border-top:none;">
         <pre class="l2snugish">$ <b>cat -n precedence_example3.cfg </b>
 1  runlist              = 619.lbm_s
 2  size                 = test
 3  fpspeed=base=default:
 4     CC_VERSION_OPTION = -v
 5     CC                = gcc
 6     OPTIMIZE          = -O0
 7  fpspeed=base=OhTwo:
 8     OPTIMIZE          = -O2
$ <b>cat precedence_example3.sh </b>
runcpu --config=precedence_example3 --fake --label=OhTwo | grep lbm.c
$ <b>./precedence_example3.sh </b>
gcc -c -o lbm.o -DSPEC -DSPEC_CPU -DNDEBUG -DLARGE_WORKLOAD  -O2 lbm.c
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
      </td>
   </tr>
</table>


<table id="pex4" style="margin-top:2em;">
   <tr>
      <td colspan="2" class="pex">Precedence Example 4:  Combining sections</td>
   </tr>
   <tr>
      <td style="border-top:none;">
         <p>Combine sections that apply to a benchmark, if there is no conflict among them.</p>
         <p>Note that line 1 sets the label, and line 3 sets the tuning.</p>
         <p class="snugbot">All sections -- including lines 6, 8, 10, and 12 -- contribute to the compile command, which has
         been wrapped for readability. </p>
      </td>
      <td style="border-top:none;">
         <pre class="l2snugish">$ <b>cat -n precedence_example4.cfg </b>
  1  label                = wall
  2  runlist              = 619.lbm_s
  3  tune                 = peak
  4  default:
  5     CC_VERSION_OPTION = -v
  6     CC                = gcc
  7  fpspeed:
  8     OPTIMIZE          = -O1
  9  default=peak:
 10     COPTIMIZE         = -ftree-vectorize
 11  default=default=wall:
 12     EXTRA_COPTIMIZE   = -Wall
$ <b>cat precedence_example4.sh  </b>
runcpu --config=precedence_example4 --fake | grep lbm.c
$ <b>./precedence_example4.sh </b>
gcc -c -o lbm.o -DSPEC -DSPEC_CPU -DNDEBUG -DLARGE_WORKLOAD
     -O1 -ftree-vectorize           -Wall     lbm.c
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
      </td>
   </tr>
</table>

<table id="pex5" style="margin-top:2em;">
   <tr>
      <td colspan="2" class="pex">Precedence Example 5: Conflicting sections</td>
   </tr>
   <tr>
      <td style="border-top:none;">
         <p class="snugtop">If sections conflict with each other, the order of precedence is:</p>
         <pre class="l2snug">
highest     benchmark
            tuning
lowest      label </pre>
            <p>The first <kbd class="nb">runcpu</kbd> command includes <kbd class="nbsnugr">--label=wall</kbd>.  It uses the
            <kbd>OPTIMIZE</kbd> setting from lines 13-14, which have higher precedence than the default (lines 15-16).</p>
            <p>The second <kbd>runcpu</kbd> command includes both <kbd class="nb">--label=wall</kbd> and
            <kbd class="nbsnugr">--tune peak</kbd>.  The OPTIMIZE setting from lines 11-12 is used.</p>
            <p>The third also uses <kbd class="nb">--label=wall</kbd> <kbd class="nbsnugr">--tune peak</kbd>; and runs <kbd
               class="snugr">619.lbm_s</kbd>, which is an <kbd>fpspeed</kbd>
               benchmark.  The <kbd>OPTIMIZE</kbd> setting from lines 9-10 is used.</p>
      </td>
      <td style="border-top:none;">
<pre class="l2snugish">$ <b>cat -n precedence_example5.cfg </b>
  1  flagsurl             = $[top]/config/flags/gcc.xml
  2  iterations           = 1
  3  output_format        = text
  4  output_root          = /tmp/ptest
  5  size                 = test
  6  default:
  7     CC_VERSION_OPTION = -v
  8     CC                = gcc
  9  fpspeed:
 10     OPTIMIZE          = -O3
 11  default=peak:
 12     OPTIMIZE          = -O2
 13  default=default=wall:
 14     OPTIMIZE          = -O1
 15  default:
 16     OPTIMIZE          = -O0
$ <b>cat precedence_example5.sh </b>
runcpu --fake --config=precedence_example5 --label=wall 519.lbm          | grep lbm.c
runcpu --fake --config=precedence_example5 --label=wall -T peak  519.lbm | grep lbm.c
runcpu --fake --config=precedence_example5 --label=wall -T peak  619.lbm | grep lbm.c
$ <b>./precedence_example5.sh </b>
gcc -c -o lbm.o -DSPEC -DSPEC_CPU -DNDEBUG -DSPEC_AUTO_SUPPRESS_OPENMP  -O1    lbm.c
gcc -c -o lbm.o -DSPEC -DSPEC_CPU -DNDEBUG -DSPEC_AUTO_SUPPRESS_OPENMP  -O2    lbm.c
gcc -c -o lbm.o -DSPEC -DSPEC_CPU -DNDEBUG -DLARGE_WORKLOAD  -O3               lbm.c
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
      </td>
   </tr>
</table>

<table id="pex6" style="margin-top:2em;">
   <tr>
      <td class="pex">Precedence Example 6: Section order</td>
   </tr>
   <tr>
      <td style="border-top:none;"><p class="snug">For sections at differing precedence levels, order does not matter.</p>
         <p class="snug">These two config files use a different order but perform the same functions when runcpu applies them..</p>
         <pre class="l2snugish">$ <b>diff --side-by-side precedence_example6a.cfg precedence_example6b.cfg</b>
iterations           = 1                            iterations           = 1
output_format        = text                         output_format        = text
output_root          = /tmp/ptest                   output_root          = /tmp/ptest
runlist              = 519.lbm_r                    runlist              = 519.lbm_r
size                 = test                         size                 = test
default:                                            default:
   CC_VERSION_OPTION = -v                              CC_VERSION_OPTION = -v
   CC                = gcc                             CC                = gcc
519.lbm_r:                                        &lt;
   OPTIMIZE          = -O3                        &lt;
fprate:                                           &lt;
   OPTIMIZE          = -O1                        &lt;
default:                                            default:
   OPTIMIZE          = -O0                             OPTIMIZE          = -O0
                                                  &gt; fprate:
                                                  &gt;    OPTIMIZE          = -O1
                                                  &gt; 519.lbm_r:
                                                  &gt;    OPTIMIZE          = -O3
$ <b>cat precedence_example6.sh</b>
runcpu --fake --config=precedence_example6a | grep lbm.c
runcpu --fake --config=precedence_example6b | grep lbm.c
$ <b>chmod +x precedence_example6.sh</b>
$ <b>./precedence_example6.sh </b>
gcc -c -o lbm.o -DSPEC -DSPEC_CPU -DNDEBUG -DSPEC_AUTO_SUPPRESS_OPENMP  -O3  lbm.c
gcc -c -o lbm.o -DSPEC -DSPEC_CPU -DNDEBUG -DSPEC_AUTO_SUPPRESS_OPENMP  -O3  lbm.c
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
      </td>
   </tr>
</table>


<table id="pex7" style="margin-top:2em;">
   <tr>
      <td colspan="2" class="pex">Precedence Example 7: Repeated Sections</td>
   </tr>
   <tr>
      <td style="border-top:none;">
         <p>If a section occurs more than once, the settings are combined. If there are conflicts, the last instance wins.</p>
         <p class="snugbot">Recall that trailing <kbd>default</kbd> specifiers can be <a href="#omitspecs">dropped</a>.
         Therefore, these three section markers:</p>
         <pre class="l2snug"> 7  fpspeed:
12  fpspeed=default:
17  fpspeed=default=default:</pre>
         <p class="snugtop">actually name the same section, which is entered three times. </p>
         <p>The <kbd class="snugr">EXTRA_CFLAGS</kbd>,
         <kbd class="snugr">COPTIMIZE</kbd>, and <kbd>EXTRA_COPTIMIZE</kbd> settings (lines 8, 14, 19) are combined.</p>
         <p>The <kbd>OPTIMIZE</kbd> settings on lines 8, 13, and 18 conflict with each other.  Only the last one is retained.</p>
      </td>
      <td style="border-top:none;">
         <pre class="l2snugish">$ <b>cat -n precedence_example7.cfg</b>
  1  label                = wall
  2  runlist              = 619.lbm_s
  3  tune                 = peak
  4  default:
  5     CC_VERSION_OPTION = -v
  6     CC                = gcc
  7  fpspeed:
  8     OPTIMIZE          = -O1
  9     EXTRA_CFLAGS      = -finline-functions
 10  intrate:
 11     OPTIMIZE          = -O0
 12  fpspeed=default:
 13     OPTIMIZE          = -O2
 14     COPTIMIZE         = -ftree-vectorize
 15  intrate=peak:
 16     OPTIMIZE          = -O0
 17  fpspeed=default=default:
 18     OPTIMIZE          = -O3
 19     EXTRA_COPTIMIZE   = -Wall
$ <b>cat precedence_example7.sh </b>
runcpu --config=precedence_example7 --fake | grep lbm.c
$ <b>./precedence_example7.sh </b>
gcc -c -o lbm.o -DSPEC -DSPEC_CPU -DNDEBUG -DLARGE_WORKLOAD
    -O3 -ftree-vectorize  -finline-functions  -Wall   lbm.c
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
      </td>
   </tr>
</table>




<!-- .......................................................................................................................... -->
<h3 id="sectionI.F" style="margin-top:.7em;">        I.F.       Variables and Variable Substitution

   <span id="Variables"> </span>
   <span id="variables"> </span>

   <span id="Variable"> </span>
   <span id="variable"> </span>

   <span id="Substitution"> </span>
   <span id="substitution"> </span>

   <span id="Interpolation"> </span>
   <span id="interpolation"> </span>

   <span id="Variable-referencing"> </span>
   <span id="Variable.referencing"> </span>
   <span id="VariableReferencing"> </span>
   <span id="Variable_referencing"> </span>
   <span id="Variablereferencing"> </span>
   <span id="variable-referencing"> </span>
   <span id="variable.referencing"> </span>
   <span id="variableReferencing"> </span>
   <span id="variable_referencing"> </span>
   <span id="variablereferencing"> </span>

   <span id="Variable-references"> </span>
   <span id="Variable.references"> </span>
   <span id="VariableReferences"> </span>
   <span id="Variable_references"> </span>
   <span id="Variablereferences"> </span>
   <span id="variable-references"> </span>
   <span id="variable.references"> </span>
   <span id="variableReferences"> </span>
   <span id="variable_references"> </span>
   <span id="variablereferences"> </span>

   <span id="Variable-substitution"> </span>
   <span id="Variable.substitution"> </span>
   <span id="VariableSubstitution"> </span>
   <span id="Variable_substitution"> </span>
   <span id="Variablesubstitution"> </span>
   <span id="variable-substitution"> </span>
   <span id="variable.substitution"> </span>
   <span id="variableSubstitution"> </span>
   <span id="variable_substitution"> </span>
   <span id="variablesubstitution"> </span>

   <span id="Variable-interpolation"> </span>
   <span id="Variable.interpolation"> </span>
   <span id="VariableInterpolation"> </span>
   <span id="Variable_interpolation"> </span>
   <span id="Variableinterpolation"> </span>
   <span id="variable-interpolation"> </span>
   <span id="variable.interpolation"> </span>
   <span id="variableInterpolation"> </span>
   <span id="variable_interpolation"> </span>
   <span id="variableinterpolation"> </span>

</h3>

<table class="noborder" style="margin-bottom:2em;">
   <tr>
      <td style=" padding-right:1em;">
         <p class="snug">
         You can do variable substitution within a config file.
         <br />As described <a href="#consumer">above</a>, the contents of a config file are directed to various consumers.
         <br />Therefore, to use variable substitution, you need you to know which consumer does the substitution.
         <br />Differing syntax is used for each.</p>
      </td>
      <td style=" width:350px;vertical-align:middle; ">
         <div class="snugtop" style="background:#f0f0f0;border:thin solid gray;padding:3px 6px; ">
            <p class="hanging1snug" style="font-family:arial;">
            q. Wait a minute... all these choices for substitution?  Which do I want?
            </p>
            <p class="hanging1snug">
            a. Probably either the first in the list: <a href="#specmake">specmake</a>; or the last:
            the <a href="#preprocessor">preprocessor</a>.
            </p>
         </div>
      </td>
   </tr>
</table>
<table>
   <tr>
      <td><b>Format</b></td>
      <td><b>Example</b></td>
      <td><b>Description + consumer</b></td>
      <td><b>Traps for the unwary</b></td>
   </tr>

   <tr>
      <th>$(round)</th>
      <th>$(COMPILER_DIR)</th>
      <td><a href="#makevars">Make variables</a>, interpreted by <a href="#specmake">specmake</a></td>
      <td>&nbsp;</td>
   </tr>

   <tr>
      <th>\$SHELLVAR</th>
      <th>\$SPEC</th>
      <td><a href="#SHELLVAR">Shell</a> or command interpreter variables.</td>
      <td><a href="#quoting">Quoting</a></td>
   </tr>

   <tr>
      <th>$[square]</th>
      <th>$[top]/config</th>
      <td>Unchanging items, substituted by runcpu at <a href="#square">startup</a>.</td>
      <td style="vertical-align:middle;"> <a href="#curlytraps">Timing</a></td>
   </tr>

   <tr>
      <th>${curly}
         <br />$unbracketed</th>
      <th>${hw_avail}ish
         <br />$hw_avail</th>
      <td>Changeable items subject to <a href="#curly">perl interpolation</a>.
         <br /><kbd class="nb">$unbracketed</kbd> is allowed if it is not ambiguous.</td>
      <td style="vertical-align:middle;">
         Try not to confuse with <kbd class="nb">%{curly}</kbd>
      </td>
   </tr>

   <tr>
      <th style="white-space:nowrap;">%{ENV_var}</th>
      <th><kbd class="nb">%{ENV_LIBRARY_PATH}</kbd></th>
      <td><a href="#predefinedMacros">Predefined macros</a> for environment variables, handled by the <a href="#preprocessor">preprocessor</a>.</td>
      <td>&nbsp;</td>
   </tr>

   <tr>
      <th>%{curly}</th>
      <th>%{bits}</th>
      <td><a href="#macros">macros</a>, handled by the <a href="#preprocessor">preprocessor</a></td>
      <td><span class="nb">Try not to confuse with <kbd class="nb">${curly}</kbd> </span></td>
   </tr>



</table>


<!-- .......................................................................................................................... -->
<h4 id="sectionI.F.1">      I.F.1.     Defining variables
   <span id="Creating-variables"> </span>
   <span id="Creating.variables"> </span>
   <span id="CreatingVariables"> </span>
   <span id="Creating_variables"> </span>
   <span id="Creatingvariables"> </span>
   <span id="creating-variables"> </span>
   <span id="creating.variables"> </span>
   <span id="creatingVariables"> </span>
   <span id="creating_variables"> </span>
   <span id="creatingvariables"> </span>
   <span id="Defining-variables"> </span>
   <span id="Defining.variables"> </span>
   <span id="DefiningVariables"> </span>
   <span id="Defining_variables"> </span>
   <span id="Definingvariables"> </span>
   <span id="defining-variables"> </span>
   <span id="defining.variables"> </span>
   <span id="definingVariables"> </span>
   <span id="defining_variables"> </span>
   <span id="definingvariables"> </span>
   <span id="Define-variable"> </span>
   <span id="Define.variable"> </span>
   <span id="DefineVariable"> </span>
   <span id="Define_variable"> </span>
   <span id="Definevariable"> </span>
   <span id="define-variable"> </span>
   <span id="define.variable"> </span>
   <span id="defineVariable"> </span>
   <span id="define_variable"> </span>
   <span id="definevariable"> </span>
   <span id="Variable-definition"> </span>
   <span id="Variable.definition"> </span>
   <span id="VariableDefinition"> </span>
   <span id="Variable_definition"> </span>
   <span id="Variabledefinition"> </span>
   <span id="variable-definition"> </span>
   <span id="variable.definition"> </span>
   <span id="variableDefinition"> </span>
   <span id="variable_definition"> </span>
   <span id="variabledefinition"> </span>

   <span id="Runcpu-variable"> </span>
   <span id="Runcpu.variable"> </span>
   <span id="RuncpuVariable"> </span>
   <span id="Runcpu_variable"> </span>
   <span id="Runcpuvariable"> </span>
   <span id="runcpu-variable"> </span>
   <span id="runcpu.variable"> </span>
   <span id="runcpuVariable"> </span>
   <span id="runcpu_variable"> </span>
   <span id="runcpuvariable"> </span>

   <span id="Runcpu-variables"> </span>
   <span id="Runcpu.variables"> </span>
   <span id="RuncpuVariables"> </span>
   <span id="Runcpu_variables"> </span>
   <span id="Runcpuvariables"> </span>
   <span id="runcpu-variables"> </span>
   <span id="runcpu.variables"> </span>
   <span id="runcpuVariables"> </span>
   <span id="runcpu_variables"> </span>
   <span id="runcpuvariables"> </span>

</h4>


<p class="snug">You can create your own runcpu variables using a line of the form</p>
<pre class="l1snugish">name = value</pre>
<p class="snug">The name may contain only letters, digits, and underscores (a hyphen is NOT allowed).
<br />Start with a letter.
<br />You may indent your definitions if you wish (see: <a href="#whitespace">whitespace</a>)</p>
<p class="hanging2snugbot">Exception: preprocessor <a href="#macros">macros</a> are different on all of the above.  Hyphens are allowed, use </p>
<pre class="l3snug">%define name value</pre>
<p class="l2snug">and the <kbd>%</kbd> <a href="#punchColumn1">must</a> appear in column 1. You can indent after the <kbd>%</kbd> if you wish.</p>

<p class="snugbot"><b>Conventions:</b> Although not required, certain conventions are usually followed:</p>
<ol class="l1snugish">
   <li>lower case is typically used for <a href="#macros">macros</a>. When combining words, CamelCase may be useful.</li>
   <li>lower case is also typically used for runcpu variables, combining words with underscores</li>
   <li>CAPITALS are typically used when creating <a href="#makevars">make variables</a></li>
   <li>CAPITALS are also typically used for <a href="#shell">shell</a> or <a href="#envvars">environment variables</a>.</li>
</ol>
<p class="snugbot">Examples of the above (in the same order)</p>
<pre class="l1snugish">
%ifndef processorNumaControl
%   define processorNumaControl firstTouch # macro
%endif
default:
    my_submit_cmd       = numactl -C $BIND # runcpu variable
    MYTUNE              = -O2 --math=SIMD  # make variable
    ENV_LD_LIBRARY_PATH = /opt/lib         # environment variable

</pre>


<p>The remainder of this section I.F is about runcpu variables -- the $[square] and ${curly} rows from the table
at the <a href="#sectionI.F">top</a>.</p>

<!-- .......................................................................................................................... -->
<h4 id="sectionI.F.2">      I.F.2.     $[square] substitution at startup
   <span id="Square"> </span>
   <span id="square"> </span>

   <span id="Square-substitution"> </span>
   <span id="Square.substitution"> </span>
   <span id="SquareSubstitution"> </span>
   <span id="Square_substitution"> </span>
   <span id="Squaresubstitution"> </span>
   <span id="square-substitution"> </span>
   <span id="square.substitution"> </span>
   <span id="squareSubstitution"> </span>
   <span id="square_substitution"> </span>
   <span id="squaresubstitution"> </span>

   <span id="Square-interpolation"> </span>
   <span id="Square.interpolation"> </span>
   <span id="SquareInterpolation"> </span>
   <span id="Square_interpolation"> </span>
   <span id="Squareinterpolation"> </span>
   <span id="square-interpolation"> </span>
   <span id="square.interpolation"> </span>
   <span id="squareInterpolation"> </span>
   <span id="square_interpolation"> </span>
   <span id="squareinterpolation"> </span>

</h4>



<p>Immediately after <a href="#preprocessor">preprocessing</a>, variables that are delimited by <kbd class="nb">$[square
brackets]</kbd> are substituted.
<br />Any value set in the config file can be substituted, provided that is visible in the
current <a href="#scope">scope</a>.
<br />You can access the value of additional variables that you may have created.
<br />See the <a href="#squarelist">list</a> of useful variables below.
<br />Perhaps the most useful is <kbd class="snugr">$[top]</kbd> for the top of the SPEC CPU 2017 tree,
often found in contexts such as:</p>
<pre class="l2snugtop">
    flagsurl01          = $[top]/config/compiler.xml
    flagsurl02          = $[top]/config/platform.xml
    EXTRA_LIBS          = $[top]/mylibs
    preENV_LIBRARY_PATH = $[top]/lib64:$[top]/lib
</pre>

<p class="snugbot">
   <span id="Square-traps"> </span>
   <span id="Square.traps"> </span>
   <span id="SquareTraps"> </span>
   <span id="Square_traps"> </span>
   <span id="Squaretraps"> </span>
   <span id="square-traps"> </span>
   <span id="square.traps"> </span>
   <span id="squareTraps"> </span>
   <span id="square_traps"> </span>
   <span id="squaretraps"> </span>
   <span id="Square-trap"> </span>
   <span id="Square.trap"> </span>
   <span id="SquareTrap"> </span>
   <span id="Square_trap"> </span>
   <span id="Squaretrap"> </span>
   <span id="square-trap"> </span>
   <span id="square.trap"> </span>
   <span id="squareTrap"> </span>
   <span id="square_trap"> </span>
   <span id="squaretrap"> </span>

<span class="alarm">Traps for the unwary:</span> In some cases it may be obvious to the human which value to use, but the
tools aren't as smart as you.
</p>
<ol class="snug">
   <li><b>Timing:</b>
      You cannot substitute variables that do not exist, or whose values aren't known when the config file is first read.
      For example, the <a href="#label">label</a> is not sorted out until later.  Values that pertain to individual
      benchmarks (such as the current iteration number or the name of the benchmark being run) are not set until much later, when
      benchmarks are actually being run.</li>
   <li><b>Command line:</b>
      If a value is mentioned on both the runcpu command line and in the config file, the substitution might not do what you
      expect.  </li>
   <li><p class="snug"><b>output_root:</b>
      <br />You <i>cannot</i> set an <a href="#output_root">output_root</a> that depends on a runcpu variable.
      <br />You <i>can</i> set one that uses a <a href="#macros">macro:</a> </p>
      <pre class="l2snugish">output_root=$[top]/my/path      # <span class="alarm">wrong</span>
output_root=${top}/my/path      # <span class="alarm">wrong</span>
output_root=%{ENV_SPEC}/my/path # right</pre>
   </li>

</ol>

<p class="snugbot">Square substitution is done early. That comes in handy if you need a variable right away, for example, in
order to use it with <a href="#preenv">preENV</a>.</p>

<pre class="l2snugish">$ <b>cat EarlySub.cfg </b>
SW_DIR                 = /opt/path/to/compilers
preENV                 = 1
preENV_LD_LIBRARY_PATH = $[SW_DIR]/lib

$ <b>cat EarlySub.sh</b>
runcpu --config=EarlySub --fake 519.lbm_r | grep '^LD' | uniq
$ <b>./EarlySub.sh </b>
LD_LIBRARY_PATH=/opt/path/to/compilers/lib
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>


<p class="snugbot">The example below uses variables defined in several named sections.  The sections are
delimited by section markers <kbd class="nb">default:</kbd> (line 8), <kbd class="nb">default=base:</kbd>
(line 11), and <kbd class="nb">default=peak:</kbd> (line 15).</p>

<pre class="l1snugish">$ <b>cat -n square.cfg</b>
     1  expand_notes         = 1
     2  iterations           = 1
     3  output_format        = text
     4  output_root          = /tmp/square
     5  runlist              = 519.lbm_r
     6  size                 = test
     7  tune                 = base,peak
     8  default:
     9     CC                = gcc
    10     CC_VERSION_OPTION = -v
    11  default=base:
    12     the_system        = STAR
    13     OPTIMIZE          = -O1
    14     notes_base_100    = base tuning uses '$[CC]' '$[OPTIMIZE]' on system '$[the_system]'
    15  default=peak:
    16     OPTIMIZE          = -O2
    17     notes_peak_100    = peak tuning uses '$[CC]' '$[OPTIMIZE]' on system '$[the_system]'
    18
$ <b>cat square.sh </b>
runcpu --config=square | grep txt
grep tuning /tmp/square/result/CPU2017.001.fprate.test.txt
$ <b>./square.sh </b>
    format: Text -&gt; /tmp/square/result/CPU2017.001.fprate.test.txt
     base tuning uses 'gcc' '-O1' on system 'STAR'
     peak tuning uses 'gcc' '-O2' on system ''
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>

<p class="snugtop">Note that line 14 finds all three variables that it is looking for, but line 17 does not.  If it is not
clear why this happens, please see the descriptions of <a href="#namedSections">named sections</a> and <a
href="#precedence">precedence</a> above.</p>


<!-- .......................................................................................................................... -->
<h4 id="sectionI.F.3">      I.F.3.     Useful $[square] variables
   <span id="Square-variables"> </span>
   <span id="Square.variables"> </span>
   <span id="SquareVariables"> </span>
   <span id="Square_variables"> </span>
   <span id="Squarevariables"> </span>
   <span id="square-variables"> </span>
   <span id="square.variables"> </span>
   <span id="squareVariables"> </span>
   <span id="square_variables"> </span>
   <span id="squarevariables"> </span>

   <span id="Square-list"> </span>
   <span id="Square.list"> </span>
   <span id="SquareList"> </span>
   <span id="Square_list"> </span>
   <span id="Squarelist"> </span>
   <span id="square-list"> </span>
   <span id="square.list"> </span>
   <span id="squareList"> </span>
   <span id="square_list"> </span>
   <span id="squarelist"> </span>

   <span id="Useful-square"> </span>
   <span id="Useful.square"> </span>
   <span id="UsefulSquare"> </span>
   <span id="Useful_square"> </span>
   <span id="Usefulsquare"> </span>
   <span id="useful-square"> </span>
   <span id="useful.square"> </span>
   <span id="usefulSquare"> </span>
   <span id="useful_square"> </span>
   <span id="usefulsquare"> </span>

</h4>

<p class="snugbot">
<b>Useful $[variables]</b> include:</p>
<table class="l1snugtop">
   <tr>
      <th>$[configfile]</th>
      <td>Your config file name</td>
   </tr>
   <tr>
      <th>$[configpath]</th>
      <td>The full path to your config file</td>
   </tr>
   <tr>
      <th>$[dirprot]</th>
      <td>protection that is applied to directories created by runcpu</td>
   </tr>
   <tr>
      <th>$[endian]</th>
      <td><samp>4321</samp> or <samp>87654321</samp> for big endian; <samp>1234</samp> or <samp>12345678</samp> for little</td>
   </tr>
   <tr>
      <th>$[flag_url_base]</th>
      <td>directory where flags files are looked up</td>
   </tr>
   <tr>
      <th>$[OS]</th>
      <td>unix or windows</td>
   </tr>
   <tr>
      <th>$[os_exe_ext]</th>
      <td>exe for windows, nil elsewhere </td>
   </tr>
   <tr>
      <th>$[realuser]</th>
      <td>the user name according to the OS</td>
   </tr>
   <tr>
      <th>$[top]</th>
      <td>the top directory of your installed SPEC CPU 2017 tree</td>
   </tr>
   <tr>
      <th>$[username]</th>
      <td>the <a class="external" href="runcpu.html#username">username</a> for purposes of tagging run directories</td>
   </tr>
   <tr>
      <th>$[uid]</th>
      <td>the numeric user id</td>
   </tr>
</table>

<p class="snugbot">You can access the initial value of most options that you can enter into a config file, including: </p>
<div class="l1snug">
<kbd> action, allow_label_override,
   backup_config, basepeak, check_version, command_add_redirect, copies, delay, deletework, difflines, env_vars,
   expand_notes, expid, fake, feedback, flagsurl, http_proxy, http_timeout, ignore_errors, ignore_sigint, info_wrap_columns,
   iterations, label, line_width, locking, log_line_width, mail_reports, mailcompress, mailmethod, mailport, mailserver,
   mailto, make, make_no_clobber, makeflags, mean_anyway, minimize_builddirs, minimize_rundirs, no_input_handler, no_monitor,
   notes_wrap_columns, notes_wrap_indent, output_format, output_root, plain_train, rawformat, rebuild, reportable, runlist,
   section_specifier_fatal, setprocgroup, size, strict_rundir_verify, sysinfo_program, table, teeout,
   train_single_thread, tune, use_submit_for_compare, use_submit_for_speed, username, verbose, verify_binaries.</kbd></div>





<!-- .......................................................................................................................... -->
<h4 id="sectionI.F.4">      I.F.4.     ${curly} substitution (interpolation) during a run
   <span style="margin-left:3em;font-size:80%;">
      <br />+ $unbracketed substitution </span>
   <span id="Curly"> </span>
   <span id="curly"> </span>

   <span id="Curly-substitution"> </span>
   <span id="Curly.substitution"> </span>
   <span id="CurlySubstitution"> </span>
   <span id="Curly_substitution"> </span>
   <span id="Curlysubstitution"> </span>
   <span id="curly-substitution"> </span>
   <span id="curly.substitution"> </span>
   <span id="curlySubstitution"> </span>
   <span id="curly_substitution"> </span>
   <span id="curlysubstitution"> </span>

   <span id="Curly-interpolation"> </span>
   <span id="Curly.interpolation"> </span>
   <span id="CurlyInterpolation"> </span>
   <span id="Curly_interpolation"> </span>
   <span id="Curlyinterpolation"> </span>
   <span id="curly-interpolation"> </span>
   <span id="curly.interpolation"> </span>
   <span id="curlyInterpolation"> </span>
   <span id="curly_interpolation"> </span>
   <span id="curlyinterpolation"> </span>

</h4>




<table class="noborder" style="margin-bottom:.1em;">
   <tr>
      <td>During a run, variables that are delimited by <kbd>${curly brackets}</kbd> are substituted:</td>
      <td> <kbd>${command}</kbd></td>
   </tr>
   <tr>
      <td>Usually, variables can be spelled with or without the curlies: </td>
      <td><kbd>$command</kbd> or <kbd>${command}</kbd></td>
   </tr>
   <tr>
      <td><span class="l1">Exception 1: curlies are <i>required</i> if the variable is adjacent to other text</span></td>
      <td><kbd>${command}s</kbd></td>
   </tr>
   <tr>
      <td><span class="l1">Exception 2: curlies are <i>not allowed</i> for:</span></td>
      <td><kbd>$BIND</kbd> and <kbd>$SPECCOPYNUM</kbd></td>
   </tr>
</table>

<p class="snugtop">Runcpu uses perl interpolation.
<br />Only scalars (not: perl arrays and hashes) can be interpolated. </p>


<p class="l1snugbot">Example: on the <kbd>notes100</kbd> line, you could optionally add say either <kbd>${lognum}</kbd> or <kbd
   class="snugr">$lognum</kbd>, but don't try taking the curly brackets away from <kbd class="snugr">${size}</kbd>.</p>


<pre class="l2snugish">$ <b>cat just.cfg </b>
expand_notes      = 1
notes100          = Just ${size}ing, in run $lognum
output_root       = /tmp/just
runlist           = 505.mcf_r
size              = test
CC                = gcc
CC_VERSION_OPTION = -v
$
$ <b>cat just.sh</b>
runcpu -c just | grep txt
grep Just /tmp/just/result/CPU2017.001.intrate.test.txt
$
$ <b>./just.sh </b>
    format: Text -&gt; /tmp/just/result/CPU2017.001.intrate.test.txt
     Just testing, in run 001
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>


<p class="snugbot">
   <span id="Curly-trap"> </span>
   <span id="Curly.trap"> </span>
   <span id="CurlyTrap"> </span>
   <span id="Curly_trap"> </span>
   <span id="Curlytrap"> </span>
   <span id="curly-trap"> </span>
   <span id="curly.trap"> </span>
   <span id="curlyTrap"> </span>
   <span id="curly_trap"> </span>
   <span id="curlytrap"> </span>
   <span id="Curly-traps"> </span>
   <span id="Curly.traps"> </span>
   <span id="CurlyTraps"> </span>
   <span id="Curly_traps"> </span>
   <span id="Curlytraps"> </span>
   <span id="curly-traps"> </span>
   <span id="curly.traps"> </span>
   <span id="curlyTraps"> </span>
   <span id="curly_traps"> </span>
   <span id="curlytraps"> </span>

<span class="alarm">Traps for the unwary</span>
</p>
<ol class="snug">
   <li>Try not to confuse <kbd>${curly}</kbd> interpolation vs. <kbd>%{curly}</kbd> (<a href="#macros">macros</a>)</li>
   <li><p class="snugish"><b>Timing:</b> Some variables are only defined at certain times, and a line that uses it might be
      interpolated at a different time.  Therefore interpolation won't always do what you might wish.  In particular, <a
          href="#notes">notes</a> are not expanded in the context of a particular benchmark run, and therefore variables such
       as <kbd>${tune}</kbd> are not useful within them. </p>
   </li>
   <li><p class="snug"><b>output_root:</b>
      <br />You <i>cannot</i> set an <a href="#output_root">output_root</a> that depends on a runcpu variable.
      <br />You <i>can</i> set one that uses a <a href="#macros">macro:</a> </p>
      <pre class="l2snugish">output_root=$[top]/my/path      # <span class="alarm">wrong</span>
output_root=${top}/my/path      # <span class="alarm">wrong</span>
output_root=%{ENV_SPEC}/my/path # right</pre>
   </li>
</ol>


<!-- .......................................................................................................................... -->
<h4 id="sectionI.F.5">      I.F.5.     Useful ${curly} variables
   <span id="Curly-variables"> </span>
   <span id="Curly.variables"> </span>
   <span id="CurlyVariables"> </span>
   <span id="Curly_variables"> </span>
   <span id="Curlyvariables"> </span>
   <span id="curly-variables"> </span>
   <span id="curly.variables"> </span>
   <span id="curlyVariables"> </span>
   <span id="curly_variables"> </span>
   <span id="curlyvariables"> </span>

   <span id="Curly-list"> </span>
   <span id="Curly.list"> </span>
   <span id="CurlyList"> </span>
   <span id="Curly_list"> </span>
   <span id="Curlylist"> </span>
   <span id="curly-list"> </span>
   <span id="curly.list"> </span>
   <span id="curlyList"> </span>
   <span id="curly_list"> </span>
   <span id="curlylist"> </span>

   <span id="Useful-curly"> </span>
   <span id="Useful.curly"> </span>
   <span id="UsefulCurly"> </span>
   <span id="Useful_curly"> </span>
   <span id="Usefulcurly"> </span>
   <span id="useful-curly"> </span>
   <span id="useful.curly"> </span>
   <span id="usefulCurly"> </span>
   <span id="useful_curly"> </span>
   <span id="usefulcurly"> </span>

</h4>

<p class="snugbot">These variables may be of interest:</p>
<table class="l1snugtop">
   <tr>
      <th>${baseexe}</th>
      <td>The first part of the executable name, which is <kbd class="nbsnugr">&lt;baseexe&gt;_&lt;tune&gt;.&lt;label&gt;</kbd>.
         For example, in "<kbd class="nbsnuglr">lbm_r_base.foo</kbd>", <kbd class="nb">baseexe</kbd> is "<kbd
            class="nbsnuglr">lbm_r</kbd>".</td>
   </tr>

   <tr>
      <th>${benchmark}</th>
      <td>The number and name of the benchmark currently being run, for example <kbd>519.lbm_r</kbd></td>
   </tr>
   <tr>
      <th>${benchname}</th>
      <td>The name of the benchmark currently being run, for example <kbd>lbm_r</kbd></td>
   </tr>
   <tr>
      <th>${benchnum}</th>
      <td>The number of the benchmark currently being run, for example <kbd>519</kbd></td>
   </tr>
   <tr>
      <th>${benchtop}</th>
      <td>The top directory for the benchmark currently being run, for example
         <kbd>/spec/cpu2017/benchspec/CPU/519.lbm_r</kbd></td>
   </tr>
   <tr>
      <th id="BIND">$BIND</th>
      <td>A value from your <a href="#bind">bind</a> list, typically a numeric identifier for a processor on your system.
         This variable is actually interpreted by <a class="external" href="utility.html#specinvoke">specinvoke</a>, and
         cannot be spelled with braces.  Say <kbd class="snugr">$BIND</kbd>, do not say <kbd class="snugr">${BIND}</kbd>.</td>
   </tr>
   <tr>
      <th id="command">${command}</th>
      <td>The shell command line to run the current benchmark, for example
         <kbd class="nb">../run_base_test_sticky.0000/lbm_r_base.sticky 20 reference.dat 0 1 100_100_130_cf_a.of</kbd>
      </td>
   </tr>
   <tr>
      <th>${commandexe}</th>
      <td>The executable for the current command, for example <kbd class="nb"> ../run_base_test_none.0000/lbm_r_base.sticky</kbd></td>
   </tr>
   <tr>
      <th>${label}</th>
      <td>The label for the benchmark being run</td>
   </tr>
   <tr>
      <th>${iter}</th>
      <td>The current iteration number</td>
   </tr>
   <tr>
      <th>${logname}</th>
      <td>The complete log file name, for example <kbd class="nb">/spec/cpu2017/result/CPU2017.168.log</kbd></td>
   </tr>
   <tr>
      <th>${lognum}</th>
      <td>The log file number, for example <kbd>168</kbd></td>
   </tr>
   <tr>
      <th id="SPECCOPYNUM">$SPECCOPYNUM</th>
      <td>The current copy number, when running a SPECrate run.  This variable is actually interpreted by <a class="external"
          href="utility.html#specinvoke">specinvoke</a>, and cannot be spelled with braces.  Say <kbd class="snugr">$SPECCOPYNUM</kbd>, do not say
          <kbd class="snugr">${SPECCOPYNUM}</kbd>.  The first copy is 0 (zero).</td>
   </tr>
   <tr>
      <th id="SPECUSERNUM" style="text-decoration:line-through;">SPECUSERNUM</th>
      <td><span class="alarm">Do not use.</span>  This is the older, obsolete, CPU 2000 spelling for what is now called
         SPECCOPYNUM.  If you use it, it will be silently ignored - <span class="caution">no warning is printed</span>.  </td>
   </tr>
   <tr>
      <th>${tune}</th>
      <td>The tuning for the benchmark being run (<kbd class="snugl">base</kbd> or <kbd class="snugr">peak</kbd>)</td>
   </tr>
   <tr>
      <th>${workload}</th>
      <td>The current workload number (within the iteration)</td>
   </tr>
</table>


<p class="snugbot">For a complete list of the available variables relative to the current config file, set </p>
<pre class="l2snug">expand_notes = 1
verbose      = 35 # or higher</pre>
<p class="snug">Then, do a run that causes a command substitution to happen.
<br />In the log, you will find many lines of the
form:</p>
<pre class="l1snug">
 - Variables available for interpolation that have changed since the last list:
    (From config) $runmode = "rate"
    (From config) $size = "test"
 - Variables available for interpolation that have changed since the last list:
    (From config) $size = "train"
</pre>




<!-- .......................................................................................................................... -->
<h4 id="sectionI.F.6">      I.F.6.     Unsetting a variable with "%undef%"
</h4>



<p class="snugbot">It is sometimes useful to undo the setting of a variable that would otherwise be included from another
section.  This can be accomplished using the special value <kbd class="snugr">%undef%</kbd>.  In the example, line 14
undefines <kbd>COPTIMIZE</kbd> when compiling peak:</p>

<pre class="l2snug"> $ <b>cat -n gnana.cfg </b>
 1  flagsurl             = $[top]/config/flags/gcc.xml
 2  iterations           = 1
 3  output_format        = text
 4  output_root          = /tmp/undef
 5  runlist              = 519.lbm_r
 6  size                 = test
 7  tune                 = base,peak
 8  default:
 9     CC_VERSION_OPTION = -v
10     CC                = gcc
11     OPTIMIZE          = -O2
12     COPTIMIZE         = -fno-tree-pre
13  519.lbm_r=peak:
14     COPTIMIZE         = %undef%
15
$ <b>runcpu --config=gnana | grep txt</b>
    format: Text -&gt; /tmp/undef/result/CPU2017.001.fprate.test.txt
$ <b>cd /tmp/undef/benchspec/CPU/519.lbm_r/build</b>
$ <b>grep OPTIMIZE build_base_none.0000/Makefile.spec </b>
COPTIMIZE        = -fno-tree-pre
OPTIMIZE         = -O2
$ <b>grep OPTIMIZE build_peak_none.0000/Makefile.spec </b>
COPTIMIZE        =
OPTIMIZE         = -O2
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a>   </pre>
<p class="snugtop">Notice that in the build directory, <kbd>COPTIMIZE</kbd> is present for <kbd>base</kbd> and absent for
<kbd class="snugr">peak</kbd>.</p>


<!-- .......................................................................................................................... -->
<h4 id="sectionI.F.7">      I.F.7.     Debug tips for runcpu variables
   <span id="Variable-debug-tips"> </span>
   <span id="Variable.debug.tips"> </span>
   <span id="VariableDebugTips"> </span>
   <span id="Variable_debug_tips"> </span>
   <span id="Variabledebugtips"> </span>
   <span id="variable-debug-tips"> </span>
   <span id="variable.debug.tips"> </span>
   <span id="variableDebugTips"> </span>
   <span id="variable_debug_tips"> </span>
   <span id="variabledebugtips"> </span>
</h4>

<p class="l1snugish">When debugging a config file that uses runcpu variables, try:</p>
<pre class="l2snugish">iterations       = 1
minimize_rundirs = 0
reportable       = 0
runlist          = (one or two benchmarks)
size             = test
verbose          = 40</pre>
<p class="l1snugish">Using <a class="external" href="runcpu.html#fake">--fake</a> will probably be informative.  Look inside
the log for the (case-sensitive) word '<kbd class="nbsnuglr">From</kbd>'.  </p>



<!-- .......................................................................................................................... -->
<h2 id="sectionII">         II.        Config file options for runcpu
   <span id="runcpu"> </span>
</h2>



<p>This section documents options that control the operation of runcpu itself.</p>


<!-- .......................................................................................................................... -->
<h3 id="sectionII.A">       II.A.      Precedence: config file vs. runcpu command line
   <span id="runcpuVSconfig"> </span>
   <span id="RuncpuVsConfig"> </span>
   <span id="runcpu-vs-config"> </span>
   <span id="runcpu.vs.config"> </span>
   <span id="runcpuVsConfig"> </span>
   <span id="runcpu_vs_config"> </span>
   <span id="runcpuvsconfig"> </span>
</h3>



<p>In the list that follows, some items are <a class="external" href="runcpu.html#options">linked</a> to the document
<i>Using SPEC CPU 2017 - the 'runcpu' Command</i> because they can be specified either in a config file, or on the
<kbd>runcpu</kbd> command line. </p>

<p>
<span class="new">New with CPU 2017,</span>
If an option is specified in both places, the command line wins.</p>

<!-- .......................................................................................................................... -->
<h3 id="sectionII.B">       II.B.      Options
</h3>



<p>In the table that follows, if an option is documented as accepting the values "no" and "yes", these may also be specified
as "false" and "true", or as "0" and "1".</p>

<p class="snugbot">The "Use In" column indicates where the option can be used:</p>

<table style="border-style:none; padding:2px 2em 1em">
<tr>
   <td style="border-style:none;"><kbd>H</kbd></td>
   <td style="border-style:none;">use only in <a href="#headerSection">header section</a></td>
</tr>
<tr>
   <td style="border-style:none;"><kbd>N</kbd></td>
   <td style="border-style:none;">use in a <a href="#namedSections">named section</a>.</td>
</tr>
<tr>
   <td style="border-style:none;"><kbd>H,N</kbd></td>
   <td style="border-style:none;"> can be used in both the <a href="#headerSection">header section</a> and in <a
   href="#namedSections">named sections</a>.  The item can therefore be applied on a global basis, and/or can be applied to
   individual benchmarks.</td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table>
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<!--
<tr>
   <td id="absolutely_no_locking" > <kbd>absolutely_no_locking</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>0</kbd></td>
   <td>Do not try to lock <strong>any</strong> files.  Use of this option practically ensures that multiple concurrent runs
   in the ame installation, even by the same user, will get mixed or no output.  It is just barely possible that this option
   might be useful in obscure support circumstances but is NOT normally expected to be used.</td>
</tr>
-->

<tr>
   <td id="action"><a class="external" href="runcpu.html#action"><kbd>action</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>validate</kbd></td>
   <td>What to do.  The available actions are defined in the <a href="runcpu.html#actions" class="external">runcpu</a>
      document.  See also the <a href="#buildsetup">buildsetup</a> example in the section on <code class="snugr">specmake</code>.  </td>
</tr>

<tr>
   <td id="allow_label_override" > <kbd>allow_label_override</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td><p class="snugtop">The <kbd>runcpu</kbd> command can use <kbd class="nb">--label</kbd> to select sections that
      apply to a specific <a href="#label">label</a>.  If the label mentioned on the <kbd>runcpu</kbd> command does not occur
      in any section marker:</p>

      <ul>
         <li>If <kbd>allow_label_override</kbd> is <kbd>no</kbd> (or <kbd>0</kbd> or <kbd class="snugr">false</kbd>), the tools will print
            an error message and exit.</li>
         <li>If <kbd>allow_label_override</kbd> is <kbd>yes</kbd> (or <kbd>1</kbd> or <kbd class="snugr">true</kbd>), then the tools will
            attempt to build (or run) the same binary they would have built by default, but will name the binary with
            specified label.  </li>
      </ul>
      <span class="new">This option was known as <kbd>allow_extension_override</kbd> prior to CPU 2017.</span>

   </td>
</tr>

<tr>
   <td id="backup_config" > <kbd>backup_config</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>yes</kbd></td>
   <td>When updating the hashes in the config file, make a backup copy first.  Highly recommended to defend against
   full-file-system errors, system crashes, or other unfortunate events.</td>

</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="basepeak" > <a class="external" href="runcpu.html#basepeak"><kbd>basepeak</kbd></a> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>no</kbd></td>
   <td><p class="snugtop">Roughly: Report base results for peak.  The more precise meaning depends on context:</p>
      <div class="l1">
         <p class="snugbot">Config file <a href="#HeaderSection">header section</a>:</p> 
         <ul class="snugtop">
            <li>If both base and peak tuning are requested, <span class="u">run only base</span>. Report the results as both base
            and peak.</li>
            <li>If only peak tuning is requested, run the base binary, and report its results for peak.</li>
         </ul>
         <p class="snugbot">Any other config file section:</p> 
         <ul class="snugtop">
            <li>If both base and peak tuning are requested, <span class="u">run the base binary both times</span>.  Report the base
               results for both.  (The reason for running the binary during both base and peak is to remove the possibility
               that skipping a benchmark might somehow change the performance of some other benchmark.)</li>
            <li>If only peak tuning is requested, run the base binary, and report its results for peak.</li>
         </ul>
         <p class="snugbot">The <a class="external" href="utility.html#rawformat">rawformat</a> option 
            <a class="external" href="runcpu.html#basepeak">--basepeak </a>:</p>
         <p class="l1snugtop">Copy base results to peak. </p> 
      </div>

      <p>Sample usage scenarios:</p>
      <div class="l1snug">

         <p class="hanging1snugbot">Problem: Ryan wants to leave early today.  At noon, his manager tells him that he can go home
         after he produces reportable base and peak metrics for a system.  Similar systems need about 6 hours to run 3x
            base and 3x peak <a href="#iterations">iterations</a>. Although Ryan&nbsp;borders on screaming, he quietly
            agrees to the task.</p> 
         <p class="snug">Solution: </p>
         <ul class="snug">
            <li>He reduces the iterations to 2 (which is 
               <a class="external" href="runrules.html#MedianOrLowerOfTwo">allowed for CPU 2017</a>).</li>
            <li>He sets <kbd>basepeak = yes</kbd> in the header section.</li>
            <li>He leaves work shortly after 2 PM.  It is summertime and the sun is shining as he waves goodbye.</li>
         </ul>
         <p class="snugtop"><span class="alarm">Warning:</span> this works <span class="u">only</span> if the basepeak option is
         placed in the <a href="#HeaderSection">header section</a>. Put it anywhere else, spend more time indoors.</p>

         <p class="hanging1snugbot">Problem: Ryan has developed peak tuning for all but one benchmark, where the base tuning
         is "good enough, but noisy" -- it is subject to <span class="ttnobr">+/- 2%</span> run-to-run variation, and he is
         tired of answering questions about it.  </p>
         <p class="snug">Solution: Ryan sets</p>
         <pre class="snug">997.noisy=peak:
basepeak=yes</pre>
         <p class="snugtop">Identical results are reported for both base and peak and no questions are asked about <span
            class="ttnobr">997.noisy</span>.</p>

         <p class="snugbot">Problem: Ryan did a big reportable run and notices afterwards that base was actually better than
         peak.   
         <br />Solution: He uses <a class="external" href="utility.html#rawformat">rawformat</a> 
         <a class="external" href="runcpu.html#basepeak">--basepeak</a> and reports the base results as peak.</p>

      </div>

   </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>


<tr>
   <td id="bind" > <kbd>bind</kbd> <br /><i>without<br />trailing<br />digits</i> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>''</kbd></td>
   <td>

      <p class="snug">List of values to substitute for <a href="#BIND">$BIND</a> in a <a href="#submit">submit</a>
      command.  This can be a simple comma (or white-space) separated list, such as:</p>

      <pre class="l1snugish"> bind = 0,1,2,3,4,5,6,7, 16,17,18,19,20,21,22,23     </pre>

      <p class="snug">If your line is too long, don't try to continue it by adding a numeral to 'bind'; that has a different
      meaning, as described in the <a href="#bindN">next</a> section.  Instead, you can continue it either by putting a
      backslash at the end of lines, or by using a <a href="#hereDocument">here document</a>.  The above single line could
      equally well be expressed as:</p>

      <pre class="l1snugish">bind = &lt;&lt;EOT
0,   1,   2,   3,   4,   5,   6,   7,
16, 17,  18,  19,  20,  21,  22,  23
EOT </pre>

      <p class="snug">The trailing comma after the "7" is both optional and harmless.   It can be present or
      not, as you wish; in either case, the sequence of values for this example will include
      <kbd class="nb">...5, 6, 7, 16, 17, 18...</kbd></p>

   </td>
</tr>

<tr>
   <th id="bindN" > bind<i>n</i><br />(<i>n</i>=<br />digits)</th>
   <td><kbd>H,N</kbd></td>
   <td><kbd>''</kbd></td>
   <td>
      <p class="snug">List of strings to substitute for <a href="#BIND">$BIND</a> in a <a href="#submit">submit</a> command.
      Put each string on a new line, increasing the index <i>n</i>.  Like <a href="#notes">notes</a>, the values of the
      indices are not important and are used for ordering only.  If there are more copies than bind values, they will be
      re-used in a circular fashion.  If there are more bind values specified than copies, then only as many as needed will
      be used.
      <br />Example:</p>
      <pre class="l1snugish">$ <b>cat bindN.cfg </b>
copies      = 4
iterations  = 1
output_root = /tmp/submit
runlist     = 541.leela_r
size        = test
intrate:
   bind0    = assign_job cpu_id=11
   bind1    = assign_job cpu_id=13
   bind2    = assign_job cpu_id=17
   bind3    = assign_job cpu_id=19
   submit   = $BIND ${command}
$ <b>runcpu --fake --config=bindN | grep '^assign' | cut -b 1-70</b>
assign_job cpu_id=11 ../run_base_test_none.0000/leela_r_base.none test
assign_job cpu_id=13 ../run_base_test_none.0000/leela_r_base.none test
assign_job cpu_id=17 ../run_base_test_none.0000/leela_r_base.none test
assign_job cpu_id=19 ../run_base_test_none.0000/leela_r_base.none test
$<a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a>    </pre>
   </td>

</tr>

<!-- Insert this every now and then to keep headers in view
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>
-->

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="check_version" > <a class="external" href="runcpu.html#check_version"><kbd>check_version</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no (yes for<br />reportable<br />runs)</kbd></td>
   <td><p class="snugtop">When set, before doing a <a href="#reportable">reportable</a> run, runcpu will download information
   about available updates from www.spec.org.  In this way, you can be notified if the version of the suite that you're using is
   out-of-date.  </p>

   <p>Setting this variable to <kbd>no</kbd> will disable this check.</p>

   <p class="snugbot">If you would like to check your version for a NON-reportable run, you will need to add <kbd
      class="nb">--check_version</kbd> to your command line.  Setting <kbd class="nb">check_version=yes</kbd> in the config
   file only causes the check for reportable runs.  </p></td>
</tr>


<tr>
   <td id="command_add_redirect" > <kbd>command_add_redirect</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td><p class="snugtop">If set, the generated <a href="#command">${command}</a> will include redirection operators (stdout,
      stderr), which are passed along to the shell that executes the command.  If this variable is not set,
      <a class="external" href="utility.html#specinvoke">specinvoke</a> does the redirection.  This option is commonly used
      with <a href="#fdo_run">fdo_run</a> or <a href="#submit">submit</a>.  See <a href="#nose">Tip #3</a> under
      FDO&nbsp;Example&nbsp;5.  </p>

      <p class="snugbot">When used with <kbd class="snugr">submit</kbd>, the <kbd>command_add_redirect</kbd> feature lets you choose whether
      redirection operators (such as <kbd>&lt;this_benchmark.in</kbd> or <kbd class="snugr">&gt;that_benchmark.out</kbd>) are
      applied to your entire modified <kbd>submit</kbd> command (the default) or just to the portion that has <kbd
         class="snugr">${command}</kbd>.
      <br />In pseudo-code: </p>
      <table style="margin-left:3em;" class="noborder">
         <tr>
            <td colspan="2">A <a href="#bind">bind</a> list has processor numbers <i>n</i>; a benchmark runs
               <i>exe</i>; it sends output to <i>out</i>.  </td>
         </tr>
         <tr>
            <td>If you use:</td>
            <td><pre class="snug">submit = send_job job="${command}" cpu_id=$BIND</pre></td>
         </tr>
         <tr>
            <td style="text-align:right;" >&nbsp;&nbsp;&nbsp;Do you prefer this? </td>
            <td><pre class="snug">         send_job job="<i>exe</i> &gt;<i>out</i>" cpu_id=<i>n</i></pre></td>
         </tr>
         <tr>
            <td style="text-align:right;">Or this?</td>
            <td><pre class="snug">         send_job job="<i>exe</i>" cpu_id=<i>n</i> &gt;<i>out</i></pre></td>
         </tr>
      </table>
      <p class="snug">The above is only pseudo-code; see the section on <a href="#usingSubmit">Using Submit</a>
      for real examples.</p>
   </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="copies" > <a class="external" href="runcpu.html#copies"><kbd>copies</kbd></a> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>1</kbd></td>
   <td> <p class="snugtop">Number of copies.  For base, the number of copies must be the same for all benchmarks, but for
   peak it is allowed to vary: for example, you could decide to run 64 copies of all benchmarks except
   <kbd class="snugr">519.lbm_r</kbd>, which would run only 63.</p>

   <p class="snugbot">Note: If you select <a
   href="#basepeak">basepeak=yes</a> for a SPECrate benchmark, the number of copies in peak will be forced to be the same as in
   base.</p>
   </td>
</tr>

<tr>
   <td id="current_range" > <kbd>current_range</kbd>
   </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>none</kbd></td>
   <td><p class="snugtop">Set the maximum current in amps that is expected to be used during the run.  If you are unsure how
      to determine this, see the <a href="#InitialCurrentRange">suggestions</a> in the section on 
      <a href="#PowerMeasurement">Power Measurement</a>.  </p>

      <p>The <samp>current_range</samp> can be used to control the settings across all benchmarks by putting it in the 
         <a href="#HeaderSection">header section</a>, or on a per benchmark level by putting it in a 
         <a href="#NamedSection">named section</a>.  The <a href="runrules.html#current_range" class="external">run rules</a>
         allow setting the current range to different values for each benchmark, even in base.  
      </p>
      <p>For example, the following is allowed. Notice that the integer rate benchmark 557.xz_r uses a different
      <samp>current_range</samp> than the other integer rate benchmarks.</p>
      <pre class="l1">intrate=base:
   current_range = 3
557.xz_r=base:
   current_range = 4
intrate=peak:
   current_range = 5
557.xz_r=peak:
   current_range = 6</pre>

      <p>
      <span id="Auto-ranging"> </span>      <span id="Auto-range"> </span>
      <span id="Auto.ranging"> </span>       <span id="Auto.range"> </span>
      <span id="AutoRanging"> </span>        <span id="AutoRange"> </span>
      <span id="Auto_ranging"> </span>       <span id="Auto_range"> </span>
      <span id="Autoranging"> </span>        <span id="Autorange"> </span>
      <span id="auto-ranging"> </span>       <span id="auto-range"> </span>
      <span id="auto.ranging"> </span>       <span id="auto.range"> </span>
      <span id="autoRanging"> </span>        <span id="autoRange"> </span>
      <span id="auto_ranging"> </span>       <span id="auto_range"> </span>
      <span id="autoranging"> </span>        <span id="autorange"> </span>

      <b>Auto-ranging:</b> You may specify auto-ranging with the word "auto".  <span class="alarm">Warning:</span>
      auto-ranging is allowed only if it is not possible to set a specific range, and must be justified.  If you plan to use
      your results in public, preserve rawfiles that demonstrate the failure.  See the discussion at <a class="external"
      href="runrules.html#autoranging">runrules.html#autoranging</a>.</p>

      <p class="snugbot">See also the <a href="#CurrentRanges">discussion</a> of current ranges
      in the section on <a href="#PowerMeasurement">Power Measurement</a>.  </p>

   </td>
</tr>

<tr>
   <td id="delay" ><a class="external" href="runcpu.html#delay"> <kbd>delay</kbd></a> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>0</kbd></td>
   <td>Insert a delay of the specified number of seconds before and after benchmark execution.  This delay does not
   contribute to the measured runtime of the benchmark.  This delay is also not available in a reportable run.</td>
</tr>

<tr>
   <td id="deletework" ><a class="external" href="runcpu.html#deletework"> <kbd>deletework</kbd></a> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>no</kbd></td>
   <td>If set to <kbd class="snugr">yes</kbd>, always delete existing benchmark working directories.  An extra-careful person
      might want to set this to ensure no unwanted leftovers from previous benchmark runs, but the tools are already trying
      to enforce that property.</td>
</tr>

<tr>
   <td id="difflines" > <kbd>difflines</kbd> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>10</kbd></td>
   <td>Number of lines of differences to print when comparing results.</td>
</tr>

<tr>
   <td id="enable_monitor" > <kbd>enable_monitor</kbd> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>yes</kbd></td>
   <td><p class="snug">If this variable is set to <kbd class="snugr">no</kbd>, then all of the
      <a class="external" href="monitors.html">monitoring hooks</a> are disabled.  This can be overridden by setting
      <a href="#force_monitor">force_monitor</a>.
      <span class="new"><kbd>force_monitor</kbd> is new with CPU 2017</span>
      </p></td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr id="envvars">
   <td id="env_vars" rowspan="2" > <kbd>env_vars</kbd><br /><i>or</i><br />envvars </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>no</kbd></td>
   <td><p class="snugtop">If set to <kbd class="snugr">yes</kbd>, environment settings can be changed using <kbd
         class="nb">ENV_*</kbd> options in the config file.  <span class="caution">Note that you cannot change
         OMP_NUM_THREADS</span> using this feature.  Use <a href="#threads">threads</a>. </p>
   </td>
</tr>
   <tr>
      <td colspan="3">
         <p class="snug"><b>Example:</b>  Consider the config file below, which creates a binary with the requested <a
            href="#label">label</a>:</p>
      <pre class="snugish">
$ <b>cat PerformabilityQOS.cfg</b>
runlist     = 520.omnetpp_r
iterations  = 1
size        = test
tune        = peak
label       = srini
520.omnetpp_r=peak:
   CXX                 = g++
   CXX_VERSION_OPTION  = -v
   OPTIMIZE            = -O1
$ <b>date</b>
Mon Oct  3 17:49:46 PDT 2016
$ <b>runcpu -c PerformabilityQOS | grep -i -e error: -e success</b>
Build successes for intrate: 520.omnetpp_r(peak)
Success: 1x520.omnetpp_r
$ <b>go 520.omnet exe</b>
/export/home/rc2/benchspec/CPU/520.omnetpp_r/exe
$ <b>ls -g | cut -b 27-88</b>
 Oct  3 17:52 omnetpp_r_peak.srini
$<a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a>    </pre>
      <p class="snug">The binary just above depends on certain libraries.  What if they aren't available, or have been moved?</p>
      <pre>
$ <b>ldd omnetpp_r_peak.srini</b>
... version `GLIBCXX_3.4.20' not found (required by ./omnetpp_r_peak.srini)
... version `CXXABI_1.3.8' not found (required by ./omnetpp_r_peak.srini) </pre>
      <p class="snug">In the config directory, a second copy of the config file has been created, with the addition of <kbd>env_vars</kbd> and a line that inserts a new directory into the front of the library path.  As shown below, this fixes the problem.</p>
      <pre>
$ <b>diff -u PerformabilityQOS.cfg PerformabilityQOS.2.cfg </b>
--- PerformabilityQOS.cfg	2016-10-03 17:52:39.000000000 -0700
+++ PerformabilityQOS.2.cfg	2016-10-03 17:54:45.000000000 -0700
@@ -3,8 +3,10 @@
 size        = test
 tune        = peak
 label       = srini
+env_vars    = 1
 #
 520.omnetpp_r=peak:
+   ENV_LD_LIBRARY_PATH = %{ENV_SPEC}/libraries:%{ENV_LD_LIBRARY_PATH}
    CXX                 = g++
    CXX_VERSION_OPTION  = -v
    OPTIMIZE            = -O1
$ <b>runcpu -c PerformabilityQOS | grep -i -e error: -e success</b>
error: a total of 1 children finished with errors
$ <b>runcpu -c PerformabilityQOS.2 | grep -i -e error: -e success</b>
Success: 1x520.omnetpp_r
$ </pre>
      <p class="snug">Notice above that the original fails, and the modifed version with <kbd>env_vars</kbd> succeeds.  Other
      notes:</p>
      <ol class="snug">
         <li>The syntax <kbd>%{ENV_x}</kbd> uses the <a href="#preprocessor">preprocessor</a> to import both the
            definition for <kbd>SPEC</kbd> and the definition for <kbd>LD_LIBRARY_PATH</kbd> as they were at runcpu
            startup.  If the definitions for <kbd>SPEC</kbd> and <kbd>LD_LIBRARY_PATH</kbd> at the start of the run are,
            respectively, <kbd>/A</kbd> and <kbd class="snugr">/B</kbd>, then runcpu will add
            '<kbd class="nbsnuglr">LD_LIBRARY_PATH=/A/libraries:/B</kbd>' &nbsp;to the environment when it invokes the executable
            <kbd class="snugr">omnetpp_r_peak.srini</kbd>.</li>
         <li>For SPEC CPU 2017, the environment must be consistent during base (rule
            <a href="runrules.html#runtimeEnvironment" class="external">3.4</a>).  You may vary it for peak.</li>
         <li> When developing a config file that uses <kbd class="snugr">env_vars</kbd>, you may find it useful to set <a
            href="#verbose">verbose</a> to 35 (or higher), which will cause the tools to log environment
            settings.</li>
         <li><b>Which environment?</b>  If you are attempting to set the environment for your entire run, this is not the
            feature that you are looking for.  Try <a href="#preenv">preenv</a> instead.  The <kbd>env_vars</kbd> option and
            <kbd>ENV*</kbd> are about communication from the config file to the environment of the invoked benchmark.</li>
         </ol>

   </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="expand_notes" > <kbd>expand_notes</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td>If set, will expand variables in notes.  This capability is limited because notes are NOT processed by
   <kbd class="snugr">specmake</kbd>, so you cannot do repeated substitutions. </td>
</tr>

<tr>
   <td id="expid" > <kbd>expid</kbd> </td>
   <td><kbd>H</kbd></td>
   <td></td>
   <td>If set to a non-empty value, will cause executables, run directories, results, and log files to be put in a
      subdirectory (with the same name as the value set) in their normal directories.  For example, setting <kbd>expid =
         CDS</kbd> will cause benchmark binaries to end up in <kbd class="snugr">exe/CDS</kbd>, run directories to end up in
      <kbd class="snugr">run/CDS</kbd>, and results and logs in <kbd class="snugr">$SPEC/result/CDS</kbd>.  </td>
</tr>

<tr>
   <td id="fail" > <kbd>fail</kbd> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>no</kbd></td>
   <td>If set, will cause a build or run to fail. </td>
</tr>

<tr>
   <td id="fail_build" > <kbd>fail_build</kbd></td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>0</kbd></td>
   <td><p class="snugtop">If set, will cause a build to fail.  For example, you could say something like this:</p>
<pre style="margin-left:1em;">
519.lbm_r=default:
#&gt; I am posting this config file for use by others in the
#&gt; company, but am forcing it to fail here because
#&gt; I want to force users to review this section.
#&gt;
#&gt; Once you find your way here, you should test whether
#&gt; bug report 234567 has been fixed, by using the first
#&gt; line below.  If it has not been fixed, then use the
#&gt; second.  In either case, you'll need to remove the
#&gt; fail_build.
#&gt;
#&gt;   - Pney Guvaxre
#&gt;     Boomtime, the 66th day of Confusion in the YOLD 3172

# OPTIMIZE = -Osuperduper
# OPTIMIZE = -Omiddling
fail_build = yes
</pre>

<p class="snugbot">In the example above, the build is forced to fail until the user examines and modifies that section of the config file.
Notice that Pney has used <a href="#protectedComments">protected comments</a> to cause the comments about the internal bug
report to disappear if the config file were to be published as part of a reportable run.</p>

  </td>
</tr>

<tr>
   <td id="fail_run" > <kbd>fail_run</kbd> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>no</kbd></td>
   <td>If set, will cause a run to fail.  </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="feedback" ><a class="external" href="runcpu.html#feedback"> <kbd>feedback</kbd></a> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>yes</kbd></td>

   <td><p class="snugtop">
   The <kbd>feedback</kbd> option applies an on/off switch for the use of feedback directed
   optimization (FDO), without specifying how the feedback will be done.</p>
   <ul>
     <li>If set to <kbd class="snugr">no</kbd>, then feedback will not be used, even if other options would normally cause it
        to occur.</li>
     <li>If set to <kbd class="snugr">yes</kbd>, then feedback is allowed to be used, provided that additional options are
        also set to describe how the FDO build should be carried out.</li>
   </ul>

   <p class="snugbot">The interaction between <kbd>feedback</kbd> and these other options is described in the section on <a
   href="#UsingFeedback">Using Feedback</a>, below.</p>

   </td>
</tr>

<tr>
   <td id="flagsurl" ><a class="external" href="runcpu.html#flagsurl"> <kbd>flagsurl</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>none</kbd></td>
   <td><p class="snugtop">If set, retrieve the named URL or filename and use that as the "user" flags file.  If the special value
   "noflags" is used, runcpu will not use any file and (if formatting previously run results) will remove any stored file.
   Automated processing of flags is explained in <a class="external"
   href="flag-description.html">flag-description.html</a>.</p>

   <p>If you want to list more than one flagsfile, the recommended method is by using  <a href="#continuation">numbered
   continuation lines</a>, for example:</p>

   <pre>
     flagsurl1 = mycompiler.xml
     flagsurl2 = myplatform.xml </pre>

   <p class="snug">Using other methods (such as <a href="#continuation">backslash continuation</a>) to specify multiple
   flags files may appear to work, but may result in unexpected differences between the original config file and the config file
   as written by <a class="external" href="runcpu.html#out">output format config</a>. </p>

   <p class="snugbot">Multiple flags files will typically be needed, because flags files are
   separated into two types, "compiler", and "platform".</p>

   </td>
</tr>

<tr>
   <td id="force_monitor" > <kbd>force_monitor</kbd> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>no</kbd></td>
   <td><p class="snug">If this variable is set to <kbd class="snugr">yes</kbd>, then all of the
      <a class="external" href="monitors.html">monitoring hooks</a> are enabled, regardless of settings that would otherwise
      turn them off.  This means that every invocation of <a class="external" href="utility.html#specinvoke">specinvoke</a>
      will be subject to <a class="external" href="monitors.html#monitor_specrun_wrapper">monitor_specrun_wrapper</a>, and
      all command invocations will be subject to
      <a class="external" href="monitors.html#monitor_wrapper">monitor_wrapper</a>.  This includes things that would normally
      not be subject to monitoring, such as FDO training runs, input generation commands, and commands used for validating
      benchmark output such as <a class="external" href="utility.html#specdiff">specdiff</a>.
      <span class="new">force_monitor is new with CPU 2017.</span> </p></td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="http_proxy" > <kbd><a class="external" href="runcpu.html#http_proxy">http_proxy</a></kbd> </td>
   <td><kbd>H</kbd></td>
   <td></td>
   <td><p class="snugtop">In some cases, such as when doing <a href="#check_version">version checks</a> and loading <a
   class="external" href="flag-description.html">flag description files</a>, runcpu will use HTTP to fetch a
   file.  If you need to specify the URL of a proxy server, this is the variable to use.  By default, no proxy is used.  Note that
   this setting will override the value of the <kbd>http_proxy</kbd> environment variable.  For example, one might set:</p>
<pre class="snugbot" style="margin-left:1em;">http_proxy = http://webcache.tom.spokewrenchdad.com:8080
</pre>
</td>
</tr>

<tr>
   <td id="http_timeout" > <kbd><a class="external" href="runcpu.html#http_timeout">http_timeout</a></kbd> </td>
   <td><kbd>H</kbd></td>
   <td>30</td>
   <td>This is the amount of time (in seconds) to wait while attempting to fetch a file via HTTP.  If the connection
   cannot be established in this amount of time, the attempt will be aborted.</td>
</tr>

<tr>
   <td id="idle_current_range" > <kbd>idle_current_range</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>none</kbd></td>
   <td>Set the maximum current in amps to be measured by the power analyzer(s) for the idle power measurement.  If you are
      unsure how to determine this, see the <a href="#InitialCurrentRange">suggestions</a> in the section on 
      <a href="#PowerMeasurement">Power Measurement</a>.  
      <span class="new">New</span>
   </td>
</tr>

<tr>
   <td id="ignore_errors" ><a class="external" href="runcpu.html#ignore_errors"> <kbd>ignore_errors</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td>Ignore certain errors which would otherwise cause the run to stop.  Very useful when debugging a new compiler and new
   set of options: with this option set, you'll find out about all the benchmarks that have problems, instead of only finding
   out about the first one.</td>
</tr>

<tr>
   <td id="ignore_sigint" > <kbd>ignore_sigint</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td>Ignore SIGINT.  If this is set, runcpu will attempt to continue running when you interrupt one of its child
   processes by pressing ^C (assuming that you have ^C mapped in the common way). Note that this does NOT cause runcpu
   itself to ignore SIGINT.</td>
</tr>

<tr>
   <td id="info_wrap_columns" ><a class="external" href="runcpu.html#info_wrap_columns"> <kbd>info_wrap_columns</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>50</kbd></td>
   <td>When set to a value greater than <kbd class="snugr">0</kbd>, attempts to split non-notes informational lines such that
      they are no longer than <kbd>info_wrap_columns</kbd> columns wide.  Lines are split on whitespace, and newly created
      lines are guaranteed to have at least the same indentation as the original line.  If a line contains an item that is
      longer than <kbd class="snugr">info_wrap_columns</kbd>, a warning is logged and the original line is left unchanged.  </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="iterations" ><span id="iteration"> </span>
      <a class="external" href="runcpu.html#iterations"> <kbd>iterations</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>3</kbd></td>
   <td><p class="snug">Number of iterations to run.  Reportable runs require either:</p>
      <ul class="snug">
         <li>3 iterations, in which case the median will be used when calculating overall metrics; or</li>
         <li>2 iterations, in which case the slower run will be used when calculating overall metrics.</li>
      </ul>

   <!-- Repeated note: this note appears 4 times: runcpu.html iterations and reportable; config.html ditto -->
   <p class="snugbot">Reportable runs must use 2 or 3 iterations.  Here is how the settings for 
   <a href="#iterations">iterations</a> and <a href="#reportable">reportable</a> affect each other:</p>
   <ul class="snug">
      <li>If you do not specify anything for iterations, reportable runs use 3.</li>
      <li>If you specify 1 iteration (i.e. less than the minimum), reportable runs use 2. </li>
      <li>If you specify 4 or more iterations (i.e. more than the maximum), reportable runs use 3.</li>
   </ul>
   <!-- end of repeated note -->



   </td>
</tr>

<tr>
   <td id="keeptmp" ><a class="external" href="runcpu.html#keeptmp"> <kbd>keeptmp</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td><p class="snugish">Whether or not to keep various temporary files.  If you leave <kbd class="nb">keeptmp</kbd>
   at its default setting, temporary files will be automatically deleted after a successful run.  If not, temporary files may
   accumulate at a prodigious rate, and you should be prepared to clean them by hand.  Temporary files include:</p>

   <ul class="snugish">
   <li><samp class="nb">CPU2017.nnn.log.debug</samp> in your result directory (<samp class="nbsnuglr">$SPEC/result</samp>,
      <samp class="nbsnugr">%SPEC%\result</samp>, or the corresponding location under your
      <a href="#output_root">output_root</a>). </li>
   <li><p class="snug">A directory named <samp class="nb">tmp/</samp> under one of these places:</p>
     <pre class="l1snugish">$SPEC/               or        %SPEC%\
Whatever you set for an output_root directory</pre>
   </li>
   <li>If <samp class="nb">tmp/</samp> is not usable, you might find temporaries under
      <samp class="nb">tmp.cpu2017</samp> or, possibly, <samp class="nbsnugr">tmp.cpu2017.n</samp>, where
      <samp class="nb">n</samp> may range from 1 to 15. </li>
   </ul>
   </td>
</tr>

<tr>
   <td id="label" ><a class="external" href="runcpu.html#label"> <kbd>label</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>none</kbd></td>
   <td><p class="snug">An arbitrary tag for executables, build directories, and run directories.
      <br />Legal characters are: alphanumerics, underscore, hyphen, and period.
      <span class="new">For CPU 2017, this field replaces the field <kbd>ext</kbd></span>
      <br />Examples:</p>
      <pre style="l1snug">label=jun12.old.CC
label=jun12.new.CC
label=jun14-flagday
label=jun15-jeff.wants.yet.another.test</pre>
      <p class="snug">If a label is used as a section specifier, it can be <a class="external"
         href="runcpu.html#label">referenced</a> from the <kbd>runcpu</kbd> command line.  <br />If a <kbd>runcpu</kbd> command
      uses a <kbd>label</kbd> that is not defined in a config file, by default the run will stop with an error:</p>
      <pre class="l2snug"><b>runcpu --label=yusoff [...]</b>
ERROR: The label 'yusoff' defines no settings in the config file!</pre>
      <p class="snug">The error can be disabled if you set <a href="#allow_label_override">allow_label_override=yes</a>.</p>
   </td>
</tr>

<tr>
   <td  style="border-top:none;" colspan="4">
      <table class="snug" style="border:none;">
         <tr>
            <td colspan="2"><b>Tip:</b> Make a habit of setting the label to anything that is meaningful to
               <b>you</b>.  Doing so makes it easier to compare binaries, easier to track history, and easier to clean up by
               removing directories that match the label.  Example:</td>
         </tr>
         <tr>
            <td style="border-width:0px 1px 0px 0px;margin-right:4px;padding-right:4px;">
               <p class="snug" style="text-align:justify;">This config file runs 519.lbm_r with 3 copies of the (very short)
               <kbd>test</kbd> workload.  It uses differing tuning depending on the label:</p>
               <pre id="labelexample" class="l1snug">copies               = 3
output_format        = text
runlist              = 519.lbm_r
default:
   CC_VERSION_OPTION = -v
   CC                = gcc
default=base=OhZero:
   OPTIMIZE          = -O0
default=base=OhThree:
   OPTIMIZE          = -O3 </pre>
            </td>
            <td style="border:none;margin-left:4px;padding-left:4px;">
               <p class="snug">The label can be used when hunting down directories - either to analyze them or to delete
               them, as in the Unix <kbd>find</kbd> command.  On other systems, try searching in a GUI file manager.</p>
               <pre class="snug" style="margin-left:3px;">
$ <b>find . -type d -name '*OhZ*'</b>
./benchspec/CPU/519.lbm_r/build/build_base_OhZero.0000
./benchspec/CPU/519.lbm_r/run/run_base_test_OhZero.0000
./benchspec/CPU/519.lbm_r/run/run_base_test_OhZero.0001
./benchspec/CPU/519.lbm_r/run/run_base_test_OhZero.0002
$ <b>cd benchspec/CPU/519.lbm_r/build</b>
$ <b>grep OPTIMIZE */Makefile.spec</b>
build_base_OhThree.0000/Makefile.spec:OPTIMIZE   = -O3
build_base_OhZero.0000/Makefile.spec:OPTIMIZE   = -O0
$ </pre>
            </td>
         </tr>
      </table>
   </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="line_width" > <kbd>line_width</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>0</kbd></td>
   <td>Line wrap width for screen.  If left at the default, 0, then lines will not be wrapped and may be arbitrarily
   long.</td>
</tr>

<tr>
   <td id="locking" > <kbd>locking</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>yes</kbd></td>
   <td>Try to use file locking to avoid race conditions, e.g. if more than one copy of runcpu is in use.  Although
   performance tests are typically done with only one copy of runcpu active, it can be handy to run multiple copies
   if you are just testing for correctness, or if you are compiling the benchmarks. </td>
</tr>

<tr>
   <td id="log_line_width" > <kbd>log_line_width</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>0</kbd></td>
   <td>Line wrap width for logfiles.  If your editor complains about lines being too long when you look at logfiles, try
   setting this to some reasonable value, such as <kbd>80</kbd> or <kbd>yes</kbd>32.  If left at the default, <kbd
      class="snugr">yes</kbd>, then lines will not be wrapped and may be arbitrarily long.</td>
</tr>

<tr>
   <td id="log_timestamp" ><a class="external" href="runcpu.html#log_timestamp"> <kbd>log_timestamp</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td>Whether or not to prepend time stamps to log file lines. </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="mail_reports" > <kbd>mail_reports</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>all</kbd></td>
   <td>The list of report types to mail.  The format and possible values are the same as for <a
       href="#output_format">output_format</a>, with the addition of <kbd class="snugr">log</kbd>, which will cause the
    current log file to be sent.  The default is for all files associated with the run to be mailed (so, this will include
    what you listed as your desired <kbd>output_format</kbd> plus <kbd>log</kbd> (the log file) and <kbd>rsf</kbd> (the
    rawfile).  You can cut your email down to the bare essentials with something like this:

<pre>   mailto=fast.guy@welovebenchmarks.org
   output_format=text,mail
   mail_reports=text
</pre>
   If none of the requested report types were generated, no mail will be sent. </td>
</tr>

<tr>
   <td id="mailcompress" > <kbd>mailcompress</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td>When using the 'mail' output format, turning this on will cause the various report attachments to be compressed with
   gzip.  </td>
</tr>

<tr>
   <td id="mailmethod" > <kbd>mailmethod</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>smtp</kbd></td>
   <td>When using the 'mail' output format, this specifies the method that should be used to send the mail.  On UNIX and
   UNIX-like systems, there are three choices: 'smtp' (communicate directly with an SMTP server over the network), 'sendmail'
   (try invoking <samp>sendmail</samp> directly from locations where it is commonly installed), and 'qmail' (try invoking
   <samp class="nb">qmail-inject</samp> from locations where it is commonly installed).  On Windows systems, only 'smtp' is available.
   SMTP is the recommended setting.
   <br />Using a <samp>sendmail</samp> or <samp class="nb">qmail-inject</samp> program from a non-standard location is possible only by
   setting the <kbd>PERL_MAILER</kbd> environment variable.  See the
   <a class="external" href="https://metacpan.org/pod/Mail::Mailer">Mail::Mailer</a> documentation for details.</td>
</tr>

<tr>
   <td id="mailport" > <kbd>mailport</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>25</kbd></td>
   <td>When using the 'mail' output format, and when the mailmethod is 'smtp', this specifies the port to use on the mail
   server.  The default is the standard SMTP port and should not be changed.   </td>
</tr>

<tr>
   <td id="mailserver" > <kbd>mailserver</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>127.0.0.1</kbd></td>
   <td>When using the 'mail' output format, and when the mailmethod is 'smtp', this specifies the IP address or hostname of
   the mailserver through which to send the results.   </td>
</tr>


<tr>
   <td id="mailto" > <kbd>mailto</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>''</kbd></td>
   <td><p class="snugtop">The address or addresses to which results should be sent when using the 'mail' output format.  If
   multiple addresses are specified, they should be separated by commas or whitespace.  Each address should consist
   <b>only</b> of the name@domain part (i.e. no "full name" type info).  The addresses are not checked for correct
   formatting; if a mistake is made, the results may be sent to an unknown location.  Think: comp.arch.  OK, probably not
   there, but seriously be careful about security on this one.</p>

   <p>Config files as posted at <a class="external" href="https://www.spec.org/cpu2017/">www.spec.org/cpu2017</a> will not include
   whatever you put on this line (thus, spambots will not see the contents of this field).</p>

   <p><b>Note</b> that to get your reports mailed to you,
   you need to specify both <kbd>mail</kbd> as an <kbd>output_format</kbd> and an address to which they should be mailed.  For
   example:</p>

<pre>   mailto=fast.guy@welovebenchmarks.org
   output_format=text,mail
</pre>
   <p class="snugbot">If no addresses are specified, no mail will be sent.  </p></td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="make" > <kbd>make</kbd> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>specmake</kbd></td>
   <td>Name of make executable.  Note that  the tools will enforce use of <kbd>specmake</kbd> for reportable results.  </td>
</tr>

<tr>
   <td id="make_no_clobber" ><a class="external" href="runcpu.html#make_no_clobber"> <kbd>make_no_clobber</kbd></a> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>no</kbd></td>
   <td>Don't delete directories when building executables. The default is <kbd class="snugr">no</kbd>, meaning "clobber".
      The "yes" option, meaning "avoid clobbering", should only be used for troubleshooting a problematic compile.  The tools
      will not allow you to use this option when building binaries for a reportable result.  Note that you could issue
      multiple successive <kbd>runcpu</kbd> commands with this option set (either in the config file, or with the <kbd
         class="nb">--make_no_clobber</kbd> switch), and the build directories will be preserved.  But once you remove <kbd
         class="nb">make_no_clobber</kbd> (allowing it to default back to <kbd class="snugr">no</kbd>), then the tools will attempt a
      normal build with a fresh build directory.  </td>
</tr>

<tr>
   <td id="makeflags" > <kbd>makeflags</kbd> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>''</kbd></td>
   <td><p class="snugtop">Extra flags for make (such as <kbd class="nbsnugr">-j</kbd>).  Set this to <kbd class="nb">-j
   <i>n</i> </kbd> where <i>n</i> is the number of concurrent processes to run during a build.  Omitting <i>n</i> or setting
   it to zero unlimits the number of jobs that will be run in parallel.  <b>Use with care!</b> Make flags should be used here
   only if you are familiar with GNU make. (The program <kbd>specmake</kbd> is GNU Make under another name to ensure no
   accidental conflicts with other Make utilities you might have.  The <a class="external"
   href="https://www.gnu.org/software/make/manual/">GNU Make Manual</a> can be consulted, and you can also say <kbd
   class="nbsnugr">specmake --help</kbd>.)</p>

   <p class="snugbot"><b>Note</b> that requesting a parallel build with <kbd class="nb">makeflags = -j N</kbd> causes multiple
   processors to be used at <i>build</i> time.  It has no effect on whether multiple processors are used at run time, and so
   does not affect how you <a href="#parallelreporting">report</a> on parallelism. </p>

   </td>
</tr>

<tr>
   <td id="mean_anyway" > <kbd>mean_anyway</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td>Calculate mean even if invalid.  <span class="alarm">DANGER:</span> this will write a mean to all reports even if no
   valid mean can be computed (e.g. half the benchmarks failed).  A mean from an invalid run is not "reportable" (that is, it
   cannot be represented in public as the SPEC metric).</td>
</tr>

<tr>
   <td id="minimize_builddirs" > <kbd>minimize_builddirs</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td>Try to keep working disk size down during builds.</td>
</tr>

<tr>
   <td id="minimize_rundirs" > <kbd>minimize_rundirs</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td>During a run, try to keep working disk size down.  Cannot be used in a reportable run.</td>
</tr>

<tr>
   <td id="nobuild" ><a class="external" href="runcpu.html#nobuild"> <kbd>nobuild</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td>Do not attempt to build benchmarks.  Useful to prevent attempts to rebuild benchmarks that cannot be built.
   Also comes in handy when testing whether proposed config file options would potentially force an <a
   href="#about.auto.rebuilds">automatic rebuild</a>.  </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="no_input_handler" > <kbd>no_input_handler</kbd> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>close</kbd></td>
   <td><p class="snugtop">Method to use to simulate an empty input.  Choices are:</p>
    <ul><li><kbd>close</kbd> - Just close stdin before executing the benchmark (this is the default). </li>
        <li><kbd>zero</kbd>  - Create a zero-length file and attach it to stdin.</li>
        <li><kbd>file</kbd>  - Synonym for <kbd class="snugr">zero</kbd>.</li>
        <li><kbd>null</kbd>  - Open the null device (<kbd class="snugl">/dev/null</kbd> or <kbd class="snugr">NUL:</kbd>) and attach it to stdin.</li>
    </ul>
    <p class="snugbot">Normally, this option should be left at the default; it was actually added to the tools for the
    benefit of a different SPEC suite that needed the feature.  If a reportable run for CPU 2017 uses this feature, an
    explanation should be provided as to why it was used.  </p>
    </td>
</tr>

<tr>
   <td id="no_monitor" > <kbd>no_monitor</kbd> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>''</kbd></td>
   <td>Exclude the listed workloads from monitoring via the various <kbd>monitor_*</kbd> hooks.  </td>
</tr>

<tr>
   <td id="notes_wrap_columns" ><a class="external" href="runcpu.html#notes_wrap_columns"> <kbd>notes_wrap_columns</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>0</kbd></td>
   <td>When set to a value greater than <kbd class="snugr">0</kbd>, attempts to split notes lines such that they are no
      longer than <kbd>notes_wrap_columns</kbd> columns wide.  Lines are split on whitespace, and newly created lines are
      guaranteed to have at least the same indentation as the original line.  If a line contains an item that is longer than
      <kbd class="snugr">notes_wrap_columns</kbd>, a warning is logged and the original line is left unchanged. </td>
</tr>

<tr>
   <td id="notes_wrap_indent" > <kbd>notes_wrap_indent</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>'    '</kbd></td>
   <td>When line wrapping is enabled (see <a href="#notes_wrap_columns">notes_wrap_columns</a>), this is the string that will
   be prepended to newly created lines <b>after</b> the indentation from the original line is applied.  The default is four
   spaces, but it can be set to any arbitrary string.  </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="output_format" ><a class="external" href="runcpu.html#out"> <kbd>output_format</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>all</kbd></td>
   <td>Format for reports.  Valid options are listed at <a class="external" href="runcpu.html#out">runcpu.html</a> under
   <kbd class="nbsnugr">--output_format</kbd>; major options include <kbd>txt</kbd> (ASCII text), <kbd class="snugr">html</kbd>, <kbd
      class="snugr">pdf</kbd>, and <kbd class="snugr">ps</kbd>.  You
   might prefer to set this to <kbd>txt</kbd> if you're going to be doing lots of runs, and only create the pretty reports at the
   end of the series.  See also the information in <a class="external" href="runcpu.html#rawformat">runcpu.html</a> about
   <kbd class="nbsnugr">--rawformat</kbd>.</td>
</tr>

<tr>
   <td id="output_root" rowspan="2" ><kbd> <a href="runcpu.html#output_root" class="external">output_root</a></kbd> </td>
   <td>H</td>
   <td></td>
   <td>

   <p class="snugtop">If set to a non-empty value, all output files will be rooted under
   the named directory, instead of under <samp>$SPEC</samp>  (or <samp class="snugr">%SPEC%</samp>).
   <br />If the <samp>output_root</samp> is not an absolute path (one that begins with "/" on Unix, or a
    device name on Windows), the path will be created under <samp>$SPEC</samp> or <samp class="snugr">%SPEC%</samp>.
    You probably will find it more useful if you pick some place other than the default, for convenience
    when cleaning directories, allocating quotas, or optimizing I/O.</p>

      <p class="snugbot">You can navigate a rooted directory with <a class="external" href="utility.html#ogo">ogo</a>.
      <br />This option can be useful for <a class="external" href="runcpu.html#sharing">sharing</a> an installation.  <br
      />It can also can be useful to optimize your I/O for a big SPECrate run: you can put the
      <samp>output_root</samp> on your faster device.</p>

     </td>
</tr>
<tr>
   <td  colspan="3">

   <table class="noborder" style="border:none;margin-left:2em;">
      <tr>
         <td  colspan="2"><p class="snugish">Example: Van has a 500 TB optimized file system under <samp class="snugr">/Ouachita</samp>.  If he types </p>
            <pre class="l1snug"><b>runcpu --output_root=/Ouachita/Van --config=mine 520.omnetpp_r</b></pre></td>
      </tr>
      <tr>
         <td style="border-bottom:thin solid gray;">These directories will be created</td>
         <td style="border-bottom:thin solid gray;">For these purposes</td>
      </tr>
      <tr>
         <td >log files and reports</td>
         <td ><kbd class="nb">/Ouachita/Van/result/</kbd></td>
      </tr>
      <tr>
         <td >520.omnetpp_r build directories</td>
         <td ><kbd class="nb">/Ouachita/Van/benchspec/CPU/520.omnetpp_r/build/</kbd></td>
      </tr>
      <tr>
         <td >520.omnetpp_r benchmark binaries (executables)</td>
         <td ><kbd class="nb">/Ouachita/Van/benchspec/CPU/520.omnetpp_r/exe/</kbd></td>
      </tr>
      <tr>
         <td >520.omnetpp_r run directories</td>
         <td ><kbd class="nb">/Ouachita/Van/benchspec/CPU/520.omnetpp_r/run/</kbd></td>
      </tr>
   </table>

</td></tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="parallel_test" ><a class="external" href="runcpu.html#parallel_test"> <kbd>parallel_test</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>#base<br />copies</kbd></td>
   <td><p class="snugtop">For <a href="#reportable">reportable</a> runs, the tools verify that benchmark binaries get the
   correct answer for the test and train workloads.  The time required for such verification does not count toward the
   reported score, but does add to the cost of benchmarking.  To reduce that cost, you can run multiple tests simultaneously,
   by setting this option to anything higher than 1.</p>

   <p>For SPECrate runs, the default is the number of base copies.  For SPECspeed runs, the default is 1, that is,
   effectively off.  Note that If you turn <samp>parallel_test</samp> on for SPECspeed, the number of <a
      href="#threads">threads</a> is silently forced to 1 during parallel testing.  This is done in order to prevent
   accidental system overload.</p>

   <p>For non-reportable runs, parallel testing is disabled, unless you turn it on by setting <a
      href="#parallel_test_workloads">parallel_test_workloads</a> to one or more of "<kbd class="snuglr">test</kbd>" "<kbd
      class="snuglr">train</kbd>", or "<kbd class="snuglr">ref</kbd>".</p>

   <p class="snugbot">If the feature is enabled, and if <a href="#parallel_test_submit">parallel_test_submit</a> is also set,
   the settings for <a href="#submit">submit</a> and <a href="#bind">bind</a> will be used to distribute jobs if they're
   set.</p>

   <p class="snugbot" id="parallel_test_notes"><b>Notes:</b></p>
   <ol class="snugtop">
   <li>The parallel test features

  (<kbd class="nbsnuglr">parallel_test</kbd>, and
   <kbd class="nbsnugr">parallel_test_submit</kbd>)

   control parallelism during the runs of the test and train workloads for reportable runs.  They do not affect how the
   binary is built; therefore, they have no effect on the setting of the report field "Parallel:&nbsp;Yes/No", discussed <a
   href="#parallelreporting">below</a>.</li>

   <li>The parallel test feature is not available on Microsoft Windows.</li>

   </ol>
   <p class="snugbot">The above notes apply to all the parallel_test switches.</p>

   </td>
</tr>

<tr>
   <td id="parallel_test_submit" > <kbd>parallel_test_submit</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td> <p class="snugtop">Whether or not to use your submit and bind settings when doing parallel_test.  When you specify <a
   href="#parallel_test">parallel_test</a> &gt; 1, by default your submit and bind settings are <strong>not</strong> applied,
   because typically the operating system's default policies  can be trusted to do an adequate job scheduling this
   (non-timed) work.  </p>

   <p class="snugbot"><b>Notes: </b>See notes under <kbd class="nbsnugr">parallel_test</kbd>, <a
   href="#parallel_test_notes">above</a>.</p>

   </td>
</tr>

<tr>
   <td id="parallel_test_workloads" > <kbd>parallel_test_workloads</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td> <p class="snugtop">Which workload classes to run in parallel for non-reportable runs when <a href="#parallel_test">
   parallel_test</a> is enabled.
<span class="new">The <kbd>parallel_test_workloads</kbd> feature is new with CPU 2017.</span>
</p>

   <p class="snugbot"><b>Notes: </b>See notes under <kbd class="nbsnugr">parallel_test</kbd>, <a
   href="#parallel_test_notes">above</a>.</p>

   </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="plain_train" > <kbd>plain_train</kbd> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>yes</kbd></td>
   <td>When set to <kbd>yes</kbd> (or <kbd>true</kbd> or <kbd class="snugr">1</kbd>), does not apply any submit commands to the feedback training run.  It also
   causes the <kbd>monitor_*</kbd> hooks to be ignored for the feedback training run.  </td>
</tr>

<tr>
   <td id="power" > <a class="external" href="runcpu.html#power">power</a></td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td>
      <p class="snug"> 
      Enable/disable the optional power measurement mode.  
      <span class="new">New</span>
      <br />Before changing this field, you should set:</p>
      <ul class="snug">
         <li><a href="#current_range">current range</a> </li>
         <li><a href="#idle_current_range">idle_current_range</a> </li>
         <li><a href="#power_analyzer">power analyzer</a></li>
         <li><a href="#temp_meter">temp meter</a></li>
         <li><a href="#voltage_range">voltage_range</a></li>
      </ul>
      <p class="snugbot">After those fields have been set, then:</p>
      <ul class="snug">
         <li>Power measurement can be enabled or disabled using either this config file option or by using the
            command line <kbd>runcpu</kbd>&nbsp;<a class="external" href="runcpu.html#power">--power / --nopower</a> options.</li>
         <li>In case of disagreement between the command line and the config file, the command line will win.</li>
      </ul>
      <p class="snugbot">See the section on <a href="#PowerMeasurement">Power Measurement</a>, below.</p>
   </td>
</tr>

<tr>
   <td id="power_analyzer" > <kbd>power_analyzer</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>none</kbd></td>
   <td>
      <p class="snugtop">Network location (name and port) for the power analyzer to be used by the SPEC Power/Temperature
      Daemon (PTD).  
      <span class="new">New</span>
      <br />Example:  <kbd class="nb">hex-analyzer001:8888</kbd></p>

      <p>If you are using more than one power analyzer, separate them by commas.
      <br />Example: <kbd class="nb">hex-analyzer001:8888, hex-analyzer002:8888</kbd></p>

      <p id="PowerId" class="snugbot">The <kbd>power_analyzer</kbd> field tells the run time software where to find the
      analyzer.  You also need to tell humans about your analyzer, using descriptive fields with matching <kbd>{id}</kbd>
      names, for example:
      <br /><a class="switch" href="#hw_power_cal_date">      hw_power_{id}_cal_date</a> 
      <br /><a class="switch" href="#hw_power_connection">    hw_power_{id}_connection</a>
      <br />The <kbd>{id}</kbd> contains <span class="u">only</span> the numbers and letters from the
      analyzer location.
         <br />Example:</p>
      <pre class="snug">power_analyzer                         = hex-analyzer001:8888
hw_power_hexanalyzer0018888_cal_date   = 3-Nov-2018
hw_power_hexanalyzer0018888_connection = Serial over USB</pre>
      <p class="snugbot">See the section on <a href="#PowerMeasurement">Power Measurement</a>, below.
         </p>
   </td>
</tr>

<tr id="pre_env">
   <td id="preenv" ><a class="external" href="runcpu.html#preenv"> <kbd>preenv</kbd></a><br /><i>or</i><br />pre_env </td>
   <td><kbd>H</kbd></td>
   <td><kbd>yes</kbd></td>
   <td><p class="snugish">Use <kbd>preENV_</kbd> lines in the config file.  When this option is set (the default), lines of
      the form <kbd class="nb">preENV_&lt;<i>variable</i>&gt; = &lt;<i>value</i>&gt;</kbd> will cause runcpu
      to set the specified environment variable to <i>value</i> and re-exec runcpu to perform the run.  The
      restart is done in order to ensure that the entire run takes place with the new settings.
      You can set <kbd class="nb">preENV_SOME_VARIABLE = value </kbd> only in the header <a href="#sections">section</a> or a
      section using one these <a href="#specifiers">benchmark specifiers</a>:</p>
      <pre class="l1snugish">default:
intrate:
fprate:
intspeed:
fpspeed:</pre>
      <p class="snugtop">Any attempt to use <kbd>preENV_</kbd> in other sections is <span class="alarm">silently</span>
      ignored.
      <br />You <span class="alarm">cannot</span> change <kbd>OMP_NUM_THREADS</kbd> using this feature.  Use <a href="#threads">threads</a>.
      <br />Multiple <kbd>preENV_</kbd> settings may appear in the config file.
      <br />If you are looking for a way to affect the environment of an individual benchmark, try <a href="#env_vars">env_vars</a>,
      not <kbd class="snugr">preenv</kbd>.</p>

      <p class="snugbot"><b>Example:</b> Commonly, SPECspeed2017 Floating Point users will set a large stack for <a
         href="https://www.spec.org/cpu2017/Docs/benchmarks/627.cam4_s.html" class="external">627.cam4_s</a>.  You can do
      this by adding a line similar to this one:</p>
      <pre class="l1snugish">preENV_OMP_STACKSIZE = 120M </pre>
      <p class="snug">to the header section (top) of your config file, or by adding a new section for
      <samp>fpspeed:</samp></p>
      <pre class="l1snugish">fpspeed:
   preENV_OMP_STACKSIZE = 120M </pre>
      <p class="snugish">The exact size needed will vary depending on your operating system and compiler.  You
      might need to adjust it. See also the Examples, in your installed SPEC CPU 2017 tree, in the
      <samp>config</samp> directory.</p>
      <table class="noborder">
         <tr>
            <td><p class="snug">There are traps for the unwary, as shown on the right (click to enlarge).  </p>
               <ul class="snugish">
                  <li>Don't try putting <samp>preENV</samp> definitions in any named sections other than
                     <samp>default:  intrate: fprate: intspeed:</samp>  or <samp> fpspeed:</samp></li>
                  <li>Don't use <a href="#envvars">env_vars</a> unless you want to affect only <a class="external"
                        href="overview.html#Q16">peak</a>.  It will work for base while you are doing your test runs; but
                     when you switch to <a href="#reportable">reportable</a>, you will wonder why it stops working for all
                     your <a class="external" href="overview.html#Q16">base</a> benchmarks.</li>
               </ul>
            </td>
            <td>
               <a href="images/stack.png"><img src="images/stack.small.png" width="288" height="114" alt="correct location for OMP_STACKSIZE" /></a>
            </td>
         </tr>
      </table>

   </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="rebuild" ><a class="external" href="runcpu.html#rebuild"> <kbd>rebuild</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td>Rebuild binaries even if they exist.</td>
</tr>

<tr>
   <td id="reportable" ><a class="external" href="runcpu.html#reportable"> <kbd>reportable</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>yes</kbd></td>
   <td><p class="snugtop">Strictly follow reporting rules, to the extent that it is practical to enforce them by automated
      means.  The tester remains responsible for ensuring that the runs are rule compliant.  You must set
      <kbd>reportable</kbd> to generate a valid run suitable for publication and/or submission to SPEC. </p>

   <!-- Repeated note: this note appears 4 times: runcpu.html iterations and reportable; config.html ditto -->
   <p class="snugbot">Reportable runs must use 2 or 3 iterations.  Here is how the settings for 
   <a href="#iterations">iterations</a> and <a href="#reportable">reportable</a> affect each other:</p>
   <ul class="snug">
      <li>If you do not specify anything for iterations, reportable runs use 3.</li>
      <li>If you specify 1 iteration (i.e. less than the minimum), reportable runs use 2. </li>
      <li>If you specify 4 or more iterations (i.e. more than the maximum), reportable runs use 3.</li>
   </ul>
   <!-- end of repeated note -->

   </td>

</tr>

<tr>
   <td id="runlist" ><a class="external" href="runcpu.html#runlist"> <kbd>runlist</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>none</kbd></td>
   <td>Benchmarks or <a href="#bset">sets</a> to run.  Names can be abbreviated, just as on the command line.  See the long discussion of run order in <a
   class="external" href="runcpu.html#runlist">runcpu.html</a>.</td>
</tr>

<tr>
   <td id="save_build_files" > <kbd>save_build_files</kbd> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>none</kbd></td>

   <td><p class="snug">After a build is finished, files matching any of the space-delimited wildcard patterns in this
   variable will be gathered up and saved.  When a non-reportable run is being set up, those files will be unpacked into
   the run directory when the executable is copied in.  The auxiliary file package is ignored when setting up reportable
   runs.
   <span class="new">The <kbd>save_build_files</kbd> feature is new with CPU 2017.</span>
   </p>
</td>
</tr>

<tr>
   <td id="section_specifier_fatal" > <kbd>section_specifier_fatal</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>yes</kbd></td>

   <td><p class="snug">While parsing the config file, if a <a href="#sectionSpecifier">section specifier</a> is found that
   refers to an unknown benchmark or benchset, an error is output and the run stops.  Set
   <kbd class="nb">section_specifier_fatal=no</kbd> in the header section of your config file to convert this error into a
   warning and allow the run to continue.  The ability to convert section specifier errors into warnings is probably of use
   only for benchmark developers.</p>

   </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="setprocgroup" ><a class="external" href="runcpu.html#setprocgroup"> <kbd>setprocgroup</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>yes</kbd></td>
   <td>Set the process group.  On Unix-like systems, improves the chances that ^C gets the whole run, not just one of the
   children.</td>
</tr>

<tr>
   <td id="size" ><a class="external" href="runcpu.html#size"> <kbd>size</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>ref</kbd></td>
   <td><p class="snugtop">Size of input set: <kbd class="snugr">test</kbd>, <kbd class="snugr">train</kbd>, or <kbd>ref</kbd>
      <br />If you are in the early stages of testing a new compiler or new set of options, you might set this to <kbd>test</kbd>
      or <kbd class="snugr">train</kbd>.

      <br />The reference workload (<kbd class="snuglr">ref</kbd>) is the only size whose time appears in reports. </p>

   <p >You might choose to use <kbd class="nb">runcpu --size=test</kbd> while debugging a new set of compilation options.  </p>

   <p >Reportable runs automatically invoke all three sizes: they ensure that your binaries can produce correct results with the
   test and train workloads and then run the ref workload either 2 or 3 times for the actual measurements. </p>

   <p class="snugbot"><span class="caution">Caution:</span> When requesting workloads, you should use only the terms <kbd class="snugr">test</kbd>,
   <kbd class="snugr">train</kbd>, or <kbd class="snugr">ref</kbd>. You should stop reading here.</p>
   <div style="font-size:80%;">
   <p class="l1snug">Still reading? Sigh.  OK, here are the possibilities.</p>
   <ul class="l1snug">
      <li>Other options might be used by other benchmarking suites</li>
      <li>For the reference workload, although it is possible to be more specific than "<kbd class="snuglr">ref</kbd>" by using
         "<samp class="snuglr">refrate</samp>" or "<samp class="snuglr">refspeed</samp>", this is <span class="u">not</span>
         recommended because one of two things will happen:  (1)&nbsp;Either you will ask for the same reference workload that the
         tools would have given you anyway (namely: refrate for 5xx, refspeed for 6xx); or (2)&nbsp;You will ask for the wrong
         one, and end up in a state that SPEC does not support, and which cannot produce any metrics.</li>
      <li>If you are doing benchmark research and development, you could play with other workloads.  In that case,
         have you done <a class="external" href="utility.html#convert_to_development">convert_to_development</a> yet?  You
         should.</li>
   </ul>
   </div>

   </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="srcalt" >
      <span id="src.alt"> <kbd>src.alt</kbd></span> </td>
   <td><kbd>N</kbd></td>
   <td><kbd>none</kbd></td>
   <td><p class="snug">Name of a SPEC-approved alternate source.
      <br />Set the option in the named section for the benchmark(s) where you wish to use it.
      <br />Multiple src.alts may be specified a single benchmark.  Separate them wth commas.
      <br />The effect of using a src.alt is to modify the sources in the build directory.
      <br />You may also spell this option as <kbd class="snugr">srcalt</kbd>.  </p>
   </td>
</tr>

<tr class="noborder">
   <td>&nbsp;</td>
   <td colspan="3"><p class="snugtop"><b>About alternate sources:</b> Sometimes a portability issue may require use of different
      source code for a benchmark, and SPEC may issue a <var>src.alt</var>, which is a compressed tar file
      containing modifications, created by <a href="utility.html#makesrcalt" class="external">makesrcalt</a>.  </p>

      <p class="snugbot">To use a src.alt, see the instructions posted with it at
      <a class="external" href="https://www.spec.org/cpu2017/src.alt/">www.spec.org/cpu2017/src.alt</a>.
      <br />Typically, you begin by downloading it to your <kbd>$SPEC</kbd> or <kbd>%SPEC%</kbd> directory and unpacking it:  </p>

<pre class="l2snugish">
$ <b>cd $SPEC</b>   # or on Microsoft Windows: cd %SPEC%
$ <b>specxz -dc nnn.benchmark.FixMumble.tar.xz | spectar -xvf -</b>
$ <b>cat README.nnn.benchmark.src.alt.FixMumble.txt</b>
</pre>

<p class="snugtop">The README will explain what to add to your config file and any other instructions that are needed.</p>

<p>After you unpack it, a directory is created under under <kbd class="nb">&lt;benchmark&gt;/src/src.alt/</kbd> and a set of
patches are stored there. You can look at the patches using <a class="external"
href="utility.html#dumpsrcalt">dumpsrcalt</a>, but it may be easier to just apply the src.alt and look at a build
directory.</p>

<p class="snugbot"><b>Example:</b> This config file builds with or without a src.alt, depending on the <samp>runcpu</samp>
setting for the <a href="runcpu.html#label" class="external">--label</a>.</p>

<pre class="snugish">$ <b>cat testme.cfg</b>
action               = buildsetup
runlist              = nnn.benchmark
tune                 = base
default:
   CC                = gcc
   CC_VERSION_OPTION = -v
nnn.benchmark=base=without:
   OPTIMIZE          = -O2
nnn.benchmark=base=with:
   OPTIMIZE          = -O2
   srcalt            = FixMumble
</pre>
<p class="snug">To populate build directories:</p>
<pre class="l1snug">
runcpu --label=without --config=testme
runcpu --label=with    --config=testme
</pre>
<p class="snug">Then, if you visit <kbd>benchspec/CPU/nnn.benchmark/build</kbd> you can compare the directories.</p>

   </td>
</tr>


<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="strict_rundir_verify" > <kbd>strict_rundir_verify</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>yes</kbd></td>
   <td><p class="snugtop">When set, the tools will verify that the file contents in existing run directories match the expected
      checksums.  Normally, this should always be on, and reportable runs will force it to be on.  Turning it off might make the
      setup phase go a little faster while you are tuning the benchmarks.  </p>

   <p class="snugbot">Developer notes: setting <kbd class="nb">strict_rundir_verify=no</kbd>  might be useful when
   prototyping a change to a workload or testing the effect of differing workloads.  Note, though, that once you start changing
   your installed tree for such purposes it is easy to get lost; you might as well keep a pristine tree without modifications, and
   use a second tree that you <a class="external" href="utility.html#convert_to_development">convert_to_development</a>.</p>
   </td>
</tr>

<tr id="sysinfo">
   <td id="sysinfo-program" >
      <span id="sysinfo_program"><kbd>sysinfo_program</kbd></span></td>
   <td><kbd>H</kbd></td>
   <td><kbd>'specperl $[top]/bin/sysinfo'</kbd></td>

   <td><p class="snugtop">The name of an executable program or script that automatically records information about your
      system configuration.    It creates a record that is contemporaneous with the measurement, and which is not subject to
      human transcription error.</p>

   <p><span class="new">New with CPU 2017:</span> <span class="alarm">Warning:</span> published results <a
   href="runrules.html#sysinfo" class="external"> <span class="u">must</span></a> use the SPEC-supplied sysinfo.   </p>

   <p class="snugbot">If you would like to turn the feature off (perhaps during development efforts), you can use:</p>
   <pre class="l1snug">sysinfo_program = </pre>
   <p class="snug">Remember to turn it on again when you do your "real" runs.  To use a different one (presumably with
   SPEC's approval - see warning just above), add a line near the top of your config file (i.e. in the <a
      href="#header">header section</a>):</p>
   <pre class="l1snugish">sysinfo_program = &lt;path_to_your_sysinfo_program&gt;</pre>

   <p class="snugbot">Details about the sysinfo utility may be found in <a href="utility.html" class="external">SPEC CPU 2017
      Utilities</a>, including how to <a class="external" href="utility.html#sysinfo-outputs">selectively enable output</a> types, how to <a
   class="external" href="utility.html#sysinfo-warnings">resolve conflicting field warnings</a>, and how to <a
   class="external" href="utility.html#writing-a-sysinfo">write your own</a> sysinfo utility.</p>
   </td>
</tr>



<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="table" ><a class="external" href="runcpu.html#table"> <kbd>table</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>yes</kbd></td>
   <td>In ASCII reports, include information about each execution of the benchmark.</td>
</tr>

<tr>
   <td id="teeout" > <kbd>teeout</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>no</kbd></td>
   <td>Run output through tee so you can see it on the screen.  Primarily affects builds, but also provides some
   information about progress of runtime, by showing you the <kbd>specinvoke</kbd> commands.</td>
</tr>

<tr>
   <td id="temp_meter" > <kbd>temp_meter</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>none</kbd></td>
   <td><p class="snugtop">Network location (name and port) for the temperature meter to be used by the SPEC Power/Temperature
      Daemon (PTD).  
      <span class="new">New</span>
      <br />Example:  <kbd class="nb">hex-analyzer001:8889</kbd></p>

      <p>If you are using more than one temperature meter, separate them by commas.
      <br />Example: <kbd class="nb">hex-analyzer001:8889, hex-analyzer002:8889</kbd></p>

      <p id="TemperatureId" class="snugbot">The <kbd>temp_meter</kbd> field tells the run time software where to find the
      meter. You also need to tell humans about your temperature meter, using descriptive fields with matching <kbd>{id}</kbd>
      names, for example:
      <br /><a class="switch" href="#hw_temperature_connection">hw_temperature_{id}_connection</a>
      <br /><a class="switch" href="#hw_temperature_setup">   hw_temperature_{id}_setup</a>
      <br />The <kbd>{id}</kbd> contains <span class="u">only</span> the numbers and letters from the
      temperature meter location.
         <br />Example:</p>
      <pre class="snug">temp_meter                                   = hex-analyzer001:8889
hw_temperature_hexanalyzer0018889_connection = USB
hw_temperature_hexanalyzer0018889_setup      = Attached directly to air inlet</pre>
      <p class="snugbot">See the section on <a href="#PowerMeasurement">Power Measurement</a>, below.
      </p>
   </td>
</tr>

<tr>
   <td id="threads" ><a class="external" href="runcpu.html#threads"> <kbd>threads</kbd></a> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>1</kbd></td>
   <td><p class="snugtop">Value to be set for <samp>OMP_NUM_THREADS</samp> when benchmarks are run.
      <br />If you have set <samp>OMP_NUM_THREADS</samp> in your environment prior to using <samp class="snugr">runcpu</samp>, that setting will
         be <span class="alarm">ignored</span>.  To use multiple benchmark threads, <span class="caution">you must use</span>
         either this config file field or the corresponding option <a href="runcpu.html#threads" class="external">runcpu
            --threads=N</a>. </p>
   
   <p>Note: If you select <a
   href="#basepeak">basepeak=yes</a> for a SPECspeed benchmark, the number of threads in peak will be forced to be the same as in
   base.</p>
   <p class="snugbot"><span class="new">The threads feature is new with CPU 2017.</span> </p>
   </td>

</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="train_single_thread" > <kbd>train_single_thread</kbd> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>no</kbd></td>
   <td>Ensure that feedback training runs are done using only a single thread.
      <span class="new">The <kbd>train_single_thread</kbd> feature is new with CPU 2017.</span>
   </td>
</tr>

<tr>
   <td id="train_with" ><a class="external" href="runcpu.html#train_with"> <kbd>train_with</kbd></a> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>train</kbd></td>
   <td><p class="snugtop">Select the workload with which to train binaries built using feedback-directed optimization.</p>

   <p>The ability to train with alternate workloads would not normally be applicable to CPU 2017; the feature was added for the
   benefit of a different suite that uses the same toolset.  Nevertheless, it could be used, for example when studying the
   efficacy of different training methods, as follows: (1) First <a class="external"
   href="utility.html#convert_to_development">convert</a> your tree to a development tree; (2) place your new training workload
   under <kbd class="nbsnugr">nnn.benchmark/data/myworkload</kbd>.  (3) Give it the same structure as the existing training
   workload: an <kbd class="nb">input/</kbd> directory, an <kbd class="nb">output/</kbd> directory, and a
   <kbd class="nb">reftime</kbd> file with contents similar to the one found in
   <kbd class="nbsnugr">nnn.benchmark/data/train/reftime</kbd>. </p>

   <p>For <a href="#reportable">reportable</a> runs, you cannot use binaries that were trained with alternate workloads.</p>


   </td>
</tr>

<tr>
   <td id="tune" ><a class="external" href="runcpu.html#tune"> <kbd>tune</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>base</kbd></td>
   <td>default tuning level.  In a reportable run, must be either <kbd><b>all</b></kbd> or <kbd class="snugr"><b>base</b></kbd>.</td>
</tr>

<tr>
   <td id="use_submit_for_compare" > <kbd>use_submit_for_compare</kbd> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>no</kbd></td>
   <td>If set, use submit commands for benchmark validation commands if submit was used for the run itself.  <span
       class="new">This feature is new with CPU 2017.</span> </td>
</tr>

<tr>
   <td id="use_submit_for_speed" > <kbd>use_submit_for_speed</kbd> </td>
   <td><kbd>H,N</kbd></td>
   <td><kbd>no</kbd></td>
   <td>If set, use submit commands for SPECspeed runs as well as SPECrate runs. </td>
</tr>

<!-- Insert this every now and then to keep headers in view -->
</table>
<table style="margin-top:1em;">
<tr>
   <td><b>Option</b></td>
   <td><b>Use&nbsp;In</b></td>
   <td><b>Default</b></td>
   <td><b>Meaning</b></td>
</tr>

<tr>
   <td id="verbose" ><a class="external" href="runcpu.html#verbose"> <kbd>verbose</kbd></a> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>5</kbd></td>
   <td>Verbosity level.  Select level 1 through 99 to control how much debugging info runcpu prints out.  For more
   information, see the section on <a href="#logfiles">log files</a>, below.</td>
</tr>

<tr>
   <td id="verify_binaries" > <kbd>verify_binaries</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>yes</kbd></td>
   <td><p class="snugtop">runcpu uses checksums to verify that executables match the config file that invokes
   them, and if they do not, runcpu forces a recompile.  You can turn that feature off by setting
   <kbd class="nbsnugr">verify_binaries=no</kbd>.</p>

   <p><span class="alarm">Warning: It is strongly recommended that you keep this option at its default, <kbd>yes</kbd> (that is,
   enabled).  </span>  If you disable this feature, you effectively say that you are willing to run a benchmark even if you
   don't know what you did or how you did it -- that is, you lack information as to how it was built!  </p>

   <p>The feature can be turned off because it may be useful to do so sometimes when debugging (for an example, see <a
   href="#env_vars">env_vars</a>), but it should not be routinely disabled.</p>

   <p class="snugbot">Since SPEC requires that you disclose how you build benchmarks, reportable runs (using the command-line
   switch <kbd class="nb">--reportable</kbd> or config file setting <kbd class="nbsnugr">reportable=yes</kbd>) will
   cause verify_binaries to be automatically enabled.
      <span class="new">For CPU 2017, this field replaces the field <kbd>check_md5</kbd></span>
</p></td>
</tr>

<tr>
   <td id="voltage_range" > <kbd>voltage_range</kbd> </td>
   <td><kbd>H</kbd></td>
   <td><kbd>none</kbd></td>
   <td><p class="snug">Set the maximum voltage in volts to be used by the power analyzer(s) for power measurement.
      <span class="new">New</span>
      <br />See the section on <a href="#PowerMeasurement">Power Measurement</a>, below.</p>
   </td>
</tr>



</table>




<!-- .......................................................................................................................... -->
<h2 id="sectionIII">        III.       Config file options for specmake
   <span id="specmake"> </span>
</h2>



<p class="snugbot">For SPEC CPU you do not write Makefiles.  Instead, you set Make variables in the config file, which are
sent to a SPEC-supplied copy of GNU Make, known as <kbd class="snugr">specmake</kbd>.  Variables with a dollar sign and
parentheses, aka "round brackets", are substituted by <kbd class="snugr">specmake</kbd>.  For example:</p>
<pre class="l1snugtop">
COMPILER_DIR = /usr/local/bin/
CC           = $(COMPILER_DIR)cc
CXX          = $(COMPILER_DIR)c++
FC           = $(COMPILER_DIR)f90
</pre>

<p>See <a href="#makevars">below</a> for more information on syntax of variables that you create and reference.</p>







<!-- .......................................................................................................................... -->
<h3 id="sectionIII.A">      III.A.     Commonly used Make variables
   <span id="CommonMakevars"> </span>
   <span id="common-makevars"> </span>
   <span id="common.makevars"> </span>
   <span id="commonMakevars"> </span>
   <span id="common_makevars"> </span>
   <span id="commonmakevars"> </span>
   <span id="SpecmakeBasic"> </span>
   <span id="specmake-basic"> </span>
   <span id="specmake.basic"> </span>
   <span id="specmakeBasic"> </span>
   <span id="specmake_basic"> </span>
   <span id="specmakebasic"> </span>
   <span id="SpecmakeBasics"> </span>
   <span id="specmake-basics"> </span>
   <span id="specmake.basics"> </span>
   <span id="specmakeBasics"> </span>
   <span id="specmake_basics"> </span>
   <span id="specmakebasics"> </span>
</h3>

<ul>
   <li>Basic <kbd>specmake</kbd> variables are described in this section.</li>
   <li>Many more are described in the <a href="makevars.html" class="external">Make Variables</a> document.</li>
   <li>The <kbd>specmake</kbd> utility can be run directly from the command line, as described in <a
   href="utility.html#specmake" class="external">Utilities</a>.</li>
</ul>


<p>The following Make variables are frequently useful.  When selecting where to put a flag, please bear in mind that the run
rules require that portability flags <a href="runrules.html#PortabilityFlags" class="external">must use</a>
<kbd>PORTABILITY</kbd> variables.</p>
<table>
   <tr>
      <td class="ttr" id="makeCompiler"> CC </td>
      <td>How to invoke your C compiler.</td>
   </tr>
   <tr>
      <td class="ttr" >CXX</td>
      <td>How to invoke your C++ compiler.</td>
   </tr>
   <tr>
      <td class="ttr" >FC</td>
      <td>How to invoke your Fortran compiler. </td>
   </tr>
   <tr>
      <td class="ttr"  id="makeVersion">
         <span id="Compiler-version"> </span>
         <span id="Compiler.version"> </span>
         <span id="CompilerVersion"> </span>
         <span id="Compiler_version"> </span>
         <span id="Compilerversion"> </span>
         <span id="compiler-version"> </span>
         <span id="compiler.version"> </span>
         <span id="compilerVersion"> </span>
         <span id="compiler_version"> </span>
         <span id="compilerversion"> </span>
         <span id="VERSION_OPTION"> </span>

         <span id="CC_VERSION_OPTION">CC_VERSION_OPTION</span><br />
         <span id="CXX_VERSION_OPTION">CXX_VERSION_OPTION</span><br />
         <span id="FC_VERSION_OPTION">FC_VERSION_OPTION</span>
      </td>
      <td ><p class="snugtop"> <span class="new">New with SPEC CPU 2017:</span>

         You must specify how to ask each compiler "Please tell me your version" because the method varies from compiler to
         compiler.  The version information is recorded contemporaneously with the build.  </p>

         <p class="snugbot">Here are a few examples from the
         <kbd class="nb">$SPEC/config</kbd> (or <kbd class="nbsnugr">%SPEC%\config</kbd>) directory as of Apr-2017 (there are
         more examples on your installed copy).  </p>
<pre class="l1snugish">
Example-PGI-linux-x86.cfg                CC_VERSION_OPTION  = -V
Example-gcc-linux-x86.cfg                CC_VERSION_OPTION  = -v
Example-intel-compiler-linux-rate.cfg    CC_VERSION_OPTION  = --version
Example-intel-compiler-windows-rate.cfg  CC_VERSION_OPTION  = -QV
Example-studio-solaris.cfg               CC_VERSION_OPTION  = -V
Example-xl-linux-ppc64le.cfg             CC_VERSION_OPTION  = -qversion=verbose</pre>
<p class="snugbot">You must specify the option for all compilers that you use.
<br />If you change compilers for some benchmarks, be sure to also change the corresponding version option.  </p>
<p>In the example below, most benchmarks use the first three compilers.  For intrate peak and fpspeed peak, different
compilers are chosen, and the config file changes *both* the compiler variable and the compiler version option.</p>
<pre class="l2snugish">default:
   CC                 = /bin/xlc
   CC_VERSION_OPTION  = -qversion=verbose

   FC                 = /bin/gfortran
   FC_VERSION_OPTION  = -v

   CXX                = /turboblaster/c++
   CXX_VERSION_OPTION = --print-blaster
intrate=peak:
   CC                 = /bin/gcc
   CC_VERSION_OPTION  = -v
fpspeed=peak:
   FC                 = /bin/xlf
   FC_VERSION_OPTION  = -qversion=verbose
</pre>

      </td>
   </tr>
   <tr>
      <td class="ttr">
         <span id="Portability"> </span>
         <span id="portability"> </span>
         <span id="PORTABILITY"> </span>
         <span id="Make-portability"> </span>
         <span id="Make.portability"> </span>
         <span id="MakePortability"> </span>
         <span id="Make_portability"> </span>
         <span id="Makeportability"> </span>
         <span id="make-portability"> </span>
         <span id="make.portability"> </span>
         <span id="makePortability"> </span>
         <span id="make_portability"> </span>
         <span id="makeportability"> </span>
         PORTABILITY<br />
         EXTRA_PORTABILITY
      </td>
      <td >Portability flags to be applied no matter what the compiler.</td>
   </tr>
   <tr>
      <td class="ttr" >{C|CXX|F}PORTABILITY <br />EXTRA_{C|CXX|F}PORTABILITY</td>
      <td>Portability flags to be applied to modules of the designated language <br />(For example, <kbd>CXXPORTABILITY</kbd>
         is for the C++ modules).</td>
   </tr>
   <tr>
      <td class="ttr">
         <span id="OPTIMIZE"> </span>
         <span id="Optimize"> </span>
         <span id="optimize"> </span>
         <span id="Make-optimize"> </span>
         <span id="Make.optimize"> </span>
         <span id="MakeOptimize"> </span>
         <span id="Make_optimize"> </span>
         <span id="Makeoptimize"> </span>
         <span id="make-optimize"> </span>
         <span id="make.optimize"> </span>
         <span id="makeOptimize"> </span>
         <span id="make_optimize"> </span>
         <span id="makeoptimize"> </span>
         OPTIMIZE<br />
         EXTRA_OPTIMIZE
      </td>
      <td >Optimization flags to be applied for all compilers.</td>
   </tr>
   <tr>
      <td class="ttr" >{C|CXX|F}OPTIMIZE<br />EXTRA_{C|CXX|F}OPTIMIZE</td>
      <td>Optimization flags to be applied to modules of the designated language.</td>
   </tr>
   <tr>
      <td class="ttr" id="makeOther">EXTRA_{C|CXX|F}FLAGS</td>
      <td>Flags that are neither optimization nor portability</td>
   </tr>
   <tr>
      <td class="ttr" id="makeLib">LIBS</td>
      <td >Libraries to add to the link line</td>
   </tr>
   <tr>
      <td class="ttr" id="makePassN">PASSn_OPTIMIZE</td>
      <td>Flags for pass "n" compilation when using feedback-directed optimization (FDO).  Typically n is either 1 or 2, for
         the compile done before the training run and the compile done after the training run.  See the chapter on <a
                      href="#UsingFeedback">Using Feedback</a> for more information.</td>
   </tr>
   <tr>
      <td class="ttr">PASSn_{C|CXX|F}OPTIMIZE</td>
      <td>Flags for pass "n" when compiling modules of the designated language.</td>
   </tr>
   <tr>
      <td class="ttr"><i>Many more</i></td>
      <td>See chart in document <a href="makevars.html#used_in" class="external">Make Variables</a></td>
   </tr>
</table>



<!-- .......................................................................................................................... -->
<h3 id="sectionIII.B">      III.B.     Using OpenMP and/orAutopar
   <span id="OpenMP"> </span>
   <span id="openmp"> </span>
   <span id="autopar"> </span>
</h3>

<p class="snugbot"><span class="new">New with CPU 2017: </span>
For fpspeed (SPECspeed 2017 Floating Point) and intspeed (SPECspeed2017 Integer), you may build using OpenMP and/or compiler auto-parallelization.
This capability is much more likely to be useful for Floating Point, because:</p>
<ul class="snug">
   <li>All SPECspeed Floating Point benchmarks include OpenMP directives</li>
   <li>For SPECspeed Integer,  only the compression benchmark 657.xz_s includes OpenMP.  <br />(Note: although the benchmark 605.mcf_s
      source code has <samp>omp</samp> pragmas, these are suppressed at compile time due to validation reasons.)</li>
</ul>




<!-- .......................................................................................................................... -->
<h4 id="sectionIII.B.1">    III.B.1.   Summary
</h4>



<table>
   <tr>
      <td><b>To enable OpenMP</b></td>
      <td>
         <pre style="margin:1px 4px;">specspeed:
   OPTIMIZE = -DSPEC_OPENMP <i>Compiler switch for OpenMP</i> </pre>
      </td>
   </tr>
   <tr>
      <td><b>Examples</b></td>
      <td>
         <pre style="margin:1px 4px;">specspeed:
   OPTIMIZE = -DSPEC_OPENMP -fopenmp    <i>(GNU)</i>
   OPTIMIZE = -DSPEC_OPENMP -qsmp=omp   <i>(IBM XL)</i>
   OPTIMIZE = -DSPEC_OPENMP -qopenmp    <i>(Intel)</i>
   OPTIMIZE = -DSPEC_OPENMP -xopenmp    <i>(Oracle Studio)</i>
   OPTIMIZE = -DSPEC_OPENMP -mp         <i>(PGI)</i> </pre>
      </td>
   </tr>
</table>


<!-- .......................................................................................................................... -->
<h4 id="sectionIII.B.2">    III.B.2.   SPECrate: no OpenMP. No Autopar.
</h4>



<ul>
   <li>For SPECrate, the rules do not allow use of OpenMP.</li>
   <li>For SPECrate, the rules do not allow use of compiler auto-parallelization.</li>
   <li>For SPECrate, no OpenMP directives are used.</li>
</ul>




<!-- .......................................................................................................................... -->
<h4 id="sectionIII.B.3">    III.B.3.   SPECspeed: your choice
</h4>



<ul>
   <li>For SPECspeed, you may optionally use OpenMP.</li>
   <li>For SPECspeed, you may optionally use compiler autopar.</li>
   <li>For SPECspeed, you may choose whether the OpenMP directives are visible to the compiler.</li>
</ul>

<p>The config file fragment below demonstrates available options.</p>

<pre>
 1   intspeed:
 2      OPTIMIZE       = -DSPEC_SUPPRESS_OPENMP
 3   657.xz_s=peak:
 4      OPTIMIZE       = --openmp  -DSPEC_OPENMP
 5
 6   fpspeed:
 7      OPTIMIZE       = --openmp
 8      EXTRA_OPTIMIZE = -DSPEC_OPENMP
 9   603.bwaves_s=peak:
10      OPTIMIZE       = --autopar
11      EXTRA_OPTIMIZE = -DSPEC_SUPPRESS_OPENMP
12   619.lbm_s=peak:
13      OPTIMIZE       = --autopar
14      EXTRA_OPTIMIZE = -DSPEC_OPENMP

</pre>

<p class="snug">In the example above:</p>
<ul>
   <li>Most of the SPECspeed integer benchmarks are built without any form of parallelization (line #2, above). </li>
   <li style="margin-left:2em;">Integer exception: For the peak build of 657.xz_s: OpenMP is used. (#4).</li>

   <li style="margin-top:.7em;">Most of the SPECspeed floating point benchmarks are built with OpenMP (#7-8).</li>
   <li style="margin-left:2em;">FP Exception 1: For the peak build of 603.bwaves_s: OpenMP is not used; compiler autoparallelization is used (#10);
   no OpenMP directives are used.  (#11)</li>
   <li style="margin-left:2em;">FP Exception 2: For the peak build of 619.lbm_s: compiler autopar is used (#13); the OpenMP directives are visible (#14).
   (It is conceivable that the compiler autopar facility might make use of information gained from those
   directives.)</li>
</ul>


<!-- .......................................................................................................................... -->
<h4 id="sectionIII.B.4">    III.B.4.   Detail - conditions for enabling OpenMP
</h4>



<p>Having considered an example, let us now look at the conditions in detail.   The form of the directives in the benchmarks
is: </p>
<pre style="font-size:85%;">
#if (defined(_OPENMP) || defined(SPEC_OPENMP)) &amp;&amp; !defined(SPEC_SUPPRESS_OPENMP) &amp;&amp; !defined(SPEC_AUTO_SUPPRESS_OPENMP)
</pre>

<p>How it works:</p>

<ol>
   <li id="auto_suppress">For reasons of how benchmark reporting is done, there are two duplicated controls that have
      precisely the same effect on sources: <br /><kbd>SPEC_SUPPRESS_OPENMP</kbd> is available for you to set if you want to
      suppress OpenMP.
      <br /><kbd style="font-weight:100;">SPEC_AUTO_SUPPRESS_OPENMP</kbd> is used by runcpu when it automatically does so.</li>
   <li>If you set <kbd class="nb">-DSPEC_SUPPRESS_OPENMP</kbd> for a SPECspeed benchmark, that removes the directives.</li>
   <li>Or, if you set <kbd class="nb">-DSPEC_OPENMP</kbd>  for a SPECspeed benchmark, that causes the directives to be visible to
      your compiler.</li>
   <li><p class="snugtop">If you set neither one of them, then the visibility of the directives will depend upon whether the
      variable <kbd>_OPENMP</kbd> is set.  Here, it is important to note that <kbd>_OPENMP</kbd> is defined by the OpenMP
      standard.  It requires that if a compiler supports a preprocessor, it must set this variable.  However, the SPEC CPU
      benchmarks do not use vendor-native Fortran preprocessors, because the Fortran standard does not define preprocessing.
      Instead, the preprocessing is done by <a class="external" href="utility.html#specpp">filepp</a> (<kbd class="snuglr">specpp</kbd>),
      which does not do anything to OpenMP variables unless explicitly told to do so.  Thus the SPEC CPU toolset may behave
      differently than your vendor-native compiler.</p>

      <p>In short, you might find yourself scratching your head wondering why a Fortran OpenMP benchmark is so much faster
      when you compile it outside the SPEC CPU harness vs. inside. </p>

      <p><b>Recommendation:</b> To avoid a sore scalp (and before blaming the SPEC CPU tools!), if you wish to enable OpenMP
      please make sure that you always set <kbd class="nbsnugr">-DSPEC_OPENMP</kbd>.  If you do not, then directives might  or
      might not be visible, depending on your compiler and depending on the language. </p>  </li>
</ol>

<p>To make this more clear, assume that we are compiling these benchmark excerpts.  (For simplicity, we leave aside the <a href="#auto_suppress">duplicated</a> control.)</p>

<pre>
From 619.lbm_s (C)
   #if (defined(_OPENMP) || defined(SPEC_OPENMP)) &amp;&amp; !defined(SPEC_SUPPRESS_OPENMP)
   #pragma omp parallel for
   #endif

From 603.bwaves_s (Fortran)
   #if (defined(_OPENMP) || defined (SPEC_OPENMP)) &amp;&amp; !defined(SPEC_SUPPRESS_OPENMP)
   !$OMP PARALLEL DO PRIVATE(l,i,j,k)
   #endif
</pre>

<p>Further assume that we are using compilers that enable OpenMP by setting a flag called <kbd
   class="nbsnugr">--openmp</kbd>.  The inclusion of the directives will be determined by the truth tables shown below.  The
important difference occurs at line 7: by the time the Fortran compiler is awakened, it is too late to enable the directives,
because that decision was already made by <kbd class="snugr">specpp</kbd>.</p>


<table>
<tr>
<td>
   <table>
   <tr><th style="background:lightgray;" colspan="5">#pragma omp parallel for</th></tr>
   <tr><td>&nbsp;</td><th>-DSPEC<br />_SUPPRESS<br />_OPENMP</th><th>-DSPEC<br />_OPENMP</th><th>--openmp</th><th>Result</th></tr>
   <tr><td>1</td><td class="tdc">Y</td><td class="tdc">Y</td><td class="tdc">Y</td><td>Not Included</td></tr>
   <tr><td>2</td><td class="tdc">Y</td><td class="tdc">Y</td><td class="tdc">N</td><td>Not Included</td></tr>
   <tr><td>3</td><td class="tdc">Y</td><td class="tdc">N</td><td class="tdc">Y</td><td>Not Included</td></tr>
   <tr><td>4</td><td class="tdc">Y</td><td class="tdc">N</td><td class="tdc">N</td><td>Not Included</td></tr>
   <tr><td>5</td><td class="tdc">N</td><td class="tdc">Y</td><td class="tdc">Y</td><td>Included</td></tr>
   <tr><td>6</td><td class="tdc">N</td><td class="tdc">Y</td><td class="tdc">N</td><td>Included</td></tr>
   <tr><td>7</td><td class="tdc">N</td><td class="tdc">N</td><td class="tdc">Y</td><td>Included</td></tr>
   <tr><td>8</td><td class="tdc">N</td><td class="tdc">N</td><td class="tdc">N</td><td>Not Included</td></tr>
   </table>
</td>
<td>&nbsp;</td>

<td>
   <table>
   <tr><th style="background:lightgray;" colspan="5">!$OMP PARALLEL DO PRIVATE(l,i,j,k)</th></tr>
   <tr><td>&nbsp;</td><th>-DSPEC<br />_SUPPRESS<br />_OPENMP</th><th>-DSPEC<br />_OPENMP</th><th>--openmp</th><th>Result</th></tr>
   <tr><td>1</td><td class="tdc">Y</td><td class="tdc">Y</td><td class="tdc">Y</td><td>Not Included</td></tr>
   <tr><td>2</td><td class="tdc">Y</td><td class="tdc">Y</td><td class="tdc">N</td><td>Not Included</td></tr>
   <tr><td>3</td><td class="tdc">Y</td><td class="tdc">N</td><td class="tdc">Y</td><td>Not Included</td></tr>
   <tr><td>4</td><td class="tdc">Y</td><td class="tdc">N</td><td class="tdc">N</td><td>Not Included</td></tr>
   <tr><td>5</td><td class="tdc">N</td><td class="tdc">Y</td><td class="tdc">Y</td><td>Included</td></tr>
   <tr><td>6</td><td class="tdc">N</td><td class="tdc">Y</td><td class="tdc">N</td><td>Included</td></tr>
   <tr><td>7</td><td class="tdc">N</td><td class="tdc">N</td><td class="tdc">Y</td><td>Not Included</td></tr>
   <tr><td>8</td><td class="tdc">N</td><td class="tdc">N</td><td class="tdc">N</td><td>Not Included</td></tr>
   </table>
</td>
</tr>
</table>




<!-- .......................................................................................................................... -->
<h3 id="sectionIII.C">      III.C.     Creating your own Make variables
   <span id="makevars"> </span>
   <span id="makeVars"> </span>
   <span id="MakeVars"> </span>
</h3>

<p>Variables with a dollar sign and parentheses, aka "round brackets", are substituted by <kbd class="snugr">specmake</kbd>. </p>

<p><span class="alarm">Deprecated feature alert:</span> Although it is also possible to pass information to
<kbd>specmake</kbd> using curly brackets: <kbd class="snugr">${COMPILER_DIR}</kbd>, this is not recommended.  Instead, you
should consistently use curly brackets to address runcpu and round brackets to address <kbd
class="snugr">specmake</kbd>.  It is possible that a future version of runcpu may insist on interpolating curly
brackets itself, rather than allowing <kbd>specmake</kbd> to do so.</p>


<p class="snugbot">Example:</p>

<pre class="l1snugish">$ <b>cat makevar.cfg </b>
action            = build
runlist           = 603.bwaves_s
default:
   DEBUG_SYMBOLS  = --debug:symbols=expanded_info_level:42
   EXTRA_FFLAGS   = $(GEE)
fpspeed=base:
   GEE            = -g $(DEBUG_SYMBOLS)
fpspeed=peak:
   GEE            = -g

$ <b>cat makevar.sh</b>
runcpu --config=makevar --fake --tune=base | grep COMP:
runcpu --config=makevar --fake --tune=peak | grep COMP:
$ <b>./makevar.sh </b>
COMP: "f90 -c -o options.o -g --debug:symbols=expanded_info_level:42 &lt;source&gt;"
COMP: "f90 -c -o options.o -g &lt;source&gt;"
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>


<p>The config file above creates two variables options (<kbd class="snugl">DEBUG_SYMBOLS</kbd> and <kbd class="snugr">GEE</kbd>).  Both are passed to
<kbd class="snugr">specmake</kbd>, which interprets them.  The results are shown above using the <a href="runcpu.html#fake"
class="external">runcpu --fake</a> option.</p>


<p>For an extensive example of variable substitution handled by <kbd class="snugr">specmake</kbd>, see the SPEC CPU 2000 example at <a
class="external" href="https://www.spec.org/cpu2000/docs/example-advanced.cfg">www.spec.org/cpu2000/docs/example-advanced.cfg</a>.
Search that file for LIBS, and note the long comment which provides a walk-through of a complex substitution handled by
<kbd class="snugr">specmake</kbd>. </p>



<!-- .......................................................................................................................... -->
<h3 id="sectionIII.D">      III.D.     The operator "+=" is available (but should be used with caution)
   <span id="PlusEquals"> </span>
   <span id="plus-equals"> </span>
   <span id="plus.equals"> </span>
   <span id="plusEquals"> </span>
   <span id="plus_equals"> </span>
   <span id="plusequals"> </span>
</h3>



<p class="snugbot">The operator "<kbd class="snuglr">+=</kbd>" adds to <kbd>specmake</kbd> variables.  It may be  convenient; it also <span
   class="caution">may cause hard-to-diagnose bugs.</span>  Example:</p>
<pre class="l2snug">$ <b>cat tmp.cfg</b>
action  = build
runlist = 519.lbm_r
tune    = peak
default:
   OPTIMIZE   = -O1
fprate=default:
   OPTIMIZE  += --unroll
default=peak:
   OPTIMIZE  += --inner_unroll
519.lbm_r=peak:
   OPTIMIZE  += --outer_unroll
default=default=breakfast:
   OPTIMIZE   = --jelly_roll

$ <b>runcpu --fake --config=tmp | grep lbm.c</b>
cc -c -o lbm.o -DSPEC -DSPEC_CPU -DNDEBUG -O1 --inner_unroll --unroll --outer_unroll lbm.c
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a>
</pre>
<p class="snugtop">Note that the options accumulate. </p>

<p><span class="alarm">Caution:</span> although the <kbd>+=</kbd> operator adds flexibility, it may introduce hard-to-predict
behavior, depending on precedence of section specifiers, the order of your config file, and other features, such as include
files.  Instead of using '<kbd class="snuglr">+=</kbd>' try picking different <a class="external" href="makevars.html#used_in">make
variables</a> for different purposes.  For an example of hard-to-predict behavior, what will happen if you add <kbd
class="nb">--label=breakfast</kbd> to the above <kbd>runcpu</kbd> command?  (Try&nbsp;it.)</p>

<p class="hanging1"><b>Recommendations:</b>
<br />Avoid <kbd>+=</kbd> to prevent surprises.
<br />Keep it simple.
<br />Pick different <a class="external" href="makevars.html#used_in">makevars</a> for different purposes.
<br />Create conventions for your config files and write them down, in config file comments.
<br />If you must use <kbd>+=</kbd> review its effects carefully (<a class="external" href="runcpu.html#fake">--fake</a> is your friend).
</p>

<!-- .......................................................................................................................... -->
<h3 id="sectionIII.E">      III.E  Using <kbd>action=buildsetup</kbd> to create a sandbox
   <span id="Build-setup"> </span>   <span id="Buildsetup-sandbox"> </span>
   <span id="Build.setup"> </span>   <span id="Buildsetup.sandbox"> </span>
   <span id="BuildSetup"> </span>    <span id="BuildsetupSandbox"> </span>
   <span id="Build_setup"> </span>   <span id="Buildsetup_sandbox"> </span>
   <span id="Buildsetup"> </span>    <span id="Buildsetupsandbox"> </span>
   <span id="build-setup"> </span>   <span id="buildsetup-sandbox"> </span>
   <span id="build.setup"> </span>   <span id="buildsetup.sandbox"> </span>
   <span id="buildSetup"> </span>    <span id="buildsetupSandbox"> </span>
   <span id="build_setup"> </span>   <span id="buildsetup_sandbox"> </span>
   <span id="buildsetup"> </span>    <span id="buildsetupsandbox"> </span>
   <span id="Build-setup-sandbox"> </span>    <span id="Build-sandbox"> </span>
   <span id="Build.setup.sandbox"> </span>    <span id="Build.sandbox"> </span>
   <span id="BuildSetupSandbox"> </span>      <span id="BuildSandbox"> </span>
   <span id="Build_setup_sandbox"> </span>    <span id="Build_sandbox"> </span>
   <span id="build-setup-sandbox"> </span>    <span id="Buildsandbox"> </span>
   <span id="build.setup.sandbox"> </span>    <span id="build-sandbox"> </span>
   <span id="buildSetupSandbox"> </span>      <span id="build.sandbox"> </span>
   <span id="build_setup_sandbox"> </span>    <span id="buildSandbox"> </span>
   <span id="Sandbox"> </span>                <span id="build_sandbox"> </span>
   <span id="sandbox"> </span>                <span id="buildsandbox"> </span>
</h3>

<p>When debugging a set of build options, it is often useful to create a "sandbox" - that is, a directory where you can play
with the benchmark and its options.  This example creates a build sandbox with <kbd class="snugr">action <a href="runcpu.html#buildsetup"
class="external">buildsetup</a></kbd>.</p>

<pre class="l2snugish">$ <b>cat sandbox.cfg </b>
action        = buildsetup
label         = fast
output_root   = /tmp/demo_buildsetup
runlist       = 519.lbm_r
tune          = peak
default=peak:
   OPTIMIZE   = --fast
$ <b>cat sandbox.sh </b>
runcpu --config=sandbox | grep log
grep Makefile.spec /tmp/demo_buildsetup/result/CPU2017.001.log
$ <b>./sandbox.sh </b>
The log for this run is in /tmp/demo_buildsetup/result/CPU2017.001.log
Wrote to makefile '/tmp/demo_buildsetup/benchspec/CPU/519.lbm_r/build/build_peak_fast.0000/Makefile.spec':
</pre>
<p class="l1snugish">The action causes a directory to be created
<br />There, the Makefile can be examined, used in a dry run, or modified as part of a testing effort.</p>
<pre class="l2snugish">$ <b>cd /tmp/demo_buildsetup/benchspec/CPU/519.lbm_r/build/build_peak_fast.0000/</b>
$ <b>grep OPTIMIZE Makefile.spec </b>
OPTIMIZE         = --fast
$ <b>specmake --dry-run</b>
cc -c -o lbm.o  -DSPEC -DSPEC_CPU -DNDEBUG -DSPEC_AUTO_SUPPRESS_OPENMP  --fast  lbm.c
cc -c -o main.o -DSPEC -DSPEC_CPU -DNDEBUG -DSPEC_AUTO_SUPPRESS_OPENMP  --fast  main.c
cc --fast lbm.o main.o -lm  -o lbm_r
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>

<p>See also the chapter on <a class="external" href="utility.html#specmake">specmake</a> in <i>SPEC CPU 2017 Utilities</i>
and the sandbox examples in <a class="external" href="runcpu-avoidance.html">Avoiding runcpu</a>.</p>





<!-- .......................................................................................................................... -->
<h3 id="sectionIII.F">      III.F.     About Automatic Rebuilds
   <span id="AboutAutoRebuilds"> </span>              <span id="Rebuilds"> </span>
   <span id="about-auto-rebuilds"> </span>            <span id="rebuilds"> </span>
   <span id="about.auto.rebuilds"> </span>
   <span id="aboutAutoRebuilds"> </span>              <span id="Unexpected-rebuilds"> </span>
   <span id="about_auto_rebuilds"> </span>            <span id="Unexpected.rebuilds"> </span>
   <span id="aboutautorebuilds"> </span>              <span id="UnexpectedRebuilds"> </span>
   <span id="AutoRebuilds"> </span>                   <span id="Unexpected_rebuilds"> </span>
   <span id="auto-rebuilds"> </span>                  <span id="Unexpectedrebuilds"> </span>
   <span id="auto.rebuilds"> </span>                  <span id="unexpected-rebuilds"> </span>
   <span id="autoRebuilds"> </span>                   <span id="unexpected.rebuilds"> </span>
   <span id="auto_rebuilds"> </span>                  <span id="unexpectedRebuilds"> </span>
   <span id="autorebuilds"> </span>                   <span id="unexpected_rebuilds"> </span>
   <span id="AutoRebuild"> </span>                    <span id="unexpectedrebuilds"> </span>
   <span id="auto-rebuild"> </span>
   <span id="auto.rebuild"> </span>
   <span id="autoRebuild"> </span>
   <span id="auto_rebuild"> </span>
   <span id="autorebuild"> </span>

</h3>



<p>The SPEC CPU tools try to keep config files and binaries synchronized with each other.(*)
      <br />Edits to a config file may cause binaries to be rebuilt, sometimes to the surprise(**) of testers. </p>



<p style="margin-bottom:.1em;" class="hanging1"><b>Testing option sensitivity:</b> The first thing that happens in a rebuild is to delete the old binary.
<br />If that is a
potential problem (perhaps it takes a long time to build), you can <i>test</i> whether a config file change will cause a
rebuild:</p>
<ol class="l2snug">
    <li>Copy the config file to a test version (say, <kbd class="snugr">mycopy.cfg</kbd>)</li>
    <li>Edit the copy.</li>
    <li><i>Remove</i> any lines that change defaults for <a href="#ignore_errors">ignore_errors</a> or <a href="#verify_binaries">verify_binaries</a></li>
    <li>Use: <kbd class="nb">runcpu --config=mycopy --nobuild --size=test --iterations=1 ...</kbd></li>
</ol>
<p class="l1snug">The command:</p>
<ul class="l1snug" >
   <li>completes quickly (because <a class="external" href="runcpu.html#size">--size</a>=test and <a class="external"
         href="runcpu.html#iterations">iterations</a>=1)</li>
   <li>exits if binaries are not up to date, because <a class="external" href="runcpu.html#nobuild">--nobuild</a></li>
</ul>
<p class="l1snugtop">No binaries are harmed.</p>

<div style="font-size:85%;">
   <p class="snugbot">Notes:</p>
<p class="l1snug" style="padding-left:.6em;">New Unless you change <a href="#verify_binaries">verify_binaries</a>.  Recommendation: <i>Don't</i>
change it.</p>
<p class="l1snugtop">(**) Recent implementations surprise less often.  For
detail, see the <a class="external" href="https://www.spec.org/cpu2006/Docs/config.html#about.auto.rebuilds">CPU 2006</a>
version of this section.</p>
</div>


<!-- .......................................................................................................................... -->
<h2 id="sectionIV">         IV.        Config file options for the shell
   <span id="shell"> </span>
</h2>



<p>Some options in your config file cause commands to be executed by your shell (<kbd class="snuglr">/bin/sh</kbd>) or by the Windows command
interpreter (<kbd class="snuglr">cmd.exe</kbd>).</p>




<!-- .......................................................................................................................... -->
<h3 id="sectionIV.A">       IV.A.      \$SHELLVAR variable substitution
   <span id="SHELLVAR"> </span>
   <span id="shellvar"> </span>
   <span id="SHELLVARS"> </span>
   <span id="shellvars"> </span>
</h3>



<p>Substitution by the shell - or by the windows command interpreter - uses backslash dollar sign.
<br />The backslash protects the variables from interpretation by <kbd class="snugr">runcpu</kbd>.</p>

<div class="l1">
   <p class="snugbot">Example: This config file runs <kbd>519.lbm_r</kbd> twice, with base and peak options.  Only peak uses
   backslashes:</p>
   <pre class="l1snug">$ <b>cat tmp.cfg</b>
expand_notes         = 1
iterations           = 1
runlist              = 519.lbm_r
size                 = test
tune                 = base,peak
default:
   CC                = gcc
   CC_VERSION_OPTION = -v
default=base:
   submit    = echo home=$HOME, spec=$SPEC   &gt; /tmp/chan; ${command}
default=peak:
   submit    = echo home=\$HOME, spec=\$SPEC &gt; /tmp/nui;  ${command}
$ <b>runcpu --config=tmp | grep txt </b>
    format: Text -&gt; /Users/chris/spec/cpu2017/result/CPU2017.697.fprate.test.txt
$ <b>cd /tmp</b>
$ <b>cat chan nui</b>
home=, spec=
home=/Users/chris, spec=/Users/chris/spec/cpu2017
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a>   </pre>
   <p class="snug">In base, <kbd>$HOME</kbd> and <kbd>$SPEC</kbd> are gobbled up by <kbd class="snugr">runcpu</kbd>, which
   obediently retuns their values: nothing at all.  <br />In peak, backslashes prevent runcpu from interpreting
   the variables, and the shell provides their
   values.</p>
</div>




<!-- .......................................................................................................................... -->
<h3 id="sectionIV.B">       IV.B.      Shell Options
   <span id="ShellOptions"> </span>
   <span id="shell-options"> </span>
   <span id="shell.options"> </span>
   <span id="shellOptions"> </span>
   <span id="shell_options"> </span>
   <span id="shelloptions"> </span>
</h3>

         <!-- ReUsableBegin: shell commands  ......................................................................  -->
         <p style="margin:.5em 1em .2em 6em; text-indent:-4em;">
         <span class="alarm">Warning:</span> SPEC CPU config files can execute <span class="caution"> arbitrary </span>
         <a class="external" href="config.html#shell" >shell</a> commands.
         <br />Read a config file before using it.
         <br />Don't be <a class="external" href="system-requirements.html#root" >root</a>.
         Don't run as <a class="external" href="system-requirements.html#root" >Administrator</a>.
         Turn privileges off.  </p>
         <!-- shell commands ReUsableEnd   ......................................................................  -->


<p>These options cause commands to be executed:</p>

<table>
   <tr>
      <td id="bench_post_setup" > <kbd>bench_post_setup</kbd> </td>
      <td colspan="2"><p class="snugtop">Command to be executed after each benchmark's run directory setup phase.  The <a
             class="external" href="runrules.html#post_setup">rules</a> say that this feature may be used to cause data to be
          written to stable storage (e.g. <kbd class="snugr">sync</kbd>).  The command must be the same for all benchmarks.  It will be run
          after each benchmark is setup, and for all workloads (test/train/ref).  It is not affected by the setting of <a
             href="#parallel_test">parallel_test</a>.</p>

         <p class="snugbot">Use the <a href="#headerSection">header section</a> for <kbd class="nbsnugr">bench_post_setup</kbd>.</p>
      </td>
   </tr>
   <tr>
      <td><kbd id="build_pre_bench">build_pre_bench</kbd>
         <br /><kbd id="build_post_bench">build_post_bench</kbd> </td>
      <td colspan="2">Commands for benchmark monitoring, described in the document on the <a class="external"
            href="monitors.html">Monitoring Facility</a>.</td>
   </tr>
   <tr>
      <td id="fdo_make_cleanN" > <kbd>fdo_make_clean_passN</kbd> 
         <span id="Fdo-shell-commands"> </span>   <span id="Fdo-shell-command"> </span>
         <span id="Fdo.shell.commands"> </span>   <span id="Fdo.shell.command"> </span>
         <span id="FdoShellCommands"> </span>     <span id="FdoShellCommand"> </span>
         <span id="Fdo_shell_commands"> </span>   <span id="Fdo_shell_command"> </span>
         <span id="Fdoshellcommands"> </span>     <span id="Fdoshellcommand"> </span>
         <span id="fdo-shell-commands"> </span>   <span id="fdo-shell-command"> </span>
         <span id="fdo.shell.commands"> </span>   <span id="fdo.shell.command"> </span>
         <span id="fdoShellCommands"> </span>     <span id="fdoShellCommand"> </span>
         <span id="fdo_shell_commands"> </span>   <span id="fdo_shell_command"> </span>
         <span id="fdoshellcommands"> </span>     <span id="fdoshellcommand"> </span>

         <span id="Fdo-options"> </span>          <span id="Fdo-option"> </span>
         <span id="Fdo.options"> </span>          <span id="Fdo.option"> </span>
         <span id="FdoOptions"> </span>           <span id="FdoOption"> </span>
         <span id="Fdo_options"> </span>          <span id="Fdo_option"> </span>
         <span id="Fdooptions"> </span>           <span id="Fdooption"> </span>
         <span id="fdo-options"> </span>          <span id="fdo-option"> </span>
         <span id="fdo.options"> </span>          <span id="fdo.option"> </span>
         <span id="fdoOptions"> </span>           <span id="fdoOption"> </span>
         <span id="fdo_options"> </span>          <span id="fdo_option"> </span>
         <span id="fdooptions"> </span>           <span id="fdooption"> </span>

         <span id="Fdo-commands"> </span>         <span id="Fdo-command"> </span>
         <span id="Fdo.commands"> </span>         <span id="Fdo.command"> </span>
         <span id="FdoCommands"> </span>          <span id="FdoCommand"> </span>
         <span id="Fdo_commands"> </span>         <span id="Fdo_command"> </span>
         <span id="Fdocommands"> </span>          <span id="Fdocommand"> </span>
         <span id="fdo-commands"> </span>         <span id="fdo-command"> </span>
         <span id="fdo.commands"> </span>         <span id="fdo.command"> </span>
         <span id="fdoCommands"> </span>          <span id="fdoCommand"> </span>
         <span id="fdo_commands"> </span>         <span id="fdo_command"> </span>
         <span id="fdocommands"> </span>          <span id="fdocommand"> </span>

      </td>
      <td>Commands to be executed for cleanup at pass N.</td>
      <td rowspan="8" style="padding:0px 2em;vertical-align:middle;">
         <p>The <kbd>fdo_</kbd> options let you use a wide variety of Feedback Directed Optimization (FDO) models, including
         compiler-based and non-compiler-based instrumentation and optimization using single and multi-pass builds.  </p>
         <p>When you are trying to decide which of these hooks to use, <a class="external" href="runcpu.html#fake">--fake</a>
         is your friend.  See the examples in the section on <a href="#UsingFeedback">Using Feedback</a></p>
         <p>Your changes must comply with the <a href="runrules.html" class="external">rules</a>, such as the requirement to
         use the SPEC-supplied training data.  If in doubt, you may <a class="external"
         href="techsupport.html">write to SPEC</a>.</p>  </td>
   </tr>

   <tr>
      <td id="fdo_make_passN" > <kbd>fdo_make_passN</kbd> </td>
      <td>Commands to actually do the Nth compile.  </td>
   </tr>
   <tr>
      <td id="fdo_postN" > <kbd>fdo_postN</kbd> </td>
      <td>Commands to be done at the end of pass N.</td>
   </tr>
   <tr>
      <td id="fdo_post_makeN" > <kbd>fdo_post_makeN</kbd> </td>
      <td>Commands to be done after the Nth compile.</td>
   </tr>
   <tr>
      <td id="fdo_pre0" ><kbd>fdo_pre0</kbd></td>
      <td style="white-space:nowrap;">Commands to execute before starting an FDO series. </td>
   </tr>
   <tr>
      <td id="fdo_preN" > <kbd>fdo_preN</kbd> </td>
      <td>Commands to be executed before pass N.</td>
   </tr>
   <tr>
      <td id="fdo_pre_makeN" > <kbd>fdo_pre_makeN</kbd> </td>
      <td>Commands to be done prior to Nth compile.</td>
   </tr>
   <tr>
      <td id="fdo_runN" > <kbd id="fdo_run">fdo_runN</kbd> </td>
      <td>Commands to be used for Nth training run.</td>
   </tr>

   <tr>
      <td id="monitor" > <kbd>monitor_X</kbd> </td>
      <td colspan="2">Commands that allow benchmark monitoring, described in the document on the <a class="external"
            href="monitors.html">Monitoring Facility</a>.</td>
   </tr>
   <tr>
      <td id="post_setup"> <kbd>post_setup</kbd> </td>
      <td colspan="2"><p class="snug">Command to be executed after all benchmark run directories have been set up.  The <a
             class="external" href="runrules.html#post_setup">rules</a> say that this feature may be used to cause data
          to be written to stable storage (e.g. <kbd class="snugr">sync</kbd>).</p>

         <p class="snug">Notes: </p>
         <ol class="snug">
            <li>This option may only be specified in the <a href="#headerSection">header section</a>.</li>
            <li>The <kbd class="nb">post_setup</kbd> option is not executed if <a
                  href="#minimize_rundirs">minimize_rundirs</a> is set.  </li>
            <li>If <a href="#parallel_test">parallel_test</a> is greater than 1, <kbd class="nb">post_setup</kbd> is not
               executed for test and train.  </li>
         </ol>

      </td>
   </tr>

   <tr>
      <td id="submit"> <kbd>submit</kbd> </td>
      <td colspan="2"><p class="snugtop">Modified command to actually run a benchmark.  The default is in <a
            href="#command">${command}</a>, which the <a class="external" href="runrules.html#submit">rules</a> allow you to
         supplement, by sending it to the desired location, such as a particular processor.</p>
         <p class="snugbot">Several features are typically
         used in conjunction with <kbd class="snugr">submit</kbd>:</p>
         <ul class="snug">
            <li><a href="#SPECCOPYNUM">$SPECCOPYNUM</a> - job number</li>
            <li><a href="#BIND">$BIND</a> - processor number (or other identifier for destination).</li>
            <li><p class="snug"><a href="#command_add_redirect">command_add_redirect</a> - determines whether redirection
               operators (such as <kbd>&lt;this_benchmark.in</kbd> or <kbd class="snugr">&gt;that_benchmark.out</kbd>) are
               applied to your entire modified <kbd>submit</kbd> command (the default) or just to the portion that has
               <kbd class="snugr">${command}</kbd>.
               <br />In pseudo-code: </p>
               <table style="margin-left:3em;" class="noborder">
                  <tr>
                     <td colspan="2">A <a href="#bind">bind</a> list has processor numbers <i>n</i>; a benchmark runs
                        <i>exe</i>; it sends output to <i>out</i>.  </td>
                  </tr>
                  <tr>
                     <td>If you use:</td>
                     <td><pre class="snug">submit = send_job job="${command}" cpu_id=$BIND</pre></td>
                  </tr>
                  <tr>
                     <td style="text-align:right;" >&nbsp;&nbsp;&nbsp;Do you prefer this? </td>
                     <td><pre class="snug">         send_job job="<i>exe</i> &gt;<i>out</i>" cpu_id=<i>n</i></pre></td>
                  </tr>
                  <tr>
                     <td style="text-align:right;">Or this?</td>
                     <td><pre class="snug">         send_job job="<i>exe</i>" cpu_id=<i>n</i> &gt;<i>out</i></pre></td>
                  </tr>
               </table>
               <p class="snug">The above is only pseudo-code; see the section on <a href="#usingSubmit">Using Submit</a>
               for real examples.</p>
            </li>
         </ul>
      </td>

   </tr>
</table>






<!-- .......................................................................................................................... -->
<h3 id="sectionIV.C">       IV.C.      Using submit
   <span id="UsingSubmit"> </span>
   <span id="using-submit"> </span>
   <span id="using.submit"> </span>
   <span id="usingSubmit"> </span>
   <span id="using_submit"> </span>
   <span id="usingsubmit"> </span>
</h3>



<p>The config file feature <a href="#submit">submit</a> allows you to distribute jobs across a multiprocessor system.  This
section provides examples to demonstrate how <kbd>submit</kbd> works with several other config file features.  You might also want
to search published results at <a class="external" href="https://www.spec.org/cpu2017/">www.spec.org/cpu2017</a> for systems
that are similar to your system. </p>



<!-- .......................................................................................................................... -->
<h4 id="sectionIV.C.1">     IV.C.1.    Basic usage of submit
</h4>



<p>You can use your operating system's facilities that assign jobs to processors, such as <kbd class="nbsnugr">dplace</kbd>,
<kbd class="nbsnugr">pbind</kbd>, <kbd class="nbsnugr">procbind</kbd>, <kbd class="nbsnugr">prun</kbd>, <kbd
class="nbsnugr">start/affinity</kbd>, or <kbd class="nb">taskset</kbd> together with <a href="#command">${command}</a> and <a
href="#SPECCOPYNUM">$SPECCOPYNUM</a>.  </p>

<div class="exHeader" id="submitExample1"><span><b>Submit Example 1:</b> <kbd>${command}</kbd> and <kbd>$SPECCOPYNUM</kbd></span></div>
<p class="l1snug">The example below runs 4 copies, sending each one to a different processor.</p>

<pre class="l2snugish">$ <b>cat taskset.cfg </b>
copies   = 4
runlist  = 519.lbm_r
submit   = taskset -c $SPECCOPYNUM ${command}
$ <b>cat taskset.sh</b>
runcpu --fake --config=taskset | grep '^taskset' | cut -b 1-75
$ <b>./taskset.sh </b>
taskset -c 0 ../run_base_refrate_none.0000/lbm_r_base.none 3000 reference.d
taskset -c 1 ../run_base_refrate_none.0000/lbm_r_base.none 3000 reference.d
taskset -c 2 ../run_base_refrate_none.0000/lbm_r_base.none 3000 reference.d
taskset -c 3 ../run_base_refrate_none.0000/lbm_r_base.none 3000 reference.d
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
<p class="l1snugtop">Notice that <kbd class="nb">$SPECCOPYNUM</kbd> acquires the values 0, 1, 2, 3 in the generated
commands, thereby using a different <kbd>taskset</kbd> assignment for each.</p>

<p>A problem with the above example: you might not want to send copy #2 to processor #2 and copy #3 to processor #3.
<br />Perhaps you have a system with
processors that do not have contiguous ID numbers.
<br />Perhaps you want to spread the work out across a system, or you want to
alternate jobs in ping-pong fashion.
<br />You can customize the destinations with a <a href="#bind">bind</a> list.</p>

<div class="exHeader" id="submitExample2"><span><b>Submit Example 2:</b> Using a <kbd>bind</kbd> list </span>  </div>
<p class="l1snug">A system has 512 virtual processors, 64 chips, 4 cores per chip, 2 threads per core.
<br />We would like to run one copy per chip.
<br />This system does processor binding using <kbd class="nb">pbind -b <i>processor</i> -e <i>command</i></kbd>
<br />The <a href="#bind">bind</a> statement on lines 1 through 5 specifies one processor id from each chip.
<br />Line 11 plugs them into <a href="#BIND">$BIND</a></p>

<pre class="l2snugish">$ <b>cat -n pbind.cfg</b>
     1  bind = \
     2       0   8  16  24  32  40  48  56  64  72  80  88  96 104 112 120 \
     3     128 136 144 152 160 168 176 184 192 200 208 216 224 232 240 248 \
     4     256 264 272 280 288 296 304 312 320 328 336 344 352 360 368 376 \
     5     384 392 400 408 416 424 432 440 448 456 464 472 480 488 496 504
     6  copies               = 64
     7  iterations           = 1
     8  output_root          = /tmp/pbind
     9  runlist              = 519.lbm_r
    10  size                 = test
    11  submit               = pbind -b $BIND -e ${command}
    12  verbose              = 40
    13  default:
    14     CC                = cc
    15     CC_VERSION_OPTION = -V
    16
$ <b>cat pbind.sh</b>
runcpu --config=pbind &gt; /dev/null &amp;  # put runcpu in background
sleep 15                             # let things get started
pbind -q &gt; /tmp/pbind/bound          # query bindings
$ <b>./pbind.sh</b>
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
<p class="l1snug">The <kbd>pbind.sh</kbd> script starts the run, waits 15 seconds, and then checks the status with
<kbd class="nbsnugr">pbind -q</kbd>.
<br />Below, we verify that all 64 copies were bound: <kbd class="nb">/tmp/pbind/bound</kbd> has 64 lines. A few are
shown.</p>
<pre class="l2snugish">$ <b>wc -l /tmp/pbind/bound</b>
      64 /tmp/pbind/bound
$ <b>sort -nk8 /tmp/pbind/bound | head -6</b>
pbind(1M): pid 22673 strongly bound to processor(s) 0.
pbind(1M): pid 22675 strongly bound to processor(s) 8.
pbind(1M): pid 22682 strongly bound to processor(s) 16.
pbind(1M): pid 22693 strongly bound to processor(s) 24.
pbind(1M): pid 22689 strongly bound to processor(s) 32.
pbind(1M): pid 22685 strongly bound to processor(s) 40.
</pre>


<!-- .......................................................................................................................... -->
<h4 id="sectionIV.C.2">     IV.C.2.    Script generation by submit
</h4>



<p>Although <a href="#submitExample2">Example 2</a> sent 64 copies where we want them, we only know that because a separate
process happened to be watching.
<br />That's not good enough.  It would be much better to always leave confirmation that <kbd>submit</kbd> does what is intended.
<br />To do so, generate a small script for each copy.</p>

<div class="exHeader" id="submitExample3"><span><b>Submit Example 3:</b> Generating scripts and <kbd>command_add_redirect</kbd></span>  </div>
<p class="l1snug">This example uses <kbd>echo</kbd> to create a script called <kbd>dobmk</kbd> for each benchmark copy.
<br />Line 12 writes a processor binding command to the script.
<br />Line 13 appends the <a href="#command">${command}</a> that executes the benchmark.
<br />Line 14 actually runs it.</p>

<pre class="l2snugish">$ <b>cat -n scriptGen.cfg </b>
     1  bind = \
     2       0   8  16  24  32  40  48  56  64  72  80  88  96 104 112 120 \
     3     128 136 144 152 160 168 176 184 192 200 208 216 224 232 240 248 \
     4     256 264 272 280 288 296 304 312 320 328 336 344 352 360 368 376 \
     5     384 392 400 408 416 424 432 440 448 456 464 472 480 488 496 504
     6  command_add_redirect = yes
     7  copies               = 64
     8  iterations           = 1
     9  output_root          = /tmp/pbind
    10  runlist              = 519.lbm_r
    11  size                 = test
    12  submit0              = echo 'pbind -b $BIND \$\$ &gt;&gt; pbind.out' &gt; dobmk
    13  submit2              = echo "${command}" &gt;&gt; dobmk
    14  submit4              = sh dobmk
    15  default:
    16     CC                = cc
    17     CC_VERSION_OPTION = -V
    18
$ <b>cat scriptGen.sh</b>
runcpu --config=scriptGen | grep copies
$ <b>./scriptGen.sh </b>
  Setting up 519.lbm_r test base none (64 copies): run_base_test_none.0000-0063
  Running 519.lbm_r test base none (64 copies) [2017-02-10 16:05:16]
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>

<p class="l1snugbot">A generated <kbd>dobmk</kbd> is below.  Copy #42 gets bound to processor id 336, which is #42 in the
<a href="#bind">bind</a> list.

<br />Notice that <kbd>dobmk</kbd> includes redirection operators, such  as <kbd class="nb">&gt;lbm.out</kbd>
<br />The operators are present because config file line 6 sets <a href="#command_add_redirect">command_add_redirect</a>.
</p>

<pre class="l2snugish">$ <b>cd /tmp/pbind/benchspec/CPU/519.lbm_r/run</b>
$ <b>cat run_base_test_none.0042/dobmk </b>
pbind -b 336 $$ &gt;&gt; pbind.out
../run_base_test_none.0000/lbm_r_base.none 20 reference.dat 0 1
             100_100_130_cf_a.of &gt; lbm.out 2&gt;&gt; lbm.err
$  <span style="font-size:small"><i>[line wrap added for readability]</i></span> </pre>

<p class="l1snugtop">All copies run the same benchmark binary, namely the one in directory 0000.
<br />The name of the executable is <kbd>lbm_r_base.none</kbd> because <a href="#label">label</a> defaults to <kbd>none.</kbd>
</p>
<p class="l1snug">Lastly, we can verify that the <kbd>pbind</kbd> command worked by looking at <kbd>pbind.out:</kbd></p>
<pre class="l2snugish">$ <b>cat run_base_test_none.0042/pbind.out </b>
pbind(1M): pid 24422 strongly bound to processor(s) 336.
$ </pre>

<p>The next example generates scripts for <kbd class="snugr">numactl</kbd>.</p>


<div class="exHeader" id="submitExample4"><span><b>Submit Example 4:</b> Generating a script for <kbd>numactl</kbd></span>  </div>
<p class="l1snug">   On line 9, the config file creates a runcpu <a href="#runcpuVariable">variable</a> called
<kbd class="snugr">numactlShow</kbd> which contains within it the command to demonstrate processor assignment.
It is written to <kbd>dobmk</kbd> along with the command to actually run the benchmark on lines 10-11.  On line 12,
<kbd>dobmk</kbd> is invoked. </p>

<pre class="l2snugish">$ <b>cat -n numactl.cfg</b>
     1  iterations              = 1
     2  output_root             = /tmp/numactl
     3  size                    = test
     4  tune                    = base
     5  verbose                 = 40
     6  default: # --------- submit stuff ----------------------------------------
     7     bind                 = 2,  3,  5,  7, 11, 13, 17, 19, 23, 29, 31
     8     command_add_redirect = yes
     9     numactlShow          = numactl --show | grep phys &gt;&gt; numactl-s.out 2&gt;&amp;1
    10     submit0              = echo "$[numactlShow]"        &gt; dobmk
    11     submit3              = echo "${command}"           &gt;&gt; dobmk
    12     submit5              = numactl --physcpubind=$BIND sh dobmk
    13  default: #---------- compiler stuff --------------------------------------
    14     CC                   = gcc
    15     CC_VERSION_OPTION    = -v
    16     OPTIMIZE             = -O3
    17  intrate: #---------- suite stuff -----------------------------------------
    18     copies               = 11
    19
$ <b>cat numactl.sh</b>
runcpu --config=numactl --fake 557.xz_r | grep "The log for this run"
runcpu --config=numactl        557.xz_r | grep txt
$ <b>./numactl.sh</b>
The log for this run is in /tmp/numactl/result/CPU2017.001.log
    format: Text -&gt; /tmp/numactl/result/CPU2017.002.intrate.test.txt
</pre>

<p class="l1snug">When the compression program 557.xz_r runs its test workload, the benchmark binary is actually run 11
times, as it tests various types of compression.  We can see the evidence of that if we look at a sample run directory.
Notice that all 11 invocations of copy #9 used processor #9 from the bind list on line 7 of the config file.</p>

<pre class="l2snugish">$ <b>cd /tmp/numactl/benchspec/CPU/557.xz_r/run</b>
$ <b>cd run_base_test_none.0009</b>
$ <b>cat numactl-s.out</b>
physcpubind: 29
physcpubind: 29
physcpubind: 29
physcpubind: 29
physcpubind: 29
physcpubind: 29
physcpubind: 29
physcpubind: 29
physcpubind: 29
physcpubind: 29
physcpubind: 29
physcpubind: 29
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>






<!-- .......................................................................................................................... -->
<h4 id="sectionIV.C.3">     IV.C.3.    Quoting and traps for the unwary
   <span id="Quote-traps"> </span>
   <span id="Quote.traps"> </span>
   <span id="QuoteTraps"> </span>
   <span id="Quote_traps"> </span>
   <span id="Quotetraps"> </span>
   <span id="quote-traps"> </span>
   <span id="quote.traps"> </span>
   <span id="quoteTraps"> </span>
   <span id="quote_traps"> </span>
   <span id="quotetraps"> </span>

   <span id="Quoting-traps"> </span>
   <span id="Quoting.traps"> </span>
   <span id="QuotingTraps"> </span>
   <span id="Quoting_traps"> </span>
   <span id="Quotingtraps"> </span>
   <span id="quoting-traps"> </span>
   <span id="quoting.traps"> </span>
   <span id="quotingTraps"> </span>
   <span id="quoting_traps"> </span>
   <span id="quotingtraps"> </span>

</h4>



<p class="snugbot">Submit <a href="#submitExample3">Example 3</a> uses three types of quoting: backslashes, single quotes,
and double quotes.  </p>
<pre class="l1snugish">
submit0 = echo 'pbind -b $BIND \$\$ &gt;&gt; pbind.out' &gt; dobmk
submit2 = echo "${command}" &gt;&gt; dobmk
submit4 = sh dobmk
</pre>
<p class="snugtop">The details of the quoting may seem like more than what you want to know, but can be crucial if you develop or
maintain <kbd class="nb">submit</kbd> options.  <span class="caution">Caution: here be traps.</span> Quote carefully, then
<a href="#submitTips">check</a>  whether it did what you think it did.  </p>

<p class="hanging1snugbot"><kbd><b>""</b></kbd> Double quotes are used on the <kbd>submit2</kbd> line.  They  do not prevent
interpretation of <a href="#command">${command}</a> because runcpu pays no particular attention to double or single
quotes.  The command to run <kbd>lbm_r_base.none</kbd> is inserted with its arguments <a href="#command_add_redirect">and device
assignments</a>, and the double quotes are still present when the <kbd>echo</kbd> executes, where they protect the device
assignments. </p>

   <p class="l1snugbot">For example, here is the
   <kbd>echo</kbd> command from
copy&nbsp;#42&nbsp;<a style="font-size:small;" href="#copy42"><i>(how was this found?)</i></a>
<span style="font-size:small"> <i>[line wrap added
         for readability]</i></span>:</p>
<pre class="l2snugish">echo "../run_base_test_none.0000/lbm_r_base.none 20 reference.dat 0
   1 100_100_130_cf_a.of &gt; lbm.out 2&gt;&gt; lbm.err" &gt;&gt; dobmk;</pre>

<p class="l1snug">
<span class="caution">TRAP:</span>
If you forget the double quotes, you effectively say:</p>
<p class="l2snug">
<i>"Please do an echo.
<br />Send standard output to <kbd>lbm.out.</kbd>
<br />Send standard error to <kbd>lbm.err.</kbd>
<br />No, wait, send standard output to <kbd class="snugr">dobmk.</kbd>"</i>
</p>
<p class="l1snug">Your operating system does whatever it does with such an odd request; a likely result is that
<kbd>lbm.out</kbd> is created by the <kbd class="snugr">echo</kbd>, but it has zero bytes, because <kbd>lbm_r_base.none</kbd>
is <i>not</i> told to write there.</p>

<p class="hanging1"><kbd><b>\$\$</b></kbd> On the <kbd>submit0</kbd> line, the designator for the current process is quoted using
backslashes to prevent <kbd class="nb">runcpu</kbd> from trying to interpret it.
<br /><a href="#BIND">$BIND</a> does not have a backslash, because we <i>do</i> want runcpu to substitute values from the
<a href="#bind">bind</a> list.
<br /><span class="caution">TRAP:</span> If the <kbd>submit0</kbd> uses <kbd>$$</kbd> (without backslashes),
runcpu substitutes its own process ID, and 64 <kbd>dobmk</kbd> scripts fight uselessly about the location of <kbd
class="snugr">runcpu</kbd>.
</p>

<p class="hanging1snugbot"><kbd><b>''</b></kbd> The <kbd>submit0</kbd> line also uses single quotes, which are still present
when the <kbd>echo</kbd> is done.
<br />By then, <kbd>$BIND</kbd> has already been substituted, and <kbd>\$\$</kbd> has become <kbd>$$.</kbd>
<br />The single quotes prevent <kbd>$$</kbd> substitution by the parent shell that runs <kbd class="snugr">echo</kbd>.  </p>

<p class="l1snugbot">For example, here is what runcpu generated for
copy&nbsp;#42&nbsp;<a style="font-size:small;" href="#copy42"><i>(how was this found?)</i></a>
</p>
<pre class="l2snugish">echo 'pbind -b 336 $$ &gt;&gt; pbind.out' &gt; dobmk</pre>

<p class="l1snugish">
<span class="caution">TRAP:</span>
If double quotes are used on <kbd>submit0</kbd> instead of single quotes, an interesting bug happens: the
parent shell pid is inserted, <kbd class="nb">dobmk</kbd> runs, and obediently binds its parent to a processor.  It
does not bind <span class="u">itself</span>. (<i>"Wait, wait"</i>, you say, <i>"Bindings are inherited, so binding the parent
should be fine, right?"</i>  Well, no.  Bindings are inherited only for newly created processes.  Binding your parent doesn't
do a thing for yourself.  So, you definitely want the <kbd class="nb">$$</kbd> to become
<kbd class="nbsnugr">dobmk</kbd>'s PID, not its parent's.)</p>


<!-- .......................................................................................................................... -->
<h4 id="sectionIV.C.4">     IV.C.4.    Debug tips for submit
   <span id="SubmitDebug"> </span>
   <span id="submit-debug"> </span>
   <span id="submit.debug"> </span>
   <span id="submitDebug"> </span>
   <span id="submit_debug"> </span>
   <span id="submitdebug"> </span>
   <span id="DebugSubmit"> </span>
   <span id="debug-submit"> </span>
   <span id="debug.submit"> </span>
   <span id="debugSubmit"> </span>
   <span id="debug_submit"> </span>
   <span id="debugsubmit"> </span>
   <span id="DebugTips"> </span>
   <span id="debug-tips"> </span>
   <span id="debug.tips"> </span>
   <span id="debugTips"> </span>
   <span id="debug_tips"> </span>
   <span id="debugtips"> </span>
   <span id="SubmitTips"> </span>
   <span id="submit-tips"> </span>
   <span id="submit.tips"> </span>
   <span id="submitTips"> </span>
   <span id="submit_tips"> </span>
   <span id="submittips"> </span>
</h4>



<ol>
   <li><p>Start small.  Try to debug your options for a run with, say, 3 copies before trying 2048.</p></li>

   <li><p>When debugging <kbd class="nb">submit</kbd> options, increase the log <a href="#verbose">verbose</a> option.</p>
   </li>

   <li>Pick methods that leave evidence behind.  If you generate little scripts (like <kbd>dobmk</kbd> <a
       href="#submitExample3">above</a>), they can be examined.</li>

   <li><p>Capture standard output from your processor assignment command (e.g. <kbd>pbind.out</kbd> from line 12 of
      <a href="#submitExample3">Example 3</a>).  (It would also be a very good idea to capture standard error.)</p>  </li>

   <li><p id="copy42" class="snugbot">Use the <a href="utility.html#specinvoke" class="external">specinvoke -n</a> dry run
      option.  On the system where <a href="#submitExample3">Example 3</a> was run, a <kbd>grep</kbd> verifies that there are
      64 generated <kbd>pbind</kbd> commands.  Another <kbd>grep</kbd> picks out the one that belongs to copy #42, using <kbd
         class="nb">head -43.</kbd>  Copy #42 is, of course, the 43rd copy to run, because copy #0 is the first.</p>

      <pre class="l2snugish">$ <b>pwd</b>
/tmp/pbind/benchspec/CPU/519.lbm_r/run/run_base_test_none.0000
$ <b>specinvoke -n | grep -c pbind</b>
64
$ <b>specinvoke -n | grep pbind | head -43 | tail -1</b>
echo 'pbind -b 336 $$ &gt;&gt; pbind.out' &gt; dobmk;
echo "../run_base_test_none.0000/lbm_r_base.none 20 reference.dat 0
   1 100_100_130_cf_a.of &gt; lbm.out 2&gt;&gt; lbm.err" &gt;&gt; dobmk;
sh dobmk
$ </pre>

      <p>(Because runcpu generates very wide lines, line wraps were inserted for readability.)</p>

   </li>
</ol>




<!-- .......................................................................................................................... -->
<h4 id="sectionIV.C.5">     IV.C.5.    Maintainability suggestions when using submit
   <span id="Maintainability"> </span>
   <span id="maintainability"> </span>
</h4>



<p>Here are two maintainability suggestions for authors of config files that use <a href="#submit">submit</a>.</p>

<ul>
   <li><p>If you have followed the <a href="#submitDebug">debug</a> suggestions above, you possess evidence that your
      config file works as desired -- today.  Preserve the evidence.  For example, if you are generating little <kbd>dobmk</kbd>
      scripts, and they generate little tidbits on stdout or stderr to verify processor assignments, keep the tidbits.
      Resist the temptation to rip them out.  They provide cheap insurance against mysterious failures, for example when a new
      operating system changes the environment.</p></li>

   <li><p>Although runcpu generates very wide lines, you should not.  Your config file will be more
      maintainable if you limit your line width. </p> </li>
</ul>

<p>To limit line width, you can use any of the three <a href="#lineContinuation">continuation</a> styles discussed at the top of
this document.</p>

<p class="l1snugbot">All three styles are used in this config file.  All have the same effect.</p>

<div class="exHeader" id="submitExample5"><span><b>Submit Example 5:</b> Line continuation</span></div>

<pre class="l2snugish">$ <b>cat -n continued.cfg</b>
     1  command_add_redirect = yes
     2  copies               = 8
     3  iterations           = 1
     4  output_root          = /tmp/submit
     5  runlist              = 505.mcf_r
     6  size                 = test
     7  use_submit_for_speed = yes
     8  default:
     9     CC                = cc
    10     CC_VERSION_OPTION = -V
    11  intrate=base=backslash:
    12     submit0 = echo 'pbind -b $SPECCOPYNUM \$\$ &gt;&gt; pbind.out' &gt; dobmk \
    13               echo "${command}" &gt;&gt; dobmk \
    14               sh dobmk
    15  intrate=base=fieldN:
    16     submit0 = echo 'pbind -b $SPECCOPYNUM \$\$ &gt;&gt; pbind.out' &gt; dobmk
    17     submit2 = echo "${command}" &gt;&gt; dobmk
    18     submit4 = sh dobmk
    19  intrate=base=heredoc:
    20     submit = &lt;&lt;EOT
    21               echo 'pbind -b $SPECCOPYNUM \$\$ &gt;&gt; pbind.out' &gt; dobmk
    22               echo "${command}" &gt;&gt; dobmk
    23               sh dobmk
    24  EOT
</pre>
<p class="l1snugish">To run the config file, the script below uses three <kbd>runcpu</kbd> commands with three different <a
   class="external" href="runcpu.html#label">--label</a> switches.  After the runs finish, it produces a list of
<kbd>dobmk</kbd> files that were generated, and prints a sample of each type.</p>
<pre class="l2snugish">$ <b>cat continued.sh</b>
runcpu --config=continued --label=backslash | grep copies
runcpu --config=continued --label=fieldN    | grep copies
runcpu --config=continued --label=heredoc   | grep copies
#
cd /tmp/submit/benchspec/CPU/505.mcf_r/run
ls *backslash*/dobmk
ls *fieldN*/dobmk
ls *heredoc*/dobmk
#
for file in *0007/dobmk ; do
   echo ==== $file =====
   cat $file
done
$ <b>./continued.sh </b>
  Setting up 505.mcf_r test base backslash (8 copies): run_base_test_backslash.0000-0007
  Running 505.mcf_r test base backslash (8 copies) [2017-02-11 07:38:32]
  Setting up 505.mcf_r test base fieldN (8 copies): run_base_test_fieldN.0000-0007
  Running 505.mcf_r test base fieldN (8 copies) [2017-02-11 07:40:55]
  Setting up 505.mcf_r test base heredoc (8 copies): run_base_test_heredoc.0000-0007
  Running 505.mcf_r test base heredoc (8 copies) [2017-02-11 07:43:15]

run_base_test_backslash.0000/dobmk  run_base_test_backslash.0004/dobmk
run_base_test_backslash.0001/dobmk  run_base_test_backslash.0005/dobmk
run_base_test_backslash.0002/dobmk  run_base_test_backslash.0006/dobmk
run_base_test_backslash.0003/dobmk  run_base_test_backslash.0007/dobmk
run_base_test_fieldN.0000/dobmk  run_base_test_fieldN.0004/dobmk
run_base_test_fieldN.0001/dobmk  run_base_test_fieldN.0005/dobmk
run_base_test_fieldN.0002/dobmk  run_base_test_fieldN.0006/dobmk
run_base_test_fieldN.0003/dobmk  run_base_test_fieldN.0007/dobmk
run_base_test_heredoc.0000/dobmk  run_base_test_heredoc.0004/dobmk
run_base_test_heredoc.0001/dobmk  run_base_test_heredoc.0005/dobmk
run_base_test_heredoc.0002/dobmk  run_base_test_heredoc.0006/dobmk
run_base_test_heredoc.0003/dobmk  run_base_test_heredoc.0007/dobmk

==== run_base_test_backslash.0007/dobmk =====
pbind -b 7 $$ &gt;&gt; pbind.out
../run_base_test_backslash.0000/mcf_r_base.backslash inp.in  &gt; inp.out 2&gt;&gt; inp.err

==== run_base_test_fieldN.0007/dobmk =====
pbind -b 7 $$ &gt;&gt; pbind.out
../run_base_test_fieldN.0000/mcf_r_base.fieldN inp.in  &gt; inp.out 2&gt;&gt; inp.err

==== run_base_test_heredoc.0007/dobmk =====
pbind -b 7 $$ &gt;&gt; pbind.out
../run_base_test_heredoc.0000/mcf_r_base.heredoc inp.in  &gt; inp.out 2&gt;&gt; inp.err
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>


<!-- ok, but not just at this instant
<p>XXX The ability to specify per-binary submit commands should probably be documented. XXX</p>
<p><kbd>submit_specdiff</kbd> would specify a different submit command to use with specdiff, but only if <a
   href="#use_submit_for_compare">use_submit_for_compare</a> is enabled, and if submit would have been used for the run anyway (i.e.
   it was a rate run or a speed run with use_submit_for_speed set).</p>
<p>Likewise, submit_imagevalidate_r would make a different submit command for when "imagevalidate_r" was run.</p>
<p>As is usual, if no specific one is set, the default will be used.  If no default is set, no submit command is used.</p>
-->



<!-- .......................................................................................................................... -->
<h4 id="sectionIV.C.6">     IV.C.6.    Reporting of submit usage

   <span id="Notes-submit"> </span>
   <span id="Notes.submit"> </span>
   <span id="NotesSubmit"> </span>
   <span id="Notes_submit"> </span>
   <span id="Notessubmit"> </span>
   <span id="notes-submit"> </span>
   <span id="notes.submit"> </span>
   <span id="notesSubmit"> </span>
   <span id="notes_submit"> </span>
   <span id="notessubmit"> </span>


</h4>



<p>If you use the <kbd class="nb">submit</kbd> feature, a notes section will automatically be created to indicate that
you have done so.  </p>
<pre>
                                 Submit Notes
                                 ------------
    The config file option 'submit' was used.
</pre>

<p class="snugbot">You can add notes to that section, or customize it as you wish, by creating lines with <kbd
   class="nbsnugr">notes_submit_NNN</kbd>.  The phrase <kbd>The config file option 'submit' was used</kbd> <b>must</b> appear
somewhere in your customized notes.  You can vary the capitalization of the phrase, you can even break it across multiple
lines; it just needs to be present.  If it is not, it will automatically be added. </p>


<div class="exHeader" id="submitExample6"><span><b>Submit Example 6:</b> Magical <samp>notes_submit</samp></span></div>
<p style="width:750px;" class="l1snug">The notes on lines 16-20 appear and disappear automatically depending on whether
<kbd>submit</kbd> is used. </p>

<pre class="l2snugish">$ <b>cat -n notes_submit.cfg </b>
     1  iterations              = 1
     2  output_root             = /tmp/notes_submit
     3  size                    = test
     4  verbose                 = 40
     5  default: # --------- submit stuff ----------------------------------------
     6     bind                 = &lt;&lt;EOT
     7                              2,  3,  5,  7, 11, 13, 17, 19, 23, 29, 31
     8                             37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79
     9                             83, 89, 97
    10  EOT
    11     command_add_redirect = yes
    12     numactlShow          = numactl --show | grep phys &gt;&gt; numactl-s.out 2&gt;&amp;1
    13     submit02             = echo '$[numactlShow]'        &gt; dobmk
    14     submit03             = echo '${command}'           &gt;&gt; dobmk
    15     submit05             = numactl --physcpubind=$BIND sh dobmk
    16     notes_submit_007     =
    17     notes_submit_011     = The config file option
    18     notes_submit_013     = 'submit' was used to prefer
    19     notes_submit_017     = prime processors.
    20     notes_submit_019     =
    21  default: #---------- compiler stuff --------------------------------------
    22     CC                   = gcc
    23     CC_VERSION_OPTION    = -v
    24     OPTIMIZE             = -O
    25  intrate: #---------- suite and benchmark stuff ---------------------------
    26     copies               = 21
    27  intspeed:
    28     use_submit_for_speed = yes
    29  657.xz_s=peak:
    30     EXTRA_OPTIMIZE       = -DSPEC_OPENMP -fopenmp
    31     use_submit_for_speed = no
    32     threads              = 29
    33
</pre>
<p class="l1snug" style="width:750px;"> The script below uses this config file for three <samp>runcpu</samp> commands:</p>
<ol class="l2snug">
   <li>Run a SPECrate Integer benchmark, <samp class="snugr">557.xz_r</samp>.  By default, SPECrate uses <samp>submit</samp>
      and therefore config file lines 5-20 apply.  </li>
   <li>Run base for the SPECspeed Integer benchmark <samp class="snugr">657.xz_s</samp>, using <samp>submit</samp> because of
      lines 27-28. </li>
   <li>Run peak for the SPECspeed Integer benchmark <samp class="snugr">657.xz_s</samp>, skipping <samp>submit</samp> because
      of line 31.</li>
</ol>
<p class="l1snug">After the 3 <samp>runcpu</samp> commands, various results are printed, as explained below.</p>
<pre class="l2snugish">$ <b>cat notes_submit.sh </b>
runcpu --config=notes_submit 557.xz_r --tune=base | grep txt
runcpu --config=notes_submit 657.xz_s --tune=base | grep txt
runcpu --config=notes_submit 657.xz_s --tune=peak | grep txt

echo
grep -C1 "to prefer" /tmp/notes_submit/result/CPU2017.00*txt

cd /tmp/notes_submit/benchspec/CPU/557.xz_r/run/
  num_dirs=$(ls -d run* | wc -l)
 num_dobmk=$(ls run*/dobmk | wc -l)
echo
echo 557.xz_r has $num_dirs run dirs and $num_dobmk dobmk scripts

cd /tmp/notes_submit/benchspec/CPU/657.xz_s/run/
      num_dirs_base=$(ls -d run*base* | wc -l)
      num_dirs_peak=$(ls -d run*peak* | wc -l)
 num_dobmk_base=$(ls run*base*/dobmk | wc -l)
 num_dobmk_peak=$(ls run*peak*/dobmk 2&gt;/dev/null | wc -l)
echo
echo "657.xz_s base has $num_dirs_base run dir(s) and $num_dobmk_base dobmk script(s)"
echo "657.xz_s peak has $num_dirs_peak run dir(s) and $num_dobmk_peak dobmk script(s)" </pre>
<p style="width:750px;" class="l1snugish">Notice that when <samp>grep</samp> searches for <samp>"to prefer"</samp> in the
generated reports, it finds that phrase from <samp>notes_submit</samp> in <samp>CPU2017.001.intrate.test.txt</samp> and in
<samp class="snugr">CPU2017.002.intspeed.test.txt</samp>, but not in <samp
      class="snugr">CPU2017.003.intspeed.test.txt</samp>:
</p>
<pre class="l2snugish">$ <b>./notes_submit.sh </b>
    format: Text -&gt; /tmp/notes_submit/result/CPU2017.001.intrate.test.txt
    format: Text -&gt; /tmp/notes_submit/result/CPU2017.002.intspeed.test.txt
    format: Text -&gt; /tmp/notes_submit/result/CPU2017.003.intspeed.test.txt

/tmp/notes_submit/result/CPU2017.001.intrate.test.txt-     The config file option
/tmp/notes_submit/result/CPU2017.001.intrate.test.txt:     'submit' was used to prefer
/tmp/notes_submit/result/CPU2017.001.intrate.test.txt-     prime processors.
--
/tmp/notes_submit/result/CPU2017.002.intspeed.test.txt-     The config file option
/tmp/notes_submit/result/CPU2017.002.intspeed.test.txt:     'submit' was used to prefer
/tmp/notes_submit/result/CPU2017.002.intspeed.test.txt-     prime processors.

557.xz_r has 21 run dirs and 21 dobmk scripts

657.xz_s base has 1 run dir(s) and 1 dobmk script(s)
657.xz_s peak has 1 run dir(s) and 0 dobmk script(s)
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>

<p class="l1snugtop">The final portion of the output shows that the run directories match the <samp
   class="snugr">notes</samp>.
<br />In short, when <samp>submit</samp> comes and goes, the notes magically do the same.</p>




<!-- .......................................................................................................................... -->
<h2 id="sectionV">          V.         Config file options for readers
</h2>



<p>Whether or not you send your result to SPEC, you should fully disclose how you achieved the result.  If it requires the
installation of the GoFastLinker, you should say so.  By setting the appropriate fields in the config file, you can cause
information about the GoFastLinker to appear in the reports that are intended for humans.</p>


<!-- .......................................................................................................................... -->
<h3 id="sectionV.A">        V.A.       Descriptive fields
</h3>



<p>Here are the fields that you can set to describe your testbed to readers:</p>

<table>


<tr>
   <td id="fw_bios" > <kbd>fw_bios</kbd> </td>
   <td><p class="snug">Customer-orderable name, version, and availability date for the system firmware (also sometimes
      called 'BIOS') on the System Under Test (SUT).  Document here whatever will most help someone who wants to reproduce
      your results.  Often, that will be the name of a firmware package from the vendor support web pages.  Include the
      date when the firwmare became generally available (which may be later than the build date).  </p>
      <p><b>Syntax:</b> The validator expects the
      field to include the phrase:</p>
      <pre class="l1snugish">Version &lt;id&gt; released MMM-YYYY </pre>
      <ul class="l1snugtop">
         <li>The words "Version" and "released" must appear. They can have a leading capital letter or not, as you wish.</li>
         <li>The &lt;id&gt; can be multiple words.</li>
      </ul>
      <p class="snugbot">Examples (either of these would work):</p>
      <pre class="l1snugish">fw_bios = Supermicro X10DRU-i+ BIOS version 2.0c released May-2017
fw_bios = Version 2.0c of Supermicro X10DRU-i+ BIOS. Released May-2017</pre>

      <p>If you need more space, you can add <a href="#notes_plat">platform notes</a>. </p>
<span class="new">The <kbd>fw_bios</kbd> field is new with CPU 2017.</span>
     </td>
</tr>

<tr>
   <td id="fw_management" > <kbd>fw_management</kbd> </td>
   <td><p class="snug">Customer-orderable name and version for the firmware of the system management controller (also sometimes
      referred to as 'BMC') on the System Under Test (SUT), or "None" if the SUT has no management device.  Document here whatever
      will most help someone who wants to reproduce your results.  Often, that will be the name of a firmware package from the
      vendor support web pages.  </p>
      <p><b>Syntax:</b> The validator expects the
      field to include the phrase:</p>
      <pre class="l1snugish">Version &lt;id&gt; of &lt;...&gt; </pre>
      <ul class="l1snugtop">
         <li>The words "Version" and "of" must appear.</li>
         <li>The &lt;id&gt; can be multiple words.</li>
         <li>The &lt;...&gt; can be multiple words, the first of which must appear with the version, on the first fw_management
            line.</li>
      </ul>
      <p class="snugbot">Example:</p>
      <pre class="l1snugish">fw_management = Version 2.2.3 of Sun Remote System Control (RSC)</pre>
      <p class="snugbot"><span class="new">The <kbd>fw_management</kbd> field is new with CPU 2017 v1.1.</span>  This field only 
      appears on reports for results where the energy metric appears.</p>
     </td>
</tr>

<tr>
   <td id="hw_avail" > <kbd>hw_avail</kbd> </td>
   <td>Date hardware first shipped.  If more than one date applies, use the LATEST one.</td>
</tr>

<tr>
   <td id="hw_backplane" > <kbd>hw_backplane</kbd> </td>
   <td><p class="snugtop">The description and part or model number of any back- or center-planes used to support different
      storage or CPU/memory options, if the system supports multiple options; or "N/A" if this field is Not Applicable.
      <span class="new">New</span> 
      </p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_cpu_max_mhz" > <kbd>hw_cpu_max_mhz</kbd> </td>
   <td>Maximum speed of the CPUs as specified by the chip vendor, in MHz.  
      For reportable runs, you must specify a value for both 
      <a href="#hw_cpu_max_mhz">hw_cpu_max_mhz</a> and 
      <a href="#hw_cpu_nominal_mhz">hw_cpu_nominal_mhz</a>.  
      <span class="new">The <kbd>hw_cpu_max_mhz</kbd> field is new with CPU 2017</span>
</td>
</tr>

<tr>
   <td id="hw_cpu_name" > <kbd>hw_cpu_name</kbd> </td>
   <td>Manufacturer-determined formal processor name.
      <br />If a system uses more than one chip type, separate them with a comma.
      (And of course the usual rules apply: the system, as tested, must be documented/supported/generally available.)</td>
</tr>

<tr>
   <td id="hw_cpu_nominal_mhz" > <kbd>hw_cpu_nominal_mhz</kbd> </td>
   <td>Speed of the CPUs as specified by the chip vendor, in MHz.
      For reportable runs, you must specify a value for both 
      <a href="#hw_cpu_max_mhz">hw_cpu_max_mhz</a> and 
      <a href="#hw_cpu_nominal_mhz">hw_cpu_nominal_mhz</a>.  
      <span class="new">The <kbd>hw_cpu_nominal_mhz</kbd> field is new with CPU 2017</span>
   </td>
</tr>

<tr>
   <td id="hw_disk" > <kbd>hw_disk</kbd> </td>
   <td><p class="snug">Disk subsystem for the SPEC run directories.  Three important <b>Notes</b>:</p>
   <ol class="snugbot">
   <li>Only a single file system may be used for the run directories, as described in the <a class="external"
       href="runrules.html#singleFileSystem">run rules</a>.</li>
   <li>If the <a href="#output_root">output_root</a> feature is used, its disk subsystem should be the one described
   here.</li>
   <li>Disks used for other purposes - such as the system disk - are usually not a performance-relevant variable, so need not
      be described.  Note that if you wish to do so, you can extend this field using the same <a
      href="#continuation">continuation rules</a> as other fields (so, you could use <kbd class="snugr">hw_disk01</kbd>,
   <kbd class="snugr">hw_disk02</kbd>, etc).</li>
   </ol>
   </td>
</tr>


<tr>
   <td id="hw_line_standard" > <kbd>hw_line_standard</kbd> </td>
   <td><p class="snugtop">Line standards for the main AC power as provided by the local utility company.
      <span class="new">New</span>
      <br />This field includes the standard voltage and frequency, followed by the number
      of phases and wires used to connect the SUT to the AC power line.</p>
      <p class="snugbot">Examples: </p>
      <pre class="l1snugish">hw_line_standard = 120 V / 60 Hz / 1 phase / 2 wire
hw_line_standard = 208 V / 50 Hz / 3 phase / 4 wire</pre>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>


<tr>
   <td id="hw_memory" > <kbd>hw_memory</kbd> </td>
   <td><p class="snugtop">Size of main memory (and other performance-relevant information about memory, as discussed in the
      <a class="external" href="runrules.html#MemoryConfig">run rules</a>.)</p>

      <p>Your entry in the field should usually begin <kbd>N GB (N x N GB</kbd>
      <br />Examples:
      <br /><kbd style="margin-left:2em;">512 GB (16 x 32 GB</kbd>
      <br /><kbd style="margin-left:2em;">1 TB (32 x 32 GB</kbd></p>

      <p class="snugbot">Within the parentheses, continue with the JEDEC label as printed on the DIMM.  </p>
      <ul>
         <li>For DDR4, this is typically <kbd>nRxn PC4-nnnnX-X</kbd>
            <br />Notice that DDR4 uses different units than DDR3, and
            does not need a separate designator for ECC. It's encoded in the label.
            <br />Examples:
            <br /><kbd style="margin-left:2em;">2Rx4 PC4-2133P-R</kbd>
            <br /><kbd style="margin-left:2em;">1Rx8 PC4-2133N-U</kbd></li>
         <li>For DDR3, this is typically <kbd>nRxn PC3-nnnnnX-n [ECC]</kbd>
            <br />Examples:
            <br /><kbd style="margin-left:2em;">1Rx8 PC3-10600R-9</kbd>
            <br /><kbd style="margin-left:2em;">2Rx4 PC3L-17000R-9 ECC</kbd></li>
      </ul>

      <p>Conclude the parenthetical with other performance-relevant information that may be needed to
      describe your memory.
      <br />Examples:
      <br /><kbd style="margin-left:2em;">, running at 1600)</kbd>  (e.g. for down-clocked DIMMs)
      <br /><kbd style="margin-left:2em;">, 16-way interleaved)</kbd> (a system where interleaving may vary and is
      performance relevant)
      <br /><kbd style="margin-left:2em;">, 8 DIMMs mirrored across 2 channels per node, 4 nodes per system)</kbd> (for a
      somewhat complicated layout).</p>

      <p>For thousands of examples, see the SPEC website published <a
                 class="external"
                 href="https://www.spec.org/cgi-bin/osgresults?conf=cpu2017&amp;op=fetch&amp;proj-COMPANY=0&amp;proj-SYSTEM=0&amp;proj-PEAK=0&amp;proj-BASE=256&amp;proj-ENERGYPEAK=0&amp;proj-ENERGYBASE=0&amp;proj-CORES=0&amp;proj-CHIPS=0&amp;proj-CPU=256&amp;proj-MEMORY=256&amp;proj-PUBLISH=0&amp;sort1=MEMORY&amp;sdir1=1&amp;sort2=CPU&amp;sdir2=1&amp;sort3=BASE&amp;sdir3=-1">results</a>.</p>

      <p class="snugbot">For more info about JEDEC, download the labelling standards.  These are free, but require registration, and may
      evolve from time to time.  Links valid as of May-2017 are: <a
         class="external"
         href="http://www.jedec.org/standards-documents/docs/pr-n09-nm1">"DDR3 DIMM Label"</a> and <a
         class="external"
         href="https://www.jedec.org/standards-documents/docs/module4_20_26">DDR4 SDRAM UDIMM Design Specification</a>,
      chapter 8. </p>
   </td>
</tr>

<tr>
   <td id="hw_memory_mode" > <kbd>hw_memory_mode</kbd> </td>
   <td><p class="snugtop">How the memory subsystem on the SUT is configured.  
      <span class="new">New</span>
      <br />This field can have one of three possible values:</p>
      <ul>
         <li>"Normal": Memory is configured without redundancy of any kind, and the complete installed capacity is available
            for use by the OS and user programs.</li>
         <li>"Mirrored": Memory is configured so that all locations are redundant and a failure of any installed piece of memory
            will not interrupt or pause system operation.</li>
         <li>"Spare": Memory is configured so that there is some extra capacity available so that memory from a failing component
            can be copied to the spare in the event of a partial failure.</li>
         <li>"Other (&lt;explanation&gt;)": Memory is configured in some other way, and a short explanation is provided.  The
            explanation can be expanded upon in the <a href="#notes_power">power settings notes</a>.</li>
      </ul>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_model" > <kbd>hw_model</kbd> </td>
   <td>Model name.</td>
</tr>

<tr>
   <td id="hw_nchips" > <kbd>hw_nchips</kbd> </td>
   <td>Number of CPU chips configured.  See the discussion of CPU counting in the <a class="external"
   href="runrules.html#CountCPUs">run rules</a>.</td>
</tr>

<tr>
   <td id="hw_ncores" > <kbd>hw_ncores</kbd> </td>
   <td>Number of CPU cores configured.  See the discussion of CPU counting in the <a class="external"
   href="runrules.html#CountCPUs">run rules</a>.</td>
</tr>

<tr>
   <td id="hw_ncpuorder" > <kbd>hw_ncpuorder</kbd> </td>
   <td>Valid number of processors orderable for this model, including a unit.  For example, "2, 4, 6, or 8 chips".</td>
</tr>

<tr>
   <td id="hw_nics" > <kbd>hw_nics</kbd> </td>
   <td><p class="snugtop">The number and model numbers of the network devices installed in the system.
      <span class="new">New</span>
      </p>
      <p><b>Syntax:</b> The validator expects the field to include at least one instance of:</p>
      <pre class="l1snugish">&lt;n&gt; x &lt;id&gt; @ &lt;speed&gt;[...]</pre>
      <ul class="l1snugtop">
         <li>&lt;n&gt; is the number of instances of this type or model of interface.</li>
         <li>"x" is literal text.</li>
         <li>The &lt;id&gt; is the type or model number and can be multiple words.</li>
         <li>"@" is literal text.</li>
         <li>The &lt;speed&gt; is a number and units describing the nominal speed of the interface.  For example, "100&nbsp;Mbps",
            "1&nbsp;GbE", and "8&nbsp;Gbps&nbsp;(DDR)" would all be valid values for &lt;speed&gt;.</li>
      </ul>
      <p class="snugbot">Example:</p>
      <pre class="l1snugish">hw_nics = 2 x on-board @ 1 GbE; 4 x Mellanox ConnectX 5 @ 200 Gbps</pre>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.
      </p>
   </td>
</tr>

<tr>
   <td id="hw_nics_connected" > <kbd>hw_nics_connected</kbd> </td>
   <td><p class="snugtop">The number of network interfaces physically connected to networks and the speeds at which they are 
      connected.
      <span class="new">New</span>
      </p>
      <p><b>Syntax:</b> The validator expects the field to include at least one instance of:</p>
      <pre class="l1snugish">&lt;n&gt; @ &lt;speed&gt; &lt;unit&gt;[...]</pre>
      <ul class="l1snugtop">
         <li>&lt;n&gt; is the number of instances connected at this speed.</li>
         <li>"@" is literal text.</li>
         <li>The &lt;speed&gt; and &lt;unit&gt; together describe the actual negotiated speed on the network link.</li>
      </ul>
      <p class="snugbot">Example:</p>
      <pre class="l1snugish">hw_nics_connected = 1 @ 1 Gbps</pre>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.
      </p>
   </td>
</tr>

<tr>
   <td id="hw_nics_enabled" > <kbd>hw_nics_enabled</kbd> </td>
   <td><p class="snugtop">The number of network interfaces enabled at the firmware level and configured in the operating system.
      <span class="new">New</span>
      </p>
      <p><b>Syntax:</b> The validator expects the field to consist of:</p>
      <pre class="l1snugish">&lt;n&gt; / &lt;m&gt;</pre>
      <ul class="l1snugtop">
         <li>&lt;n&gt; is the number of instances enabled at the firmware level; interfaces not enabled at the firmware level are
            not expected to be visible to the operating system.</li>
         <li>"/" is literal text.</li>
         <li>&lt;m&gt; is the number of instances configured for use by the operating system.</li>
      </ul>
      <p class="snugbot">Example:</p>
      <pre class="l1snugish">hw_nics_enabled = 2 / 1</pre>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.
      </p>
   </td>
</tr>

<tr>
   <td id="hw_nthreadspercore" > <kbd>hw_nthreadspercore</kbd> </td>
   <td>Number of hardware threads per core.  See the discussion of CPU counting in the <a class="external"
   href="runrules.html#CountCPUs">run rules</a>.</td>
</tr>

<tr>
   <td id="hw_ocache" > <kbd>hw_ocache</kbd> </td>
   <td>4th level or other form of cache. </td>
</tr>

<tr>
   <td id="hw_other" > <kbd>hw_other</kbd> </td>
   <td>Any other performance-relevant hardware.</td>
</tr>

<tr>
   <td id="hw_other_model" > <kbd>hw_other_model</kbd> </td>
   <td><p class="snugtop">Name and model numbers of other hardware present in the system that consumes power but does not
      contribute to the performance of the system (and would thus be documented in <a href="#hw_other">hw_other</a>), or
      "None" if there isn't any.  
      <span class="new">New</span> 
      </p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.
      </p>
   </td>
</tr>

<tr>
   <td id="hw_other_storage" > <kbd>hw_other_storage</kbd> </td>
   <td><p class="snugtop">Name and model numbers of connected storage devices that were installed, but not used, to run the
      benchmark; such as unused hard disks, optical drives, or HBAs.  If there are none, this field should be set to
      "None".
      <span class="new">New</span>
      </p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.
      </p>
   </td>
</tr>

<tr>
   <td id="hw_pcache" > <kbd>hw_pcache</kbd> </td>
   <td>1st level (primary) cache.</td>
</tr>

<tr>
   <td id="hw_power_cal_date" > <kbd>hw_power_{id}_cal_date</kbd> </td>
   <td><p class="snugtop">The date the power meter was last calibrated.  
      <span class="new">New</span>
      <br />Use format DD-MMM-YYYY.
      The {id} is based on the name of your <a href="#PowerId">power_analyzer</a>.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.
      </p>
   </td>
</tr>

<tr>
   <td id="hw_power_cal_label" > <kbd>hw_power_{id}_cal_label</kbd> </td>
   <td><p class="snugtop">A number or character string which uniquely identifies this meter calibration event.
      <span class="new">New</span>
      <br />The format of this value is specified by the metrology institute.
      The value may appear on the calibration certificate or on a sticker applied to the power analyzer.
      </p>
      <p>The {id} is based on the name of your <a href="#PowerId">power_analyzer</a>.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_power_cal_org" > <kbd>hw_power_{id}_cal_org</kbd> </td>
   <td><p class="snugtop">The name of the organization or institute that did the calibration. 
      <span class="new">New</span>
      <br />The {id} is based on the name of your <a href="#PowerId">power_analyzer</a>.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_power_connection" > <kbd>hw_power_{id}_connection</kbd> </td>
   <td><p class="snugtop">Description of the interface used to connect the power analyzer to the PTDaemon host system, e.g. RS-232 (serial port),
      USB, GPIB, etc. 
      <span class="new">New</span>
      <br />The {id} is based on the name of your <a href="#PowerId">power_analyzer</a>.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_power_label" > <kbd>hw_power_{id}_label</kbd> </td>
   <td><p class="snug">A label to be printed at the top of report sections describing this analyzer.  
      <span class="new">New</span>
      <br />The {id} is based on
      the name of your <a href="#PowerId">power_analyzer</a>.</p> 
      <p>If you have more than one analyzer, they will be reported in separate sections.
      <br />Example:</p>
      <pre class="snugtop">power_analyzer                    = hex-analyzer001:8888, hex-analyzer002:8888
hw_power_hexanalyzer0018888_label = Base System Power Analyzer
hw_power_hexanalyzer0028888_label = Storage Cabinet Power Analyzer</pre>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_power_met_inst" > <kbd>hw_power_{id}_met_inst</kbd> </td>
   <td><p class="snugtop">The name of the metrology institute that certified the organization that did the calibration of the
      power analyzer (for example: NIST, PTB, AIST, NML, CNAS).
      <span class="new">New</span>
      <br />The {id} is based on the name of your <a href="#PowerId">power_analyzer</a>.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_power_model" > <kbd>hw_power_{id}_model</kbd> </td>
   <td><p class="snugtop">The model name of the power analyzer used for this benchmark run.  
      <span class="new">New</span>
      <br />The {id} is based on
      the name of your <a href="#PowerId">power_analyzer</a>.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_power_serial" > <kbd>hw_power_{id}_serial</kbd> </td>
   <td><p class="snugtop">The serial number uniquely identifying the power analyzer.  
      <span class="new">New</span>
      <br />The {id} is based on
      the name of your <a href="#PowerId">power_analyzer</a>.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_power_setup" > <kbd>hw_power_{id}_setup</kbd> </td>
   <td><p class="snugtop">Briefly describe how the analyzer is arranged for use with the SUT (for example, type of
      connection, or which power supplies are measured by this analyzer). 
      <span class="new">New</span>
      <br />If more space is needed, use the <a href="#notes_power">notes_power</a> section.  </p>
      <p>The {id} is based on the name of your <a href="#PowerId">power_analyzer</a>.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_power_vendor" > <kbd>hw_power_{id}_vendor</kbd> </td>
   <td><p class="snugtop">Company which manufactures and/or sells the power analyzer.  
      <span class="new">New</span>
      <br />The {id} is based on
      the name of your <a href="#PowerId">power_analyzer</a>.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_power_provisioning" > <kbd>hw_power_provisioning</kbd> </td>
   <td><p class="snug">Description of how the SUT is powered.  
      <span class="new">New</span>
      <br />Select one of the three values shown below.  </p>
      <ul class="snugtop">
         <li>"Line-powered": The SUT is powered by an external AC power source.</li>
         <li>"Battery-powered": The SUT is designed to be able to run normal operations without an external source of power.</li>
         <li>"Other (&lt;explanation&gt;)": Neither line- nor battery-powered, with short explanatory text in parentheses.  The
            explanation may be expanded upon in the <a href="#notes_power">power settings notes</a>.</li>
      </ul>
      <p><span class="alarm">Warning: </span> for SPEC CPU 2017, "Battery-powered" is not an acceptable choice for reportable runs
       -- see <a class="external" href="runrules.html#rule_3.9.2">rule 3.9.2 (e)</a>.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.
      </p>
   </td>
</tr>

<tr>
   <td id="hw_psu" > <kbd>hw_psu</kbd> </td>
   <td><p class="snugtop">The number and ratings (in Watts) of the systems power supplies.
      <span class="new">New</span>
      </p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_psu_info" > <kbd>hw_psu_info</kbd> </td>
   <td><p class="snugtop">Details about the power supplies, such as vendor part number, manufacturer, etc.
      <span class="new">New</span>
      </p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_scache" > <kbd>hw_scache</kbd> </td>
   <td>2nd level cache.</td>
</tr>

<tr>
   <td id="hw_storage_model" > <kbd>hw_storage_model</kbd> </td>
   <td><p class="snugtop">Name and model numbers of storage hardware (including HBAs) used to run the benchmark, if the model
      numbers have not been completely disclosed in the <a href="#hw_disk">hw_disk</a> field.
      <span class="new">New</span>
      </p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.
      </p>
   </td>
</tr>

<tr>
   <td id="hw_tcache" > <kbd>hw_tcache</kbd> </td>
   <td>3rd level cache.</td>
</tr>

<tr>
   <td id="hw_temperature_connection" > <kbd>hw_temperature_{id}_connection</kbd> </td>
   <td><p class="snugtop">Description of the interface used to connect the temperature meter to the PTDaemon host system.
      <span class="new">New</span>
      <br />Examples: RS-232, USB, GPIB
      <br />The {id} is based on the name of your <a href="#TemperatureId">temp_meter</a>.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_temperature_label" > <kbd>hw_temperature_{id}_label</kbd> </td>
   <td><p class="snugtop">A label to be printed at the top of report sections describing this temperature meter.  
      <span class="new">New</span>
      <br />The {id} is based on the name of your <a href="#TemperatureId">temp_meter</a>.</p>
      <p>If you have more than one temperature meter, they will be reported in separate sections.
      <br />Example:</p>
      <pre class="snugtop">temp_meter                              = hex-analyzer001:8889, hex-analyzer002:8889
hw_temperature_hexanalyzer0018889_label = Base System Temperature Meter
hw_temperature_hexanalyzer0028889_label = Storage Cabinet Temperature Meter</pre>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_temperature_model" > <kbd>hw_temperature_{id}_model</kbd> </td>
   <td><p class="snugtop">The model name of the temperature meter used for this benchmark run.  
      <span class="new">New</span>
      <br />The {id} is based on the name
      of your <a href="#TemperatureId">temp_meter</a>.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_temperature_serial" > <kbd>hw_temperature_{id}_serial</kbd> </td>
   <td><p class="snugtop">The serial number uniquely identifying the temperature meter.  
      <span class="new">New</span>
      <br />The {id} is based on the name of
      your <a href="#TemperatureId">temp_meter</a>.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_temperature_setup" > <kbd>hw_temperature_{id}_setup</kbd> </td>
   <td><p class="snugtop">Brief description of how the temperature meter is arranged for use with the SUT (for example, where the
      probe is placed, or which portion of the SUT it measures).  
      <span class="new">New</span>
      <br />If more space is needed, use the <a href="#notes_power">notes_power</a> section.  </p>
      <p>The {id} is based on the name of your <a href="#TemperatureId">temp_meter</a>.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_temperature_vendor" > <kbd>hw_temperature_{id}_vendor</kbd> </td>
   <td><p class="snugtop">Company which manufactures and/or sells the temperature meter.  
      <span class="new">New</span>
      <br />The {id} is based on the name of
      your <a href="#TemperatureId">temp_meter</a>.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.</p></td>
</tr>

<tr>
   <td id="hw_vendor" > <kbd>hw_vendor</kbd> </td>
   <td>The hardware vendor.  An example of usage of this and related fields is given in the <a
   href="#test_sponsor">test_sponsor</a> section.  </td>
</tr>

<tr>
   <td id="license_num" > <kbd>license_num</kbd> </td>
   <td>The SPEC license number for either the <a href="#tester">tester</a> or the <a
   href="#test_sponsor">test_sponsor</a>.</td>
</tr>

<tr>
   <td id="power_management" > <kbd>power_management</kbd> </td>
   <td><p class="snugtop">Briefly summarize any non-default settings for power management,
      whether set in BIOS, firmware, operating system, or elsewhere.
      <span class="new">New</span>

      <br />Explain your settings in a platform flags file and/or the <a href="#notes_power">power settings notes</a>.
      <br />Example:</p>
<pre>
power_management001 = OS power management: 'poweradm disable'
power_management002 = BIOS Energy Mode: "Balanced Performance"

notes_power_001 = The OS 'poweradm' utility accepts arguments:
notes_power_002 =    'enable' - unused components are put into a low-energy state [default]
notes_power_003 =    'disable' - all components run at full speed

notes_power_011 = The BIOS "Energy Mode" option allows for processor performance and power optmization.
notes_power_012 = Available settings are:
notes_power_013 =    Performance: High performance with less need for power saving.
notes_power_014 =    Balanced Performance: optimal performance efficiency.
notes_power_015 =    Balanced Power: optimal power efficiency [default]
notes_power_016 =    Power: High power saving with less need for performance.
</pre>
   </td>
</tr>

<tr>
   <td id="prepared_by" > <kbd>prepared_by</kbd> </td>
   <td>Is never output.  If you wish, you could set this to your own name, so that the rawfile will be tagged with your name
   but not the formal reports. </td>
</tr>

<tr>
   <td id="sw_avail" > <kbd>sw_avail</kbd> </td>
   <td>Availability date for the software used.  If more than one date, use the LATEST one.
   (The SPEC CPU suite used for testing is NOT part of the consideration for software availability date.)</td>
</tr>

<tr>
   <td id="sw_base_ptrsize" > <kbd>sw_base_ptrsize</kbd> </td>
   <td>
   Size of pointers in base.  Report:
       <ul class="snug">
       <li>"<kbd class="nbsnuglr">32-bit</kbd>" if all benchmarks in base are compiled with switches that request only 32-bit pointers.</li>
       <li>"<kbd class="nbsnuglr">64-bit</kbd>" if all benchmarks in base are compiled with switches that request only 64-bit pointers.</li>
       <li>"<kbd class="nbsnuglr">32/64-bit</kbd>" if there is a mix of 32-bit and 64-bit.  For example, if the C++ benchmarks use 32-bit
       pointers, while the Fortran and C benchmarks use 64-bit, then you would report "32/64-bit" here.</li>
       </ul></td>
</tr>


<tr>
   <td id="sw_compiler" > <kbd>sw_compiler</kbd> </td>
   <td>Name and version of compiler.  Note that if more than one compiler is used, you can employ <a
       href="#continuation">continuation</a> lines, as with most other descriptive fields</td>
</tr>


<tr>
   <td id="sw_file" > <kbd>sw_file</kbd> </td>
   <td><p class="snugtop">File system (ntfs, ufs, nfs, etc) for the SPEC run directories.  Three important <b>Notes</b>:</p>
   <ol class="snugbot">
   <li>Only a single file system may be used for the run directories, as described in the <a class="external"
       href="runrules.html#singleFileSystem">run rules</a>.</li>
   <li>If the <a href="#output_root">output_root</a> feature is used, its file system should be the one described
   here.</li>
   <li>File systems used for other purposes - such as for the operating system - are usually not a performance-relevant
      variable, so need not be described.  You can extend this field using the same <a href="#continuation">continuation</a>
      methods as other fields (e.g. you could use <kbd class="snugr">sw_file01</kbd>, <kbd class="snugr">sw_file02</kbd>, etc).</li>
   </ol>
   </td>
</tr>

<tr>
   <td id="sw_os" > <kbd>sw_os</kbd> </td>
   <td>Operating system name and version.</td>
</tr>

<tr>
   <td id="sw_other" > <kbd>sw_other</kbd> </td>
   <td>Any other performance-relevant non-compiler software used, including third-party libraries, accelerators, etc.</td>
</tr>

<tr>
   <td id="sw_peak_ptrsize" > <kbd>sw_peak_ptrsize</kbd> </td>
   <td> Size of pointers in peak.  Report:
       <ul class="snug">
       <li>"<kbd class="nbsnuglr">32-bit</kbd>" if all benchmarks in peak are compiled with switches that request only 32-bit pointers.</li>
       <li>"<kbd class="nbsnuglr">64-bit</kbd>" if all benchmarks in peak are compiled with switches that request only 64-bit pointers.</li>
       <li>"<kbd class="nbsnuglr">32/64-bit</kbd>" if there is a mix of 32-bit and 64-bit.  </li>
       </ul></td>
</tr>

<tr>
   <td id="sw_state" > <kbd>sw_state</kbd> </td>
   <td>Multi-user, single-user, default, etc.  </td>
</tr>

<tr>
   <td id="tester" > <kbd>tester</kbd> </td>
   <td>The entity actually carrying out the tests.  An optional field; if not specified, defaults to <kbd
         class="snugr">test_sponsor</kbd>.  An example is given in the <a href="#test_sponsor">test_sponsor</a> section.
   </td>
</tr>


<tr>
   <td id="test_elevation" > <kbd>test_elevation</kbd> </td>
   <td><p class="snugtop">The elevation above sea level in meters of the site where the benchmark was run.  
      <span class="new">New</span>
      <br />Elevation is relevant because the reduced density of air at higher altitudes causes air cooling to be less
      efficient.  Just enter a number; units are assumed to be meters.</p>
      <p class="snugbot">This field only appears on reports for results where the energy metric appears.
      </p>
   </td>
</tr>

<tr>
   <td id="test_sponsor" > <kbd>test_sponsor</kbd> </td>
   <td><p class="snugtop">The entity sponsoring this test.  An optional field; if not specified, defaults to
   <a href="#hw_vendor">hw_vendor</a>.</p>
   <p style="margin:0em 4em; text-align:justify;">For example, suppose that the Genius Compiler Company wants to show off
   their new compiler on the TurboBlaster 9000 computer, but does not happen to own a maxed-out system with eight thousand
   processors.  Meanwhile, the Pawtuckaway State College Engineering department has just taken delivery of such a system.  In
   this case, the compiler company could contract with the college to test their compiler on the big machine.  The fields
   could be set as:</p>
<pre class="snugbot">
      test_sponsor = Genius Compilers
      tester       = Pawtuckaway State College
      hw_vendor    = TurboBlaster </pre>

   </td>
</tr>

</table>



<!-- .......................................................................................................................... -->
<h3 id="sectionV.B">        V.B.       Fields can vary by scope.
</h3>



<p>Fields can appear and disappear based upon <a href="#scope">scope</a>.  For example, if your floating point runs used two
Fortran compilers (which is allowed for peak), you could construct a config file that adjusts the fields accordingly:</p>

<pre>
$ <b>cat tmp.cfg</b>
expand_notes      = 1
hw_vendor         = Turboblaster, Inc.
output_format     = text
output_root       = /tmp/fake
default:
   hw_avail       = Feb-2018
   sw_avail       = Jan-2018
   sw_compiler1   = C: V42.0 of TurboBlaster C/C++
   sw_compiler2   = Fortran: V42.2 of TurboBlaster Fortran
fprate:
   sw_avail       = Apr-2018
   sw_compiler3   = Fortran: V7.3.0 of gfortran
   notes_comp_100 = In base, all benchmarks use Turboblaster Fortran
   notes_comp_110 = In peak, some benchmarks use Turboblaster Fortran and some
   notes_comp_120 =          benchmarks use gfortran, as noted in the report.
$ <b>runcpu --fakereportable --config=tmp intrate fprate | grep rate.txt</b>
    format: Text -&gt; /tmp/fake/result/CPU2017.001.intrate.txt
    format: Text -&gt; /tmp/fake/result/CPU2017.001.fprate.txt
$ <b>cd /tmp/fake/result</b>
$ <b>grep avail CPU2017.001.intrate.txt </b>
    Test sponsor: Turboblaster, Inc.             Hardware availability: Feb-2018
    Tested by:    Turboblaster, Inc.             Software availability: Jan-2018
$ <b>grep avail CPU2017.001.fprate.txt </b>
    Test sponsor: Turboblaster, Inc.             Hardware availability: Feb-2018
    Tested by:    Turboblaster, Inc.             Software availability: Apr-2018
$ <b>grep ortran CPU2017.001.intrate.txt </b>
                      Fortran: V42.2 of TurboBlaster Fortran
$ <b>grep ortran CPU2017.001.fprate.txt </b>
                      Fortran: V42.2 of TurboBlaster Fortran
                      Fortran: V7.3.0 of gfortran
     In base, all benchmarks use Turboblaster Fortran
     In peak, some benchmarks use Turboblaster Fortran and some
              benchmarks use gfortran, as noted in the report.
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a>   </pre>

<p>In the above example, notice that both the compiler information and the availability date changed in the report, depending
on the metric.</p>


<!-- .......................................................................................................................... -->
<h3 id="sectionV.C">        V.C.       Additional notes for the reader
   <span id="FreeFormNotes"> </span>
   <span id="free-form-notes"> </span>
   <span id="free.form.notes"> </span>
   <span id="freeFormNotes"> </span>
   <span id="free_form_notes"> </span>
   <span id="freeformnotes"> </span>
</h3>



<p class="snugbot">In addition to the pre-defined fields, you can write as many notes as you wish.  These notes are printed
in the report, using a fixed-width font.  For example, you can use notes to describe software or hardware information with
more detail beyond the predefined fields:</p>
<pre>
   notes_os_001  = The operating system used service pack 2 plus patches
   notes_os_002  = 31415, 92653, and 58979.  At installation time, the
   notes_os_003  = optional "Numa Performance Package" was selected.
</pre>


<!-- .......................................................................................................................... -->
<h4 id="sectionV.C.1">      V.C.1.     Notes sections
   <span id="notes"> </span>
</h4>



<p> There are various notes sections. If there are no notes in a particular section, it is not output, so you don't need to
worry about making sure you have something in each section.</p>

   <p>The sections, in order of appearance, are as follows:</p>
   <ol>
     <li id="notes_comp"><kbd class="nb">notes_comp_NNN</kbd> -- Notes about compiler invocation.</li>
     <li id="notes_port"><kbd class="nb">notes_port_NNN</kbd> -- Notes about portability options.</li>
     <li id="notes_base"><kbd class="nb">notes_base_NNN</kbd> -- Notes about base optimization options.</li>
     <li id="notes_peak"><kbd class="nb">notes_peak_NNN</kbd> -- Notes about peak optimization options.</li>
     <li ><kbd class="nb">notes_submit_NNN</kbd>   -- Notes about use of the <a href="#submit">submit</a> option.</li>
     <li id="notes_os"  ><kbd class="nb">notes_os_NNN</kbd>   -- Notes about operating system tuning and changes.</li>
     <li id="notes_part"><kbd class="nb">notes_part_NNN</kbd> -- Notes about component parts (for kit-built systems).</li>
     <li id="general_notes"><kbd class="nb">notes_NNN</kbd> -- General notes.</li>
     <li id="notes_plat"><kbd class="nb">notes_plat_NNN</kbd> -- Notes about platform tuning and changes.</li>
     <li id="notes_power"><kbd class="nb">notes_power_NNN</kbd> -- Notes about power-related hardware and settings.</li>
   </ol>

<p>Notes about the submit command are described <a href="#notes_submit">above</a>, with the description of the <a
   href="#submit">submit</a> option.  </p>


<!-- .......................................................................................................................... -->
<h4 id="sectionV.C.2">      V.C.2.     Note numbering
</h4>



<p>Start your notes with the name of the notes section where you want the note to appear, and then add numbers to define the
order of the lines.  Within a section, notes are sorted by line number.  The <kbd>NNN</kbd> above is not intended to indicate
that you are restricted to 3 digits; you can use a smaller or larger number of digits as you wish, and you can skip around as
you like: for example, ex-BASIC programmers might naturally use line numbers 100, 110, 120...  But note that if you say
<kbd class="nb">notes_plat782348320742972403</kbd> you just might encounter the dreaded (and highly unusual) "out of memory"
error, so don't do that. </p>

<p>You can optionally include an underscore just before the number, but <span class="alarm">beware:</span> if you say both
<kbd class="nb">notes_plat_105</kbd> and <kbd class="nbsnugr">notes_plat105</kbd>, both are considered to be the same
line.  The last one mentioned will replace the first, and it will be the only one output. </p>


<!-- .......................................................................................................................... -->
<h4 id="sectionV.C.3">      V.C.3.     Additional tags
   <span id="NotesTag"> </span>    <span id="NotesTags"> </span>
   <span id="notes-tag"> </span>   <span id="notes-tags"> </span>
   <span id="notes.tag"> </span>   <span id="notes.tags"> </span>
   <span id="notesTag"> </span>    <span id="notesTags"> </span>
   <span id="notes_tag"> </span>   <span id="notes_tags"> </span>
   <span id="notestag"> </span>    <span id="notestags"> </span>
</h4>



<p>For all sections you can add an optional additional tag of your choosing before the numbers.   Notes will be organized
within the tags.  </p>

<p>The intent of the feature is that it may allow you to organize your system information in a manner that better suits your
own categories for describing it.</p>

<p>For example:</p>

<pre class="l1snugish">$ <b>cat notes_tags.cfg </b>
iterations      = 1
output_format   = text
output_root     = /tmp/notes_tags
runlist         = 519.lbm_r
size            = test
fprate=base:
   CC                       = gcc
   CC_VERSION_OPTION        = -v
   notes_part_greeting_011  = ++ how
   notes_part_greeting_20   = ++ you?
   notes_part_greeting_012  = ++ are
   notes_part_aname_1       = ++ Alex,
   notes_part_080           = ++ hi

$ <b>cat notes_tags.sh  </b>
runcpu --config=notes_tags | grep txt
grep '++' /tmp/notes_tags/result/CPU2017.001*txt
$ <b>./notes_tags.sh</b>
    format: Text -&gt; /tmp/notes_tags/result/CPU2017.001.fprate.test.txt
     ++ hi
     ++ Alex,
     ++ how
     ++ are
     ++ you?
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>



<!-- .......................................................................................................................... -->
<h4 id="sectionV.C.4">      V.C.4.     Links in notes sections
   <span id="Links"> </span>
   <span id="links"> </span>
   <span id="NotesLinks"> </span>
   <span id="notes-links"> </span>
   <span id="notes.links"> </span>
   <span id="notesLinks"> </span>
   <span id="notes_links"> </span>
   <span id="noteslinks"> </span>
</h4>



<p>You can mention URLs in your notes section, and html reports will correctly render them as hyperlinks.  For example:</p>
<pre>
notes_plat_001 = Additional detail may be found at
notes_plat_002 = http://www.turboblaster.com/servers/big/green/
</pre>

<p class="snugbot">If you like, you can use descriptive text for the link by preceding it by the word LINK and adding the
descriptive text in square brackets:</p>

<pre>LINK url AS [descriptive text]</pre>

<p class="snug">The brackets may be omitted if your descriptive text is a single word, without blanks.</p>

<p>For example:</p>

<pre>notes_plat_001 = Additional detail may be found at
notes_plat_002 = LINK http://www.turboblaster.com/servers/big/green/ AS [TurboBlaster Servers]</pre>

<p class="snugtop">When the above appears in an html report, it is rendered as:
</p>

<div class="resultpage">
   <div class="notes">
      <h2 class="result">
         <!-- Do not mark this with class=external, it is an excerpt of a report which would not be marked -->
         <a href="https://www.spec.org/cpu2017/Docs/result-fields.html#PlatformNotes">Platform Notes</a></h2>
      <pre>
 Additional detail may be found at
 <a href="#links">TurboBlaster Servers</a>
      </pre>
   </div>
</div>

<p class="snugbot">And in a text report, it appears as:</p>
<pre>                                Platform Notes
                                --------------
     Additional detail may found at
     TurboBlaster Servers (http://www.turboblaster.com/servers/big/green/)
</pre>

<p class="snugtop">Since the text report is not a context in which the reader can click on a link, it is spelled out instead.
<b>Note that because the text report spells the link out, the text line is wider</b> than in HTML, PS, and PDF reports.  When
deciding where to break your notes lines, you'll have to pick whether to plan line widths for text (which may result in
thin-looking lines elsewhere) or plan your line widths for HTML/PS/PDF (which may result in lines that fall of the right edge
with text).  The feature <a href="#notes_wrap_columns">notes_wrap_columns</a> won't help you here, since it is applied before
the link is spelled out.</p>



<!-- ..........................................................................................................................
<h4 id="sectionV.C.5">      V.C.5.     Attachments (experimental)
   <span id="attachments"> </span>
</h4>



<p class="snugbot">You can cause files to be attached to a result with this syntax:</p>
<pre class="l2snug">ATTACH url AS [descriptive text]</pre> <p class="snugtop">Unlike links (described in the previous
section), if you use ATTACH, the mentioned file is actually copied into your result directory.  </p>

<p><span class="caution">Caution:</span> the attachments feature is considered experimental, and may change.
If you try it, observe the results carefully.</p>

-->



<!-- .......................................................................................................................... -->
<h3 id="sectionV.D">        V.D.       About Parallel Reporting
   <span id="AboutParallelReporting"> </span>
   <span id="about-parallel-reporting"> </span>
   <span id="about.parallel.reporting"> </span>
   <span id="aboutParallelReporting"> </span>
   <span id="about_parallel_reporting"> </span>
   <span id="aboutparallelreporting"> </span>
   <span id="ParallelReporting"> </span>
   <span id="parallel-reporting"> </span>
   <span id="parallel.reporting"> </span>
   <span id="parallelReporting"> </span>
   <span id="parallel_reporting"> </span>
   <span id="parallelreporting"> </span>
   <span id="Parallel"> </span>
   <span id="parallel"> </span>
</h3>



<p class="snugbot">If benchmarks are optimized to use multiple threads, cores, and/or chips at run time, this is reported
via the phrase:</p>
<p style="margin:.2em 3em;font-family:serif;font-weight:bold;font-size:115%;">Parallel: Yes</p>
<p class="snugbot">The value for "Parallel" is derived from the
<a class="external" href="flag-description.html#parallel">parallel</a> flag attribute for compiler flags that
cause binaries to be multi-threaded. </p>



<!-- .......................................................................................................................... -->
<h2 id="sectionVI">         VI.        Using Feedback Directed Optimization (FDO)
   <span id="UsingFeedback"> </span>
   <span id="using-feedback"> </span>
   <span id="using.feedback"> </span>
   <span id="usingFeedback"> </span>
   <span id="using_feedback"> </span>
   <span id="usingfeedback"> </span>
   <span id="UsingFdo"> </span>
   <span id="using-FDO"> </span>
   <span id="using-fdo"> </span>
   <span id="using.FDO"> </span>
   <span id="using.fdo"> </span>
   <span id="usingFDO"> </span>
   <span id="UsingFDO"> </span>
   <span id="usingFdo"> </span>
   <span id="using_FDO"> </span>
   <span id="using_fdo"> </span>
   <span id="usingfdo"> </span>
   <span id="UsingPbo"> </span>
   <span id="using-PBO"> </span>
   <span id="using-pbo"> </span>
   <span id="using.PBO"> </span>
   <span id="using.pbo"> </span>
   <span id="usingPBO"> </span>
   <span id="UsingPBO"> </span>
   <span id="usingPbo"> </span>
   <span id="using_PBO"> </span>
   <span id="using_pbo"> </span>
   <span id="usingpbo"> </span>
   <span id="FDO"> </span>
   <span id="fdo"> </span>
   <span id="PBO"> </span>
   <span id="pbo"> </span>
</h2>



<p class="snugbot">Feedback Directed Optimization (FDO) is an optimization method that uses multiple steps, typically:</p>
<ul class="snug">
   <li>Build a program.</li>
   <li>Run a sample "training" workload, collecting a profile as it runs.</li>
   <li>Apply the profile to produce a modified program.</li>
</ul>
<p class="snugtop">FDO is also sometimes known as PBO, for Profile-Based Optimization.  </p>

<p class="snugbot">This section explores FDO controls and provides examples. <br />The controls are:</p>
<ol class="snugish">
   <li><kbd>PASSn</kbd>makevars
   (<a href="#commonMakevars">summary</a>)&nbsp; (<a href="makevars.html#PASSn" class="external">full list</a>)
   </li>
   <li><a href="#shellOptions">fdo</a> shell options.</li>
   <li><a href="#feedback">feedback</a> config file option.</li>
   <li><a class="external" href="runcpu.html#feedback">--feedback</a> <kbd>runcpu</kbd> option.</li>
</ol>

<p class="snugish">All examples in this section use <a class="external" href="runcpu.html#fake">--fake</a>, which is
especially recommended when debugging FDO commands.  You can send fake's very wordy output to a file to study it, or subset
it with commands such as <kbd>grep</kbd> or <kbd>findstr.</kbd></p>


<!-- .......................................................................................................................... -->
<h3 id="sectionVI.A">       VI.A.      Minimum required: PASSn or fdo_
</h3>



<p>To use feedback, you must use either a <kbd>PASSn</kbd> make variable, which adds flags to a pre-defined sequence of FDO
build steps; or an <kbd>fdo_</kbd> shell option, which lets you modify and add to the sequence of FDO steps.</p>


<p  class="hanging1snugbot"><b>PASSn:</b> The most common way of using Feedback Directed Optimization is by setting <kbd>PASSn</kbd>
makevars (<a href="#commonMakevars">summary</a>)&nbsp; (<a href="makevars.html#PASSn" class="external">full list</a>).
<br />The sequence is:</p>
<ul class="l1snugish">
   <li><i>build</i>&nbsp; - &nbsp; Create an instrumented binary using the config file <kbd>PASS1</kbd> flags.</li>
   <li><i>train</i>&nbsp; - &nbsp; Run it with the SPEC-provided training workload.  The instrumentation collects a profile.</li>
   <li><i>rebuild</i>&nbsp; - &nbsp; Create a new binary using the config file <kbd>PASS2</kbd> flags.  The compiler uses
      the profile to improve its optimizations.</li>
</ul>

<div class="exHeader" id="fdoExample1"><span><b>FDO Example 1:</b> <i>build - train - rebuild</i></span>  </div>

<pre class="l2snugish">$ <b>cat fdoExample1.cfg </b>
action          = build
runlist         = 549.fotonik3d_r
tune            = peak
default=peak:
   FC           = tbf90
   PASS1_FFLAGS = --CollectFeedback
   PASS2_FFLAGS = --ApplyFeedback
</pre>
<p class="l1snugish">This example config file use Turboblaster Fortran 90 to build <samp>549.fotonik3d_r</samp> specifying
<samp>PASS1</samp> and <samp>PASS2</samp> flags.
<br />A script picks out a few lines from the log file, including Fortran compile commands for source module
<samp>readline.f90.</samp>
</p>
<pre class="l2snugish">$ <b>cat fdoExample1.sh </b>
runcpu --config=fdoExample1 --fake | grep -e readline.f90 -e Train
$ <b>./fdoExample1.sh </b>
tbf90 -c -o readline.o -I. --CollectFeedback readline.f90
Training 549.fotonik3d_r with the train workload
tbf90 -c -o readline.o -I. --ApplyFeedback readline.f90
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>


<p id="fdo.mod" class="hanging1" style="margin-bottom:.1em;"><b>fdo_:</b> Feedback Directed Optimization can also be done by
setting up up <a href="#fdoShellCommands">fdo shell commands.</a>
<br />For example:</p>
<ul class="l1snugish">
   <li><i>build</i>&nbsp; - &nbsp; Build just once. </li>
   <li><i>train</i>&nbsp; - &nbsp; Run it with the SPEC-provided training workload.</li>
   <li><i>do something else  </i>&nbsp; - &nbsp; Perhaps you have a post-link optimizer that applies a profile without
      needing to recompile.</li>
</ul>

<div class="exHeader" id="fdoExample2"><span><b>FDO Example 2:</b> <i>build - train - othertool</i></span>  </div>

<pre class="l2snugish">$ <b>cat fdoExample2.cfg </b>
action          = build
runlist         = 549.fotonik3d_r
tune            = peak
default=peak:
   FC           = tbf90
   OPTIMIZE  = -fast -profile:fbdir
   fdo_post1 = /opt/bin/postoptimizer --profile:fbdir
</pre>
<p class="l1snugish">
Notice that this config file does not mention <samp class="snugr">PASS1</samp>, but does use <samp class="snugr">fdo_post1</samp>.
<br />The script below picks out a few lines of interest from the log:
</p>
<pre class="l2snugish">$ <b>cat fdoExample2.sh </b>
runcpu --config=fdoExample2 --fake \
   | grep -e readline.f90 -e Train -e '^/opt'
$ <b>./fdoExample2.sh </b>
tbf90 -c -o readline.o -I. -fast -profile:fbdir readline.f90
Training 549.fotonik3d_r with the train workload
/opt/bin/postoptimizer --profile:fbdir
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
<p class="l1snugtop">
Unlike the previous example, the <kbd>grep</kbd> command finds only one compile for <kbd class="snugr">readline.f90</kbd>.
</p>


<!-- .......................................................................................................................... -->
<h3 id="sectionVI.B">       VI.B.      Flexible build models
</h3>

<p>You can adjust the <samp>fdo</samp> commands that are generated.  Perhaps the default model is almost correct for your
needs, and you just want minor changes.  <span class="caution">Caution:</span> Before changing an <kbd>fdo_</kbd> option,
find its current setting using <a href="runcpu.html#fake" class="external">--fake</a>.  Check it in the context of
<i>your</i> config file: the commands will vary.  </p>

<div class="exHeader" id="fdoExample3"><span><b>FDO Example 3:</b> Finding fdo commands with <kbd class="nb">--fake</kbd> </span>  </div>
<p class="l1snug">Goal: discover exactly what the SPEC tools are doing during pass 2 cleanup.</p>
<pre class="l2snugish">$ <b>cat fdoExample3.cfg </b>
action          = build
output_root     = /tmp/fake
runlist         = 549.fotonik3d_r
tune            = peak
default=peak:
   FC           = tbf90
   PASS1_FFLAGS = --CollectFeedback
   PASS2_FFLAGS = --ApplyFeedback
</pre>
<p class="l1snugish">The config file sends output to an <samp>output_root.</samp>
<br />The script below searches the log file in the <samp>result/</samp> directory under that root.  The command <kbd class="nb">grep
   -n</kbd> prints numbered lines matching '<samp class="snuglr">%% Fake commands</samp>' and the <kbd>cut</kbd> command prints out the
first 5 words from matching lines.
</p>
<pre class="l2snugish">$ <b>cat fdoExample3.sh </b>
runcpu --config=fdoExample3 --fake | grep "log for"
grep -n '%% Fake commands' /tmp/fake/result/CPU2017.001.log \
    | cut -f 1-5 -d' '
$
$ <b>./fdoExample3.sh </b>
The log for this run is in /tmp/fake/result/CPU2017.001.log
387:%% Fake commands from make.clean
397:%% Fake commands from fdo_make_pass1
438:%% Fake commands from options1
482:%% Fake commands from compiler-version1
496:%% Fake commands from input_generation
611:%% Fake commands from benchmark_run
720:%% Fake commands from compare_run
819:%% Fake commands from fdo_make_clean_pass2
828:%% Fake commands from fdo_make_pass2
869:%% Fake commands from options2
913:%% Fake commands from compiler-version2
</pre>
<p class="l1snugish">Suppose we are specifically interested in what happens during <samp
   class="snugr">fdo_make_clean_pass2</samp>, line 819 in the above list.
<br />To see the details, look just before and just after the matching phrase:
</p>
<pre class="l2snugish">$ <b>cat -n /tmp/fake/result/CPU2017.001.log | head -825 | tail -10 </b>
   816
   817  specmake -n --output-sync fdoclean FDO=PASS2
   818
   819  %% Fake commands from fdo_make_clean_pass2 (specmake -n --output-sync fdoclean FDO=P...):
   820  rm -rf *.o  pscyee.out
   821  find . \( -name \*.o -o -name '*.fppized.f*' -o -name '*.i' -o -name '*.mod' \) -print | xargs rm -rf
   822  rm -rf fotonik3d_r
   823  rm -rf fotonik3d_r.exe
   824  %% End of fake output from fdo_make_clean_pass2 (specmake -n --output-sync fdoclean FDO=P...)
   825
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
<p class="l1snugish">To decipher the above:</p>
<ul class="l2snugish">
   <li>Lines 820 to 823 show that various files are removed.</li>
   <li>Line 819 tells us that they were removed because <samp>fdo_make_clean_pass2</samp> did it.</li>
   <li>Line 819 also tells us that <samp>fdo_make_clean_pass2</samp> begins with the phrase in parentheses <samp
    class="nbsnugr">(specmake -n --output-sync fdoclean FDO=P...)</samp>.</li>
   <li>To see the full command, look 2 lines up, at line 817.</li>
</ul>



<p style="margin-top:1.5em;" class="hanging1"><b>Combining PASSn and fdo_</b> You can combine <samp>PASSn</samp> and <samp>fdo_</samp> while adjusting
the feedback commands.
<br />For example, suppose that your compiler does not need to recompile all the modules in step 2; you
just want to relink.
<br />Difficulty: by default, build #2 deletes all the object files. </p>

<div class="exHeader" id="fdoExample4"><span><b>FDO Example 4:</b> <i>build - train - partial rebuild</i></span>  </div>

<pre class="l2snugish">$ <b>cat -n fdoExample4.cfg </b>
     1  action                   = build
     2  runlist                  = 549.fotonik3d_r
     3  tune                     = peak
     4  default=peak:
     5     FC                   = pgf90
     6     PASS1_LDFLAGS        = -PGINSTRUMENT -incremental:no
     7     PASS2_LDFLAGS        = -PGOPTIMIZE   -incremental:no
     8     fdo_make_clean_pass2 = rm ${baseexe}
     9     fdo_make_pass2       = specmake build FDO=PASS2
</pre>
<p class="l1snugish"> On line 8, the default cleaning action (from <a href="#fdoExample3">Example 3</a>) is changed to remove
only the actual executable.  Under the usual rules of GNU make, you might expect that would be sufficient to cause build #2
to do only the link step.  In this case, it is not, because by default the tools generate <kbd class="nbsnugr">specmake
--always-make</kbd>.  Line 9 above overrides that default.
</p>
<pre class="l2snugish">$ <b>cat fdoExample4.sh </b>
runcpu --config=fdoExample4 --fake \
   | grep -e readline.f90          \
          -e Train                 \
          -e '^rm'                 \
          -e '^specmake.*clean'    \
          -e '^specmake.*build'    \
   | cat -n
</pre>
<p class="l1snugish">The <kbd>runcpu</kbd> command above is sent to <kbd>grep</kbd> to pick lines of interest, which are
numbered by <kbd class="snugr">cat</kbd>.
<br />In the output, lines 1-5 show a typical <kbd>clean</kbd> action; much less is removed on line 10.  Compare line 6 to
line 11 to see the differences in <samp class="nb">specmake build</samp> options.
</p>
<pre class="l2snugish">$ <b>./fdoExample4.sh </b>
     1  specmake -n --output-sync clean
     2  rm -rf *.o  pscyee.out
     3  rm -rf fotonik3d_r
     4  rm -rf fotonik3d_r.exe
     5  rm -rf core
     6  specmake -n --output-sync --always-make build FDO=PASS1
     7  pgf90 -c -o readline.o -I. readline.f90
     8  rm -rf options.tmpout
     9  Training 549.fotonik3d_r with the train workload
    10  rm fotonik3d_r
    11  specmake build FDO=PASS2
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>



<p style="margin-top:1.5em;" class="snugbot"><b>Adding FDO steps:</b> You can add more steps. </p>

<div class="exHeader" id="fdoExample5">
   <span id="nose"><b>FDO Example 5:</b> <i>build-train-build-train-build-train-postopt + file movement</i> </span></div>
<p class="l1snug">For example, you could:</p>
<ul class="l1snug">
   <li>Create runcpu <a href="#variables">variables</a> with customized content (lines 6-9)</li>
   <li>Build twice with different types of collectors (<kbd class="snugl">PASSn_OPTIMIZE</kbd> on lines 13 and 17 below) </li>
   <li>Train twice (lines 14 and 18)</li>
   <li>Combine profiles in temporary files (lines 9, 15, 19)</li>
   <li>Build a third time using the combined profile (line 22)</li>
   <li>Instrument with a postoptimizer, train a third time, and optimize again (lines 23-25)</li>
</ul>

<pre class="l2snugish">$ <b>cat -n fdoExample5.cfg </b>
     1  action                = build
     2  command_add_redirect  = yes
     3  runlist               = 641.leela_s
     4  tune                  = peak
     5  default=peak:
     6      profdir           = /tmp/feedback/profiles
     7      big_profile       = ${profdir}/${benchnum}.aggregated.profile
     8      clean_profile     = mkdir -p ${profdir}; rm -f ${big_profile}
     9      append_to_profile = cat this.prof &gt;&gt; ${big_profile}
    10      #
    11      fdo_pre0          = ${clean_profile}
    12      #
    13      PASS1_OPTIMIZE    = --collect:paths
    14      fdo_run1          = ${command}               # profile program paths
    15      fdo_post1         = ${append_to_profile}
    16      #
    17      PASS2_OPTIMIZE    = --collect:dcache
    18      fdo_run2          = ${command}               # profile data patterns
    19      fdo_post2         = ${append_to_profile}
    20      #
    21      fdo_pre_make3     = mv ${big_profile} ./profile.in
    22      PASS3_OPTIMIZE    = --apply:paths,dcache
    23      fdo_post_make3    = postopt --instrument:icache
    24      fdo_run3          = ${command}               # profile icache packing
    25      fdo_post3         = postopt --fixup:icache
</pre>
<p class="l1snugish">The script below picks out lines of interest using <kbd class="snugr">grep</kbd>.
</p>
<pre class="l2snugish">$ <b>cat fdoExample5.sh </b>
runcpu --fake --config=fdoExample5 \
  | grep -e '^mkdir'               \
         -e FullBoard.cpp          \
         -e Train                  \
         -e this.prof              \
         -e ^mv                    \
         -e '^postopt'             \
  | cat -n
</pre>
<p class="l1snugish"> The three instances of <kbd>PASSn_OPTIMIZE</kbd> are carried out on lines 2, 5, and 9 below.
<br />Various manipulations of the profile files are shown on lines 1, 4, 7, and 8.</p>
<pre class="l2snugish">$ <b>./fdoExample5.sh </b>
     1  mkdir -p /tmp/feedback/profiles; rm -f /tmp/feedback/profiles/641.aggregated.profile
     2  CC -c -o FullBoard.o -DSPEC -DSPEC_CPU -DNDEBUG -I.      --collect:paths         FullBoard.cpp
     3  Training 641.leela_s with the train workload
     4  cat this.prof &gt;&gt; /tmp/feedback/profiles/641.aggregated.profile
     5  CC -c -o FullBoard.o -DSPEC -DSPEC_CPU -DNDEBUG -I.      --collect:dcache         FullBoard.cpp
     6  Training 641.leela_s with the train workload
     7  cat this.prof &gt;&gt; /tmp/feedback/profiles/641.aggregated.profile
     8  mv /tmp/feedback/profiles/641.aggregated.profile ./profile.in
     9  CC -c -o FullBoard.o -DSPEC -DSPEC_CPU -DNDEBUG -I.      --apply:paths,dcache         FullBoard.cpp
    10  postopt --instrument:icache
    11  Training 641.leela_s with the train workload
    12  postopt --fixup:icache
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>



<ul>
   <li><b>Tip 1:</b> If you try the above example, send the <a href="runcpu.html#fake" class="external">fake</a> output to a
      file, and examine it with an editor. </li>
   <li><b>Tip 2:</b> You might be tempted to create the profile file in <kbd>fdo_run1</kbd> (config file line 13) using a single
      angle bracket, and append to it in <kbd>fdo_run2</kbd> (config line 17) with double angle brackets.  Don't do that.  Some
      benchmarks are invoked multiple times when they are trained, therefore all instances of <kbd>fdo_run</kbd> should append.
      You can clear the file before the build using <kbd>fdo_pre0</kbd> (config line 10).</li>
</ul>



<!-- .......................................................................................................................... -->
<h3 id="sectionVI.C">       VI.C.      The config file feedback option
</h3>



<p>If you use <kbd>PASSn</kbd> or <kbd>fdo_</kbd> then, by default, FDO is used for peak builds. The config file option <a
    href="#feedback">feedback</a> provides an additional control, an "on/off" switch that can be applied by the usual rules
 of <a href="#precedence">precedence</a>.</p>

<p class="snugbot">A common usage model is to enable feedback everywhere, then turn it off selectively:</p>

<div class="exHeader" id="fdoExample6"><span><b>FDO Example 6:</b> feedback=no</span></div>

<pre class="l2snugish">$ <b>cat -n fdoExample6.cfg </b>
  1  action         = build
  2  label          = miriam
  3  runlist        = 503.bwaves_r,519.lbm_r,549.fotonik3d_r
  4  tune           = base,peak
  5  fprate:
  6     fdo_post1   = /opt/merge_feedback
  7  519.lbm_r:
  8     feedback    = no
$ <b>cat fdoExample6.sh </b>
runcpu --fake --config=fdoExample6 | grep -e Building -e ^/opt
$ <b>./fdoExample6.sh </b>
  Building 503.bwaves_r base miriam: (build_base_miriam.0000) [2017-02-23 22:31:30]
  Building 519.lbm_r base miriam: (build_base_miriam.0000) [2017-02-23 22:31:31]
  Building 549.fotonik3d_r base miriam: (build_base_miriam.0000) [2017-02-23 22:31:32]
  Building 503.bwaves_r peak miriam: (build_peak_miriam.0000) [2017-02-23 22:31:33]
/opt/merge_feedback
  Building 519.lbm_r peak miriam: (build_peak_miriam.0000) [2017-02-23 22:31:35]
  Building 549.fotonik3d_r peak miriam: (build_peak_miriam.0000) [2017-02-23 22:31:35]
/opt/merge_feedback
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
<p class="l1snugtop"> Lines 5-6 turn feedback on for SPECrate floating point benchmarks.  Neverthelss, 519.lbm_r peak does
not use FDO: line 8 takes priority over line 6 by the usual rules of <a href="#precedence">precedence</a>.  Feedback is not
used for base, because the tools are aware of the <a href="runrules.html#FDObase" class="external">rule</a> that disallows
it.
</p>


<!-- .......................................................................................................................... -->
<h3 id="sectionVI.D">       VI.D.      runcpu --feedback
</h3>



<p >If you use the runcpu option <a href="runcpu.html#feedback" class="external">--feedback</a> or
its opposite, <kbd class="nbsnugr">--nofeedback</kbd>, all peak benchmarks are affected.
<br />
   <span class="new">New with CPU 2017:</span>
   The command line wins unconditionally over the config file. </p>

<p class="l1snugbot">The example below uses the same config file as the previous example.</p>

<div class="exHeader" id="fdoExample7"><span><b>FDO Example 7:</b> runcpu --feedback</span> </div>
<pre class="l2snugish">$ <b>cat fdoExample7.sh </b>
echo build with --feedback
runcpu --fake --config=fdoExample6 --feedback | grep -e Building -e '^/opt'
echo
echo build with --nofeedback
runcpu --fake --config=fdoExample6 --nofeedback | grep -e Building -e '^/opt'
$ <b>./fdoExample7.sh </b>
build with --feedback
  Building 503.bwaves_r base miriam: (build_base_miriam.0000) [2017-02-23 22:37:07]
  Building 519.lbm_r base miriam: (build_base_miriam.0000) [2017-02-23 22:37:08]
  Building 549.fotonik3d_r base miriam: (build_base_miriam.0000) [2017-02-23 22:37:09]
  Building 503.bwaves_r peak miriam: (build_peak_miriam.0000) [2017-02-23 22:37:10]
/opt/merge_feedback
  Building 519.lbm_r peak miriam: (build_peak_miriam.0000) [2017-02-23 22:37:11]
/opt/merge_feedback
  Building 549.fotonik3d_r peak miriam: (build_peak_miriam.0000) [2017-02-23 22:37:12]
/opt/merge_feedback

build with --nofeedback
  Building 503.bwaves_r base miriam: (build_base_miriam.0000) [2017-02-23 22:37:16]
  Building 519.lbm_r base miriam: (build_base_miriam.0000) [2017-02-23 22:37:17]
  Building 549.fotonik3d_r base miriam: (build_base_miriam.0000) [2017-02-23 22:37:18]
  Building 503.bwaves_r peak miriam: (build_peak_miriam.0000) [2017-02-23 22:37:19]
  Building 519.lbm_r peak miriam: (build_peak_miriam.0000) [2017-02-23 22:37:20]
  Building 549.fotonik3d_r peak miriam: (build_peak_miriam.0000) [2017-02-23 22:37:20]
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
<p class="l1snugtop">
In the run with <kbd class="nbsnugr">--feedback</kbd>, all peak benchmarks use feedback. Base does not, because the tools are aware of the
<a href="runrules.html#FDObase" class="external">rule</a>.
<br />The run with <kbd class="nb">--nofeedback</kbd> does not use FDO for any benchmarks.</p>




<!-- .......................................................................................................................... -->
<h2 id="sectionVII">        VII.       The config file preprocessor
   <span id="Preprocessor"> </span>
   <span id="preprocessor"> </span>
</h2>




<!-- .......................................................................................................................... -->
<h3 id="sectionVII.A">      VII.A.     Introduction
</h3>

<div class="l1">

   <p>This section introduces the config file preprocessor with a simple example.</p>

   <table class="noborder">
      <tr>
         <td><div class="exHeader" style="margin: .1em .1em;" id="preprocessorExample1"><span class="nb"><b>Preprocessor
                     Example 1:</b> Using %if and %define</span></div>
            <pre class="l1snugish">$ <b>cat -n preprocessor_example1.cfg</b>
 1  500.perlbench_r,600.perlbench_s:
 2  %if %{chip} eq "sparc"
 3      PORTABILITY    = -DSPEC_SOLARIS_SPARC
 4  %elif %{chip} eq "x86"
 5  %   if %{bits} == 32
 6  %      define suffix IA32
 7  %   else
 8  %      define suffix X64
 9  %   endif
10      PORTABILITY    = -DSPEC_SOLARIS_%{suffix}
11  %endif
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
         </td>
         <td style="padding-left:21px;border-left:thin dotted gray;">
            <p >Lines that start with percent (<kbd class="snuglr">%</kbd>) in <a href="#PunchColumn1">column
               1</a> are preprocessor directives. </p>

            <p>You can create <i>macros</i> (brief abbreviations for longer constructs) using <a href="#define">%define</a>,
            as shown on in lines 6 and 8 of this example.</p>

            <p>You can <a href="#UsingMacros">use them</a> with <kbd class="nbsnugr">%{macro_name}</kbd> -  lines 2,
            4, 5, and 10.</p>

            <p>You can test them with <a href="#if">%if</a> -  lines 2 and 5.
            <br />You can also test values with <a href="#elif">elif</a> - line 4.</p>

            <p >Two macros are assumed to already be set before arriving here:
            <br /> <samp class="nb">%{chip}</samp> and <samp class="nb">%{bits}</samp>.</p>
         </td>
      </tr>

      <tr>
         <td colspan="2">
            <p class="l1snug">The preprocessor is automatically run whenever you use <kbd class="nbsnugr">runcpu</kbd>. Or,
            you can run it separately, as <a class="external" href="utility.html#configpp">configpp</a>.  Macros can be set
            on the command line, using <a href="runcpu.html#define" class="external">--define</a> (or&nbsp;<kbd
               class="nbsnugr">-S</kbd>).  Here is the effect of various settings with the above config file:</p>
            <pre class="l2snugish">
$ <b>configpp -c preprocessor_example1.cfg --define chip=sparc | grep -e perlbench -e PORT</b>
500.perlbench_r,600.perlbench_s:
    PORTABILITY    = -DSPEC_SOLARIS_SPARC

$ <b>configpp -c preprocessor_example1.cfg --define chip=x86 | grep -e perlbench -e PORT</b>
500.perlbench_r,600.perlbench_s:
    PORTABILITY    = -DSPEC_SOLARIS_X64

$ <b>configpp -c preprocessor_example1.cfg -S chip=x86 -S bits=32 | grep -e perlbench -e PORT</b>
500.perlbench_r,600.perlbench_s:
    PORTABILITY    = -DSPEC_SOLARIS_IA32
            </pre>
         </td>
      </tr>
   </table>

</div>

<!-- .......................................................................................................................... -->
<h3 id="sectionVII.B">      VII.B.     Preprocessor Syntax Basics
   <span id="Preprocessor-syntax"> </span>
   <span id="Preprocessor.syntax"> </span>
   <span id="PreprocessorSyntax"> </span>
   <span id="Preprocessor_syntax"> </span>
   <span id="Preprocessorsyntax"> </span>
   <span id="preprocessor-syntax"> </span>
   <span id="preprocessor.syntax"> </span>
   <span id="preprocessorSyntax"> </span>
   <span id="preprocessor_syntax"> </span>
   <span id="preprocessorsyntax"> </span>
</h3>

<!-- .......................................................................................................................... -->
<h4 id="sectionVII.B.1">    VII.B.1.   Column 1.  Always Punch Column 1
   <span id="Punch-column-1"> </span>
   <span id="Punch.column.1"> </span>
   <span id="PunchColumn1"> </span>
   <span id="Punch_column_1"> </span>
   <span id="Punchcolumn1"> </span>
   <span id="punch-column-1"> </span>
   <span id="punch.column.1"> </span>
   <span id="punchColumn1"> </span>
   <span id="punch_column_1"> </span>
   <span id="punchcolumn1"> </span>
</h4>


<div class="l1" id="percentspace">
   <p>All preprocessor directives begin with the percent sign (<span class="tt">%</span>) in column 1.  You can -- and
   probably should -- use indenting, but keep the percent sign on the far left.  Any amount of spaces or tabs may separate
   the percent from the directive.  The following are okay:</p>

   <pre style="background:#181817;color:#14f23b;font-size:12pt;width:30em;">%define foo
%    define bar
%		undef hello </pre>

   <p>The following are <b>not</b> okay:</p>
   <pre style="background:#181817;color:#14f23b;font-size:12pt;width:30em;">
 %define foo          <span style="font-size:12pt;font-family:sans;color:pink;"> Space in the first column</span>
        %define foo   <span style="font-size:12pt;font-family:sans;color:pink;"> Tab in the first column</span>
#define foo           <span style="font-size:12pt;font-family:sans;color:pink;"> Use % in column 1, not # </span> </pre>

</div>

<!-- .......................................................................................................................... -->
<h4 id="sectionVII.B.2">    VII.B.2.   One line per directive</h4>
<div class="l1">

   <p>The macro preprocessor does <b>NOT</b> follow the same quoting rules described elsewhere for config files.  In
   particular, you may not use line continuation, line appending, or block quotes.  You may have a value of arbitrary length,
   but in the interests of config file readability and maintainability, please keep them relatively short.</p>

</div>

<!-- .......................................................................................................................... -->
<h4 id="sectionVII.B.3">    VII.B.3.   Comments</h4>

<p class="l1">The usual rules for comments <b>DO</b> apply: anything after <kbd>#</kbd> will be ignored. </p>


<!-- .......................................................................................................................... -->
<h3 id="sectionVII.C">      VII.C.     Macro Definition</h3>

<p class="l1">The next 3 sections describe how to define, undefine, or redefine macros.</p>

<!-- .......................................................................................................................... -->
<h4 id="sectionVII.C.1">    VII.C.1.   Defining Macros
   <span id="define"> </span>
   <span id="Macros"> </span>
   <span id="macros"> </span>
   <span id="DefiningMacros"> </span>
   <span id="defining-macros"> </span>
   <span id="defining.macros"> </span>
   <span id="definingMacros"> </span>
   <span id="defining_macros"> </span>
   <span id="definingmacros"> </span>
   <span id="DefineMacro"> </span>
   <span id="define-macro"> </span>
   <span id="define.macro"> </span>
   <span id="defineMacro"> </span>
   <span id="define_macro"> </span>
   <span id="definemacro"> </span>
   <span id="MacroDefinition"> </span>
   <span id="macro-definition"> </span>
   <span id="macro.definition"> </span>
   <span id="macroDefinition"> </span>
   <span id="macro_definition"> </span>
   <span id="macrodefinition"> </span>
</h4>

<div class="l1">

   <p class="snugbot">Macro names may only be composed of alphanumeric characters, underscores, and hyphens, and they
   <b>ARE</b> case-sensitive.  To define a macro in a config file, use:</p>
   <pre class="l2snugish">%define <i>macro_name</i> <i>value</i></pre>

   <p>Do not put quote marks (or other punctuation) around the <i>macro-name</i>.</p>

   <p class="snugbot">Often, quotes are not needed for the <i>value</i>; however, there is an important <span id="usr"
      class="alarm">exception</span>: if the value contains perl operators that you do not want treated as operators, then
   you should quote it.</p>

   <p class="snugbot">Macros can be defined on the command line, using the <a class="external"
      href="runcpu.html#define">--define</a> switch, or (equivalently) <kbd class="nb">-S</kbd>. </p>
   <pre class="snugtop">$ <b>runcpu --define mymacro=something</b>
$ <b>runcpu -S mymacro=something</b> </pre>

   <p>Macros set on the command-line are defined first.  Therefore, if a value is set both on the command line and in a
   config file, the config file will override the value on the command line.  If you want the command line to "win", the
   config file should check whether it has already been defined using <kbd class="nb">%ifdef</kbd>
   or <kbd class="nbsnugr">%if defined</kbd>.</p>

   <p><a href="#expressions"><b>Expressions</b></a> may be used when defining macros.  Because they are more frequently used
   with <a href="#if">%if</a>, they are documented in that section.</p>

</div>



<!-- .......................................................................................................................... -->
<h4 id="sectionVII.C.2">    VII.C.2.   Undefining macros
</h4>

<div class="l1">

   <p>Macros can be undefined in two ways:</p>
   <ol>
      <li>In a configuration file, using the <samp class="nb">%undef</samp> preprocessor directive.
         <pre>%define foo bar
# Now the macro called 'foo' has the value 'bar'
%undef foo
# Now it doesn't</pre>
         <p>Note that no quoting is necessary when specifying the name of the macro to undefine.</p></li>
      <li>On the command line, using the <a class="external" href="runcpu.html#undef">--undef</a> switch.  A command line
         undefinition request cannot affect macros set in the config file, because those definitions effectively happen after
         the un-definition.  For this reason, command-line undefinition is usually not very useful; it can only undo macros
         also set on the command line.</li>
   </ol>
</div>

<!-- .......................................................................................................................... -->
<h4 id="sectionVII.C.3">    VII.C.3.   Redefining macros
   <span id="MacroRedefinition"> </span>
   <span id="macro-redefinition"> </span>
   <span id="macro.redefinition"> </span>
   <span id="macroRedefinition"> </span>
   <span id="macro_redefinition"> </span>
   <span id="macroredefinition"> </span>
   <span id="Redefinition"> </span>
   <span id="redefinition"> </span>
   <span id="Redefining"> </span>
   <span id="redefining"> </span>
</h4>

<div class="l1">

   <p>If you define a macro more than once, warnings will be printed.  </p>
   <table >
      <tr>
         <td>
            <p class="snug" style="width:20em;"> To avoid the warnings,  you can
            check first, and only define your macro if has not previously been defined</p>
         </td>
         <td>
            <pre class="snug">%if !defined %{mypath}
%   define mypath "/usr/bin/"
%endif</pre>
         </td>
      </tr>
      <tr>
         <td>
            <p class="snug" style="width:20em;">Or, you can undefine it and then define it again.</p>
         </td>
         <td>
            <pre class="snug">%if defined %{mypath}
%   undef mypath
%   define mypath "/usr/bin/"
%endif</pre>
         </td>
      </tr>
   </table>

</div>

<!-- .......................................................................................................................... -->
<h3 id="sectionVII.D">      VII.D.     Macro Usage

   <span id="Macro-Usage"> </span>        <span id="Use-Macro"> </span>
   <span id="Macro.Usage"> </span>        <span id="Use.Macro"> </span>
   <span id="MacroUsage"> </span>         <span id="UseMacro"> </span>
   <span id="Macro_Usage"> </span>        <span id="Use_Macro"> </span>
   <span id="macro-usage"> </span>        <span id="use-macro"> </span>
   <span id="macro.usage"> </span>        <span id="use.macro"> </span>
   <span id="macroUsage"> </span>         <span id="useMacro"> </span>
   <span id="macro_usage"> </span>        <span id="use_macro"> </span>
   <span id="macrousage"> </span>         <span id="usemacro"> </span>

   <span id="Using-Macros"> </span>       <span id="Macro-Use"> </span>
   <span id="Using.Macros"> </span>       <span id="Macro.Use"> </span>
   <span id="UsingMacros"> </span>        <span id="MacroUse"> </span>
   <span id="Using_Macros"> </span>       <span id="Macro_Use"> </span>
   <span id="using-macros"> </span>       <span id="macro-use"> </span>
   <span id="using.macros"> </span>       <span id="macro.use"> </span>
   <span id="usingMacros"> </span>        <span id="macroUse"> </span>
   <span id="using_macros"> </span>       <span id="macro_use"> </span>
   <span id="usingmacros"> </span>        <span id="macrouse"> </span>
</h3>

<div class="l1">

   <p class="snugbot">To <b>use</b> the value of a macro, write</p>
   <pre class="snugish"> %{foo} </pre>
   <p class="snugtop">in the place where you'd like it to appear.</p>
   <p><b>Notice</b> that the <kbd>%{</kbd> and <kbd>}</kbd> are always required when using macros.
   <br />The only time they are not required is when defining and undefining them (<kbd class="nbsnugl">%define</kbd> and
   <kbd class="nbsnugr">%undef</kbd>).</p>

   <table>
      <tr>
         <td>
            <p>A macro that has not been defined will not be substituted.
            <br />That is, it will appear unchanged in the output.</p>
            <p>On the right, <kbd>%{Type}</kbd> is substituted
            <br />but <kbd>%{Typo}</kbd> is unchanged.</p>
         </td>
         <td><pre class="snug">$ <b>cat noSuchMacro.cfg </b>
%define Type -fast
CXXOPTIMIZE = %{Type}
COPTIMIZE   = %{Typo}
$ <b>configpp -c noSuchMacro.cfg | grep OPTIMIZE</b>
CXXOPTIMIZE = -fast
COPTIMIZE   = %{Typo}
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre></td>
      </tr>

      <tr>
         <td><p class="snugbot">A macro that has been defined, but not given a value,</p>
            <ul class="snugish">
               <li>behaves as if it were true in a logical context </li>
               <li>behaves as an empty string in a string context</li>
               <li>behaves as if it were <samp>1</samp> in a numeric context</li>
            </ul>
            <p class="snugish">as shown on the right.</p>
         </td>
         <td><pre class="snug">$ <b>cat macroDefinedButNoValue.cfg </b>
%define baz
%ifdef %{baz}
%   info baz is defined
%   info In text context it is: "%{baz}".
%endif
%if %{baz}
%   info In logical context, it behaves as true.
%endif
%if %{baz} + 3  == 4
%   info In numeric context, it behaves as 1.
%endif
$<b> configpp --config=macroDefinedButNoValue | grep INFO</b>
  INFO: baz is defined
  INFO: In text context it is: "".
  INFO: In logical context, it behaves as true.
  INFO: In numeric context, it behaves as 1.
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
         </td>
      </tr>

      <tr>
         <td>
            <div style="width:20em;">
               <p><span class="alarm">Caution:</span> Having no value is not the same as having an empty string as the
               value.</p>
               <p>If you set an empty string, it will be evaluated by the usual Perl rules, where the empty string is <a
                  class="external" href="http://perldoc.perl.org/perlsyn.html#Truth-and-Falsehood">false</a>.  </p>
            </div>
         </td>
         <td><pre class="snug">$ <b>cat macroEmptyValue.cfg </b>
%define baz ""
%ifdef %{baz}
%   info baz is defined
%   info In text context it is: "%{baz}".
%endif
%if ! %{baz}
%   info In logical context, it behaves as false
%endif
%if %{baz} + 3  == 3
%   info In numeric context, it behaves as 0
%endif
$ <b>configpp --config=macroEmptyValue | grep INFO</b>
  INFO: baz is defined
  INFO: In text context it is: "".
  INFO: In logical context, it behaves as false
  INFO: In numeric context, it behaves as 0
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
         </td>
      </tr>

      <tr>
         <td>
            <p style="width:20em;">You can have multi-layered references, as in this silly example:</p>
         </td>
         <td>
            <pre class="snug">$ <b>cat silly_macros.cfg </b>
%define foo       Hello_
%define bar       baz
%define foobar    Huh?
%define foobaz    What?
%define Hello_baz Please don't do this

OPTIMIZE  = %{foo}
COPTIMIZE = %{foo%{bar}}
FOPTIMIZE = %{%{foo}%{bar}}
$ <b>configpp -c silly_macros.cfg | grep OPTIMIZE</b>
OPTIMIZE  = Hello_
COPTIMIZE = What?
FOPTIMIZE = Please don't do this
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
         </td>
      </tr>
   </table>

</div>



<!-- .......................................................................................................................... -->
<h3 id="sectionVII.E">      VII.E.     Conditionals
</h3>

<p>Conditionals provide the ability to include and exclude entire sections of text based on macros and their values.</p>


<!-- .......................................................................................................................... -->
<h4 id="sectionVII.E.1">    VII.E.1.   %ifdef
   <span id="ifdef"> </span>
</h4>

<div class="l1">

   <p>The <samp class="nb">%ifdef</samp> conditional provides a way to determine whether or not a particular macro has been
   defined.  If the named macro has been defined, the conditional is true, and the text to the matching <samp
      class="nb">%endif</samp> is included in the text of the config file as evaluated by runcpu.</p>
   <p>The matching <samp class="nb">%endif</samp> may not necessarily be the <i>next</i> <samp class="nb">%endif</samp>
   because conditionals may be nested.</p>

   <p class="snugbot">Note that:</p>
   <p class="l1snugtop"><samp class="nb">%ifdef %{foo}</samp> is exactly equivalent to
   <br /><samp class="nbsnugr">%if defined(%{foo})</samp></p>

   <table>
      <tr>
         <td><p class="snug" style="width:20em;">In the example on the right, only the text that depends on <kbd
                class="nb">%{foo}</kbd> gets included.</p></td>
         <td><pre class="snug">$ <b>cat xyzzy.cfg </b>
%define foo
%ifdef %{foo}
   OPTIMIZE = This text will be included
%endif
%ifdef %{bar}
   FOPTIMIZE = This text will not be included
%endif
$ <b>configpp --config=xyzzy | grep include</b>
   OPTIMIZE = This text will be included
$</pre></td>
      </tr>
   </table>

</div>


<!-- .......................................................................................................................... -->
<h4 id="sectionVII.E.2">    VII.E.2.   %ifndef
   <span id="ifndef"> </span>
</h4>

<div class="l1">

   <p>The <samp class="nb">%ifndef</samp> conditional is the converse of <a href="#ifdef">%ifdef</a>; If the named macro has
   <b>not</b> been defined, the conditional is true, and the text to the matching <samp class="nb">%endif</samp> is included
   in the text of the config file as evaluated by runcpu. </p>

   <p class="snugbot">Note that:</p>
   <p class="l1snugtop"><samp class="nb">%ifndef %{foo}</samp> is exactly equivalent to
   <br /><samp class="nbsnugr">%if !defined(%{foo})</samp></p>

</div>

<!-- .......................................................................................................................... -->
<h4 id="sectionVII.E.3">    VII.E.3.   %if and expression evaluation
   <span id="if"> </span>
   <span id="expressions"> </span>
</h4>

<div class="l1">

   <p class="snugbot">Checking whether or not a macro is defined is quite useful, but it's just a subset of the more general
   conditional facility available.  This general form is</p>

   <pre>%if <b>expression</b>
...
%endif</pre>

   <p>The expression is evaluated using a subset of the Perl interpreter, so the possibilities for testing values are fairly
   broad.</p>

   <table>
      <tr>
         <td><p class="snugish" style="width:20em;">You can test multiple definitions using <samp
               class="nbsnugr">defined()</samp> plus the logical operators:
            <br />&nbsp;&nbsp;<samp class="nb">||</samp>
            &nbsp;&nbsp;<samp class="nb">&amp;&amp;</samp>
            &nbsp;&nbsp;<samp class="nb">and</samp>
            &nbsp;&nbsp;<samp class="nb">or</samp>
            </p>
         </td>
         <td><pre class="snugish">%if defined(%{foo}) &amp;&amp; !defined(%{bar}) || %{baz} == 3

%if defined(%{foo}) and !defined(%{bar}) or %{baz} == 3</pre>
         </td>
      </tr>

      <tr>
         <td><p class="snugish" style="width:20em;">To compare versus a string value, you must supply quotes</p></td>
         <td><pre class="snugish">%if %{foo} eq 'Hello, Dave.'</pre>
         </td>
      </tr>

      <tr>
         <td><p class="snugish" style="width:20em;">You may perform basic math on macro values</p></td>
         <td><pre class="snugish">%if %{foo} * 2004 &gt; 3737</pre>
         </td>
      </tr>

      <tr>
         <td><p class="snugish" style="width:20em;">You can do basic regular expression matching</p></td>
         <td><pre class="snugish">%if !defined(%{chip}) || %{chip} !~ m/(sparc|x86)/
%   error Please use --define chip=sparc or --define chip=x86
%endif</pre>
         </td>
      </tr>

      <tr>
         <td><p class="snugbot" style="width:20em;"><b>Caution:</b> be aware of behavior differences between</p>
            <p class="l1snug"><samp>%ifdef</samp> / <samp>%if defined()</samp></p>
            <p class="snug">vs.</p>
            <p class="l1snug"><samp>%if</samp></p>
            <p style="width:20em;">Conditional expressions are evaluated using perl's rules for <a class="external"
               href="http://perldoc.perl.org/perlsyn.html#Truth-and-Falsehood">Truth and Falsehood</a>.  </p>
            <p style="width:20em;">Therefore <samp>0</samp> (zero) is defined, and is false</p>
         </td>
         <td><pre class="snug">
$ <b>cat test_define.cfg</b>
%ifdef %{a}
   OPTIMIZE = -a
%endif
%if defined(%{b})
   LDOPTIMIZE = -b
%endif
%if %{c}
   COPTIMIZE = -c
%endif
$ <b>configpp --config=test_define -S a=1 -S b=1 -S c=1 | grep OPT </b>
   OPTIMIZE = -a
   LDOPTIMIZE = -b
   COPTIMIZE = -c
$ <b>configpp --config=test_define -S a=0 -S b=0 -S c=0 | grep OPT</b>
   OPTIMIZE = -a
   LDOPTIMIZE = -b</pre> </td>
      </tr>

      <tr>
         <td>You can use functions such as substr and index</td>
         <td><pre class="snug">$ <b>cat pathnote.cfg</b>
%define pathnote substr("%{ENV_PATH}",0,index("%{ENV_PATH}",":"))
%info my path begins %{pathnote}
$ <b>export PATH=/usr/local/something/something:$PATH</b>
$ <b>configpp --config=pathnote | grep INFO</b>
  INFO: my path begins /usr/local/something/something
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
         </td>
      </tr>
   </table>

   <p>Expressions are limited to the Perl <kbd class="nb">:base_core</kbd> and <kbd class="nb">:base_math</kbd> bundles, with
   the ability to dereference and modify variables disallowed.
   <br />If you want even more detail, see the source code for the <samp class="nb">eval_pp_conditional</samp> subroutine in
   <samp class="nb">config.pl</samp>, and see Perl's <a href="http://perldoc.perl.org/Opcode.html" class="external">Opcode
      documentation</a>.</p>

</div>


<!-- .......................................................................................................................... -->
<h4 id="sectionVII.E.4">    VII.E.4.   %else
</h4>

<table class="l1">
   <tr>
      <td><samp>%else</samp> does what you think it does.</td>
      <td><pre class="snug">$ <b>cat tmp.cfg</b>
%ifdef %{foo}
   OPTIMIZE = --foo
%else
   OPTIMIZE = --nofoo
%endif
$ <b>configpp --config=tmp | grep OPTIM</b>
   OPTIMIZE = --nofoo
$</pre>
      </td>
   </tr>
</table>



<!-- .......................................................................................................................... -->
<h4 id="sectionVII.E.5">    VII.E.5.   %elif
   <span id="elif"> </span>
</h4>

<table class="l1">
   <tr>
      <td><p><samp>%elif</samp> is an "else if" construct. </p>
         <p>You may have as many of these as you'd like.</p>
      </td>
      <td><pre class="snug">$ <b>cat tmp.cfg</b>
%define foo Hello!
%if !defined(%{foo})
%   info This text will not be included
%elif defined(%{bar})
%   info This text won't be included either
%elif '%{foo}' eq 'Hello!'
%   info This text WILL be included
%else
%   info Alas, the else here is left out as well.
%endif
$ <b>configpp --config=tmp | grep INFO </b>
  INFO: This text WILL be included
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
      </td>
   </tr>
</table>

<!-- .......................................................................................................................... -->
<h4 id="sectionVII.E.6">    VII.E.6.   Preprocessor Example: Picking CPUs
</h4>

<div class="l1">

   <p>Here is an example that uses expressions to help assign jobs to processors.
   <br />Hidekatsu would like to pick the number of copies, or the number of threads, based on how many cores are
   available:</p>

   <table class="noborder" style="font-size:10pt;">
      <tr>
         <td>
            <div class="exHeader" id="preprocessorExample2"><span class="nb"><b>Preprocessor
                     Example 2:</b> Using expressions to bind processes</span></div>
            <pre>$ <b>cat hidekatsu.cfg </b>
include: TurboBlaster9000.inc

503.bwaves_r=peak:
   copies      = %{Use1PerCore}
557.xz_r=peak:
   copies      = %{Use2PerCore}

603.bwaves_s=peak:
   threads     = %{Use3PerCore}
657.xz_s=peak:
   threads     = %{Use2PerCore}
$ </pre>
         </td>
         <td style="vertical-align:middle;"> <p>Notice that the config file begins by including <kbd class="snugr">TurboBlaster9000.inc</kbd>, which is shown
            next</p>
         </td>
      </tr>

      <tr>
         <td rowspan="6" style="border:none;">
            <pre style="margin-left:2px;font-size:10pt;margin-top:0em;">$ <b>cat -n TurboBlaster9000.inc </b>
  1  # TurboBlaster 9000 has:
  2  #   1 to 4    chips per system
  3  #   2         cores per chip
  4  #   3         hardware threads (virtual CPUs) per core
  5
  6  %ifndef %{chips}
  7  %   error Please say runcpu --define chip=N
  8  %endif
  9
 10  %define   cores        2 * %{chips}
 11
 12  %define   Use1PerCore  1 * %{cores}
 13  %define   Use2PerCore  2 * %{cores}
 14  %define   Use3PerCore  3 * %{cores}
 15
 16  # Use 'bind' to place jobs on alternating chips
 17  # and alternating cores.
 18
 19         # core 0           core 1
 20  %if %{chips} == 1
 21     bind=\
 22           0                3          \
 23           1                4          \
 24           2                5
 25  %elif %{chips} == 2
 26     bind=\
 27           0  6             3  9       \
 28           1  7             4 10       \
 29           2  8             5 11
 30  %elif %{chips} == 3
 31     bind=\
 32           0  6 12          3  9 15    \
 33           1  7 13          4 10 16    \
 34           2  8 14          5 11 17
 35  %elif %{chips} == 4
 36     bind=\
 37           0  6 12 18       3  9 15 21 \
 38           1  7 13 19       4 10 16 22 \
 39           2  8 14 20       5 11 17 23
 40  %endif </pre>
         </td>
         <td style="vertical-align:middle;border:none;height:6em;">Lines 1-4: Comments describe the (fictional) system.
         </td>
      </tr>
      <tr>
         <td style="vertical-align:top;border:none;height:5em;">Lines 6-8: We expect to be told the number of chips; if not,
            exit with an error.</td>
      </tr>
      <tr>
         <td style="vertical-align:top;border:none;height:2em;">Line 10: Calculate how many cores are available.</td>
      </tr>
      <tr>
         <td style="vertical-align:top;border:none;height:5em;">Lines 12-14: Above, benchmarks made requests for numbers of
            copies or threads, such as <kbd class="nbsnugr" style="font-size:100%;">%{Use2PerCore}</kbd>.  Translate such
            requests into system totals.</td>
      </tr>
      <tr>
         <td style="vertical-align:top;border:none;height:12em;">Lines 16-40: A <kbd style="font-size:100%;">bind</kbd> statement
            is constructed to spread the work. (We&nbsp;assume here that virtual CPUs are numbered sequentially: chip 0 has CPUs
            0 to 5, its first core has 0,1,2; and so forth.)</td>
      </tr>
      <tr>
         <td style="height:14em;vertical-align:top;border:none;"><p class="snug">Lines 27-29: For example, a system with 2
            chips has 4 cores and 12 virtual CPUs.  Copies are dispatched such that:</p>
            <ul class="snugtop">
               <li>A 2-copy benchmark uses 1 virtual CPU per chip: <samp>0&nbsp;and&nbsp;6</samp></li>
               <li>A 4-copy benchmark uses 1 virtual CPU per core and 2 CPUs per chip: <samp>0&nbsp;6&nbsp;3&nbsp;9</samp></li>
               <li>An 8-copy benchmark uses 2 virtual CPUs per core and 4 CPUs per chip:
                  <samp>0&nbsp;6&nbsp;3&nbsp;9&nbsp;1&nbsp;7&nbsp;4&nbsp;10</samp></li>
               <li>A 12-copy benchmark uses all the available virtual CPUs.</li>
            </ul>
         </td>
      </tr>
   </table>

   <p>If you would like to see the preprocessed config file without actually running it, you can use 'configpp', as shown below.
   As expected, the number of copies or threads varies with the number of chips.</p>

   <table>
      <tr>
         <td style="vertical-align:bottom;">
            <pre style="margin-left:3px;font-size:90%;">$ <b>cat hidekatsu.cfg </b>
include: TurboBlaster9000.inc

503.bwaves_r=peak:
   copies      = %{Use1PerCore}
557.xz_r=peak:
   copies      = %{Use2PerCore}

603.bwaves_s=peak:
   threads     = %{Use3PerCore}
657.xz_s=peak:
   threads     = %{Use2PerCore}
$
            </pre>
         </td>

         <td style="border-left:thin solid gray;border-right:thin solid gray;">
            <pre style="margin-left:3px;font-size:90%;">$ <b>configpp -c hidekatsu \
  --output=one.out \
  --define chips=1</b>

  ...

$ <b>tail -17 one.out.cfg </b>
   bind=\
    0      3   \
    1      4   \
    2      5

503.bwaves_r=peak:
   copies   = 2
557.xz_r=peak:
   copies   = 4

603.bwaves_s=peak:
   threads  = 6
657.xz_s=peak:
   threads  = 4
            </pre>
         </td>
         <td style="border-right:thin solid gray;">
            <pre style="margin-left:3px;font-size:90%;">$ <b>configpp -c hidekatsu \
  --output=two.out \
  --define chips=2</b>

   ...

$ <b>tail -17 two.out.cfg </b>
   bind=\
    0  6    3  9  \
    1  7    4 10  \
    2  8    5 11

503.bwaves_r=peak:
   copies   = 4
557.xz_r=peak:
   copies   = 8

603.bwaves_s=peak:
   threads  = 12
657.xz_s=peak:
   threads  = 8
            </pre>
         </td>
         <td>
            <pre style="margin-left:3px;font-size:90%;">$ <b>configpp -c hidekatsu \
  --output=four.out \
  --define chips=4</b>

  ...

$ <b>tail -17 four.out.cfg </b>
   bind=\
   0  6 12 18   3  9 15 21 \
   1  7 13 19   4 10 16 22 \
   2  8 14 20   5 11 17 23

503.bwaves_r=peak:
   copies   = 8
557.xz_r=peak:
   copies   = 16

603.bwaves_s=peak:
   threads  = 24
657.xz_s=peak:
   threads  = 16
            </pre>
         </td>
      </tr>
   </table>

</div>

<!-- .......................................................................................................................... -->
<h3 id="sectionVII.F">      VII.F.     Informational Directives
</h3>

<p class="l1">It's often helpful to be able to warn or exit on certain conditions.  Perhaps there's a macro that <i>must</i>
be set to a particular value, or maybe it's just very highly recommended.</p>


<!-- .......................................................................................................................... -->
<h4 id="sectionVII.F.1">    VII.F.1.   %warning
   <span id="Warning"> </span>
   <span id="warning"> </span>
</h4>

<div class="l1">

   <p>When the preprocessor encounters a <samp class="nb">%warning</samp> directive, it prints the text following to stdout
   and the current log file, along with its location within the file being read, and continues on.</p>

   <pre class="l1snugish">$ <b>cat warning.cfg </b>
%if !defined(%{somewhat_important_macro})
%   warning You have not defined somewhat_important_macro!
%endif
$
$ <b>cat warning.sh </b>
configpp --config=warning | grep -C2 WARNING
$
$ <b>./warning.sh </b>

***
  WARNING: You have not defined somewhat_important_macro!
           (From line 2 of
           /cpu2017/rc4/config/warning.cfg.)
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>

</div>


<!-- .......................................................................................................................... -->
<h4 id="sectionVII.F.2">    VII.F.2.   %error
   <span id="Error"> </span>
   <span id="error"> </span>
</h4>

<div class="l1">

   <p>Like <a href="#warning">%warning</a>, %error logs an error to stderr and the log file.  <b>Un</b>like <kbd
      class="snugr">%warning</kbd>, though, it then stops the run.</p>

   <p>Consider a slightly modified version of the previous example:</p>

   <pre class="l1snugish">$ <b>cat error.cfg </b>
%if !defined(%{REALLY_important_macro})
%   error You have not defined REALLY_important_macro!
%endif
$
$ <b>cat error.sh </b>
configpp --config=error &gt; /tmp/out
echo runcpu exit code: $?
grep -C2 ERROR /tmp/out
$ <b>./error.sh </b>
runcpu exit code: 1

************************************************************************
  ERROR: You have not defined REALLY_important_macro!
         (From line 2 of
         /Users/jhenning/spec/cpu2017/rc4/config/error.cfg.)
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>

   <p>Unlike a warning, the error will be close to the last thing output.  As you can see from the output of <kbd>echo
      $?</kbd> above, runcpu exited with an error code 1.</p>

</div>

<!-- .......................................................................................................................... -->
<h4 id="sectionVII.F.3">    VII.F.3.   %info
   <span id="Info"> </span>
   <span id="info"> </span>
</h4>

<div class="l1">

<p>The %info directive prints a message preceded by the word <kbd class="nbsnugr">INFO:</kbd>.   For example:</p>

<pre class="l2snugish">$ <b>cat -n info.cfg </b>
   1  %if !defined(%{chip}) || %{chip} !~ m/(sparc|x86)/
   2  %   error Please use --define chip=sparc or --define chip=x86
   3  %endif
   4
   5  %if  %{chip} eq "sparc"
   6  %   define default_build_ncpus 64
   7  %elif %{chip} eq "x86"
   8  %   define default_build_ncpus 20
   9  %endif
  10  %ifndef   %{build_ncpus}
  11  %   define  build_ncpus   %{default_build_ncpus}
  12  %endif
  13
  14  %info Preprocessor selections:
  15  %info    .    build_ncpus      %{build_ncpus}
  16  %info    .    chip             %{chip}
  17
  18  makeflags = --jobs=%{build_ncpus}
$ <b>configpp -c info --define chip=sparc | grep -e make -e INFO</b>
  INFO: Preprocessor selections:
  INFO: .    build_ncpus      64
  INFO: .    chip             sparc
makeflags = --jobs=64
$ <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>

<p>Note in the example above:</p>
<ul>
   <li>Line 1 demonstrates basic perl regular expression matching</li>
   <li>Lines 14-16 use <kbd class="nb">%info</kbd></li>
   <li>After all preprocessing has been completed, line 18 tells the <a class="external" href="utility.html#specmake">specmake</a>
   utility that it can start up to 64 compile jobs</li>
</ul>

<p class="snugbot"><span class="new">The %info directive is new with CPU 2017.</span></p>

</div>

<!-- .......................................................................................................................... -->
<h4 id="sectionVII.F.4">    VII.F.4.   %dumpmacros
   <span id="Dumpmacros"> </span>
   <span id="dumpmacros"> </span>
   <span id="Dump-macros"> </span>
   <span id="dump-macros"> </span>
</h4>

<div class="l1">

   <p>The <samp>%dumpmacros</samp> directive prints the values of all macros currently defined at the point where it appears.
   <br />If you add the argument <samp>all</samp> to the directive, it will include all your environment macros.
   <br />Each macro value is preceded by the word '<kbd class="nbsnug">DBG:</kbd>'.  </p>

   <pre>$ <b>cat -n dumpmacros.cfg </b>
  1  %if !defined(%{chip}) || %{chip} !~ m/(sparc|x86)/
  2  %   error Please use --define chip=sparc or --define chip=x86
  3  %endif
  4
  5  %if  %{chip} eq "sparc"
  6  %   define default_build_ncpus 64
  7  %elif %{chip} eq "x86"
  8  %   define default_build_ncpus 20
  9  %endif
 10  %ifndef   %{build_ncpus}
 11  %   define  build_ncpus   %{default_build_ncpus}
 12  %endif
 13
 14  %dumpmacros
$
$ <b>configpp -c dumpmacros --define chip=sparc | grep -e DBG</b>
  DBG: build_ncpus: '%{default_build_ncpus}'
  DBG: chip: 'sparc'
  DBG: default_build_ncpus: '64'
  DBG: runcpu: 'configpp -c dumpmacros --define chip=sparc'
  .
  .
  .
$ </pre>

   <p class="snugbot"><span class="new">The %dumpmacros directive is new with CPU 2017.</span></p>

</div>

<!-- .......................................................................................................................... -->
<h4 id="sectionVII.G">      VII.G.     Predefined macros and the environment
   <span id="Predefined-macros"> </span>
   <span id="Predefined.macros"> </span>
   <span id="PredefinedMacros"> </span>
   <span id="Predefined_macros"> </span>
   <span id="Predefinedmacros"> </span>
   <span id="predefined-macros"> </span>
   <span id="predefined.macros"> </span>
   <span id="predefinedMacros"> </span>
   <span id="predefined_macros"> </span>
   <span id="predefinedmacros"> </span>

   <span id="ENV-macros"> </span>
   <span id="ENV.macros"> </span>
   <span id="ENV_macros"> </span>
   <span id="ENVmacros"> </span>
   <span id="EnvMacros"> </span>
   <span id="env-macros"> </span>
   <span id="env.macros"> </span>
   <span id="envMacros"> </span>
   <span id="env_macros"> </span>
   <span id="envmacros"> </span>

</h4>

<div class="l1">

   <p>Some useful macros are predefined, as shown in the table below.  </p>

   <p><span class="new">New with CPU 2017:</span>
   The config file preprocessor can do environment variable substitution.  Environment variables to be substituted use a
   percent sign and curly brackets, and the name is prefixed with the string "<kbd class="snuglr">ENV_</kbd>", as <kbd
      class="snugr">%{ENV_variable_name}</kbd>.  </p>

   <table class="l1">
      <tr>
         <th>%{configfile}</th>
         <td>The name of the config file specified on the command line (possibly not including directory path)</td>
      </tr>
      <tr>
         <th>%{endian}</th>
         <td>Indicator of endian characteristics, for example '12345678' indicating a little-endian system</td>
      </tr>
      <tr>
         <th>%{hostname}</th>
         <td>System Under Test name</td>
      </tr>
      <tr>
         <th>%{runcpu}</th>
         <td>Your original <samp>runcpu</samp> command</td>
      </tr>
      <tr>
         <th>%{top_config_file}</th>
         <td>The name of the top-level config file (likely the same as %{configfile}, one may have the full path and the
            other not)</td>
      </tr>
      <tr>
         <th style="white-space:nowrap;">%{current_config_file}</th>
         <td>The name of the config file currently being read (same as %{configfile} unless reading an included config
            file)</td>
      </tr>
      <tr>
         <th style="white-space:nowrap;">%{parent_config_file}</th>
         <td>The name of the config file that included the config file currently being read (empty for the top-level config
            file)</td>
      </tr>
      <tr>
         <th style="white-space:nowrap;">%{config_nesting_level}</th>
         <td>The number of nested includes in effect (0 for the top-level config file)</td>
      </tr>
      <tr>
         <th>%{ENV_variable}</th>
         <td><p class="snugtop">Any of your environment variables.
            <br />This simple example prints the <kbd>PATH</kbd> from your environment:</p>
            <pre class="snugish">$ <b>cat printPath.cfg </b>
%info %{ENV_PATH}
$ <b>configpp --config=printPath | grep INFO:</b>
  INFO: /spec/cpu2017/rc4/bin:/usr/local/bin:/bin/:/usr/
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>
         </td>
      </tr>
      <tr>
         <td colspan="2">For a complete list, see <a href="#dumpmacros">dumpmacros</a>.</td>
      </tr>
   </table>

</div>

<!-- .......................................................................................................................... -->
<h4 id="sectionVII.G.1">    VII.G.1.  Automating output_root</h4>

<p class="l1">  You can automatically bring an output_root into your config file using
<samp>%{ENV_GO}</samp> and navigate around it, as shown in the example for the <a class="external"
   href="utility.html#ogo">ogo</a> utility.</p>



<!-- .......................................................................................................................... -->
<h4 id="sectionVII.G.2">    VII.G.2.   Example: Adjusting the Environment
</h4>

<div class="l1">

   <p>Notice that <kbd>%{ENV_variable_name}</kbd> brings an environment variable into your config file; what if you want to
   push it back out to affect other things?  In that case, you will also need the feature <a href="#preenv">preenv</a>, which
   causes runcpu to re-invoke itself with your requested variable in the environment.</p>

   <p class="snugbot">For example, you could set up paths for your compiler using something like this:</p>

   <div class="exHeader" id="preprocessorExample3"><span class="nb"><b>Preprocessor
            Example 3:</b> Adjusting the environment</span></div>
   <pre class="l2snugish">$ <b>cat -n adjustEnv.cfg</b>
     1  action       = build
     2  output_root  = /tmp
     3  rebuild      = 1
     4  runlist      = 519.lbm_r
     5  verbose      = 99
     6
     7  %define fivetop  %{ENV_HOME}/work/compilers/gcc-5.3.0
     8  %define eighttop %{ENV_HOME}/work/compilers/gcc-8.1.0
     9
    10  %ifdef %{wantGccV8}
    11     preENV_PATH            = %{eighttop}/bin:%{ENV_PATH}
    12     preENV_LD_LIBRARY_PATH = %{eighttop}/lib64:%{ENV_LD_LIBRARY_PATH}
    13  % else
    14     preENV_PATH            = %{fivetop}/bin:%{ENV_PATH}
    15     preENV_LD_LIBRARY_PATH = %{fivetop}/lib64:%{ENV_LD_LIBRARY_PATH}
    16  %endif
    17
    18  default:
    19  CC                = gcc
    20  CC_VERSION_OPTION = -v
   </pre>
   <p class="l1snugish"> The config file above builds a single benchmark, 519.lbm_r, using the local paths for GCC 5.3 or
   8.1.  Notice that in both cases, the desired path is <span class="u">added</span> to the existing path: for example, on
   line 12, the right side accesses the existing setting via <kbd class="nb">%{ENV_LD_LIBRARY_PATH}</kbd> and the left side
   applies it to the build, via <kbd class="nbsnugr">preENV_LD_LIBRARY_PATH</kbd>.  On line 5, the config file sets <kbd
      class="snugr">verbose=99</kbd>, so that runcpu will print all possible detail and we will be able to confirm the
   adjusted variables.</p>

   <p class="l1snugbot">Below, the config file is used with and without <kbd class="nbsnugr">--define wantGccV8</kbd>, and
   the paths are set as desired:</p>

   <pre class="l2snugish">$ <b>cat adjustEnv.sh </b>
export LD_LIBRARY_PATH=my:old:path
runcpu  -c adjustEnv                     | grep -e 'Setting LD_LIBRARY_PATH' -e 'gcc version'
runcpu  -c adjustEnv --define wantGccV8  | grep -e 'Setting LD_LIBRARY_PATH' -e 'gcc version'
$ <b>./adjustEnv.sh </b>
Setting LD_LIBRARY_PATH = "/Users/jhenning/work/compilers/gcc-5.3.0/lib64:"
gcc version 5.3.0 (JLH  04-Dec-2016)
gcc version 5.3.0 (JLH  04-Dec-2016)
Setting LD_LIBRARY_PATH = "/Users/jhenning/work/compilers/gcc-8.1.0/lib64:"
gcc version 8.1.0 (jhenning-02-May-2018)
gcc version 8.1.0 (jhenning-02-May-2018)
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>

</div>


<!-- .......................................................................................................................... -->
<h2 id="sectionVIII">       VIII.      Output files - and how they relate to your config file
</h2>



<p>This section describes how the location and contents of several kinds of output files are influenced by your config
file.</p>


<!-- .......................................................................................................................... -->
<h3 id="sectionVIII.A">     VIII.A.   Help, I've got too many config files!
</h3>


<p>It was mentioned above that the <a href="#HASH">HASH</a> section of the config file is written automatically by the
tools.  Each time your config file is updated, a backup copy is made.  Thus your config directory may soon come to look like
this:</p>

<pre class="l1snugish">$ <b>cd $SPEC/config</b>
$ <b>ls tune.cfg*</b>
tune.cfg                        tune.cfg.2017-02-05T124831      tune.cfg.2017-02-05T125733
tune.cfg.2017-02-05T120242      tune.cfg.2017-02-05T125557      tune.cfg.2017-02-05T125738
tune.cfg.2017-02-05T122021      tune.cfg.2017-02-05T125603      tune.cfg.2017-02-05T125744
tune.cfg.2017-02-05T122026      tune.cfg.2017-02-05T125608      tune.cfg.2017-02-05T125749
tune.cfg.2017-02-05T124215      tune.cfg.2017-02-05T125614      tune.cfg.2017-02-05T125756
tune.cfg.2017-02-05T124222      tune.cfg.2017-02-05T125620      tune.cfg.2017-02-05T125802
tune.cfg.2017-02-05T124728      tune.cfg.2017-02-05T125626      tune.cfg.2017-02-05T125807
tune.cfg.2017-02-05T124739      tune.cfg.2017-02-05T125632      tune.cfg.2017-02-05T125812
tune.cfg.2017-02-05T124821      tune.cfg.2017-02-05T125727
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>

<p>If this feels like too much clutter, you can disable the backup mechanism, as described under <a
href="#backup_config">backup_config</a>.  Note that doing so may leave you with a risk of losing the config file in case of a
filesystem overflow or system crash.  A better idea may be to periodically remove just portions of the clutter, with
selective removal of older version; or sweep them to a wastebasket every now and then:</p>

<pre class="l1snugish">$ <b>cd $SPEC/config</b>
$ <b>mkdir wastebasket</b>
$ <b>mv *cfg.2017* wastebasket/</b>
$</pre>



<!-- .......................................................................................................................... -->
<h3 id="sectionVIII.B">     VIII.B.    The log file and verbosity levels
   <span id="log"> </span>
   <span id="Log"> </span>
   <span id="LogFiles"> </span>
   <span id="log-files"> </span>
   <span id="log.files"> </span>
   <span id="logFiles"> </span>
   <span id="log_files"> </span>
   <span id="logfiles"> </span>
   <span id="LogFile"> </span>
   <span id="log-file"> </span>
   <span id="log.file"> </span>
   <span id="logFile"> </span>
   <span id="log_file"> </span>
   <span id="logfile"> </span>
</h3>



<p><kbd>$SPEC/result</kbd> (Unix) or <kbd>%SPEC%\result</kbd> (Windows) contains reports and log files.  When you are doing a
build, you will probably find that you want to pay close attention to the log files such as
<kbd class="nbsnuglr">CPU2017.001.log</kbd>.  Depending on the verbosity level that you have selected, it will contain detailed
information about how your build went.</p>

<p>The CPU 2017 tool suite provides for varying amounts of output about its actions during a run.  These levels range from the
bare minimum of output (level 0) to copious streams of information that are probably useful only to tools developers (level
99).  Selecting one output level gives you the output from all lower levels, which may cause you to wade through more output
than you might like.</p>


<!-- .......................................................................................................................... -->
<h4 id="sectionVIII.B.1">   VIII.B.1.  Useful Search Strings
   <span id="SearchStrings"> </span>
   <span id="search-strings"> </span>
   <span id="search.strings"> </span>
   <span id="searchStrings"> </span>
   <span id="search_strings"> </span>
   <span id="searchstrings"> </span>
   <span id="SearchingLogfiles"> </span>
   <span id="searching-logfiles"> </span>
   <span id="searching.logfiles"> </span>
   <span id="searchingLogfiles"> </span>
   <span id="searching_logfiles"> </span>
   <span id="searchinglogfiles"> </span>
</h4>



<p class="l1">When you are trying to find your way through a log file, you will probably find these (case-sensitive) search
strings useful:</p>

<table class="l1">
<tr><th>runcpu:</th><td>The runcpu command for this log. </td></tr>

<tr><th>Running</th><td>Printed at the top of a run of a benchmark.  </td></tr>

<tr><th>#</th><td>Printed at the top of a run of a benchmark for runs with multiple iterations.  Useful for finding the ref
workloads in reportable runs.  </td></tr>

<tr><th>runtime</th><td>Printed at the end of a benchmark run.  </td></tr>

<tr><th>Copy</th><td>Times for individual copies in a SPECrate run.  </td></tr>

<tr><th>Building</th><td>Printed at the beginning of a benchmark compile.  </td></tr>

<tr><th>Elapsed&nbsp;compile</th><td>Printed at the end of a benchmark compile.  </td></tr>

</table>


<!-- .......................................................................................................................... -->
<h4 id="sectionVIII.B.2">   VIII.B.2.  About Temporary Debug Logs
   <span id="DebugLogs"> </span>
   <span id="debug-logs"> </span>
   <span id="debug.logs"> </span>
   <span id="debugLogs"> </span>
   <span id="debug_logs"> </span>
   <span id="debuglogs"> </span>
   <span id="DebugLog"> </span>
   <span id="debug-log"> </span>
   <span id="debug.log"> </span>
   <span id="debugLog"> </span>
   <span id="debug_log"> </span>
   <span id="debuglog"> </span>
</h4>



<p class="l1">There are also temporary debug logs, such as <kbd class="nbsnugr">CPU2017.001.log.debug</kbd>.  A debug log
contains very detailed debugging output from the SPEC tools, as if <a class="external" href="runcpu.html#verbose">--verbose
99</a> had been specified. </p>

<p class="l1">For a successful run, the debug log will be removed automatically, unless you specify "<a class="external"
href="runcpu.html#keeptmp">--keeptmp</a>" on the command line, or "<a href="#keeptmp">keeptmp=yes</a>" in your config file.</p>

<p class="l1">For a failed run, the debug log is kept.  The debug log may seem overwhelmingly wordy, repetitive, detailed,
redundant, repetitive, and long-winded, and therefore useless.  Suggestion: after a failure, try looking in the regular log
first, which has a default verbosity level of 5.  If your regular log doesn't have as much detail as you wish, then you can
examine the additional detail in the debug log.  </p>

<p class="l1">If you file a <a class="external" href="techsupport.html">support request</a>, you may be asked to send in the debug
log.</p>



<!-- .......................................................................................................................... -->
<h4 id="sectionVIII.B.3">   VIII.B.3.  Verbosity levels
   <span id="Verbosity-levels"> </span>      <span id="Verbosity-level"> </span>       <span id="Verbose-level"> </span>
   <span id="Verbosity.levels"> </span>      <span id="Verbosity.level"> </span>       <span id="Verbose.level"> </span>
   <span id="VerbosityLevels"> </span>       <span id="VerbosityLevel"> </span>        <span id="VerboseLevel"> </span>
   <span id="Verbosity_levels"> </span>      <span id="Verbosity_level"> </span>       <span id="Verbose_level"> </span>
   <span id="Verbositylevels"> </span>       <span id="Verbositylevel"> </span>        <span id="Verboselevel"> </span>
   <span id="verbosity-levels"> </span>      <span id="verbosity-level"> </span>       <span id="verbose-level"> </span>
   <span id="verbosity.levels"> </span>      <span id="verbosity.level"> </span>       <span id="verbose.level"> </span>
   <span id="verbosityLevels"> </span>       <span id="verbosityLevel"> </span>        <span id="verboseLevel"> </span>
   <span id="verbosity_levels"> </span>      <span id="verbosity_level"> </span>       <span id="verbose_level"> </span>
   <span id="verbositylevels"> </span>       <span id="verbositylevel"> </span>        <span id="verboselevel"> </span>

   <span id="Verbosity"> </span>
   <span id="verbosity"> </span>

</h4>



<p class="l1">The 'level' referred to in the table below is selected either in the config file <a href="#verbose">verbose</a>
option or in the runcpu command as in '<kbd class="nbsnuglr">runcpu --verbose <b>n</b></kbd>'.</p>

<p class="l1">Levels higher than 99 are special; they are always output to your log file.  You can also see them on the
screen if you set verbosity to the specified level minus 100.  For example, the default log level is 5.  This means that on
your screen you will get messages at levels 0 through 5, and 100 through 105.  In your log file, you'll find the same
messages, plus the messages at levels 106 through 199.</p>

<table>
<tr>
   <td><b>Level</b></td>
   <td><b>What you get</b></td>
</tr>

<tr>
   <td><kbd>0</kbd></td>
   <td>Basic status information, and most errors.  These messages can not be turned off.</td>
</tr>

<tr>
   <td><kbd>1</kbd></td>
   <td>List of the benchmarks which will be acted upon.</td>
</tr>

<tr>
   <td><kbd>2</kbd></td>
   <td>A list of possible output formats, as well as notification when beginning and ending each phase of operation (build,
   setup, run, reporting).</td>
</tr>

<tr>
   <td><kbd>3</kbd></td>
   <td>A list of each action performed during each phase of operation (e.g. "Building 176.gcc", "Setting up
   253.perlbmk")</td>
</tr>

<tr>
   <td><kbd>4</kbd></td>
   <td>Notification of benchmarks excluded</td>
</tr>

<tr>
   <td><kbd>5 (default)</kbd></td>
   <td>Notification if a benchmark somehow was built but nevertheless is not executable.</td>
</tr>

<tr>
   <td><kbd>6</kbd></td>
   <td>Time spent doing automatic flag reporting.</td>
</tr>

<tr>
   <td><kbd>7</kbd></td>
   <td>Actions to update SPEC-supplied flags files.</td>
</tr>

<tr>
   <td><kbd>10</kbd></td>
   <td>Information on basepeak operation.</td>
</tr>

<tr>
   <td><kbd>12</kbd></td>
   <td>Errors during discovery of benchmarks and output formats.</td>
</tr>

<tr>
   <td><kbd>15</kbd></td>
   <td>Information about certain updates to stored config files</td>
</tr>

<tr>
   <td><kbd>24</kbd></td>
   <td>Notification of additions to and replacements in the list of benchmarks.</td>
</tr>

<tr>
   <td><kbd>30</kbd></td>
   <td>A list of options which are included in the hash of options used to determine whether or not a given binary needs
   to be recompiled.</td>
</tr>

<tr>
   <td><kbd>35</kbd></td>
   <td>A list of key=value pairs that can be used in command and notes substitutions, and results of env_var settings.</td>
</tr>

<tr>
   <td><kbd>40</kbd></td>
   <td>A list of 'submit' commands for each benchmark.
      <br />Note: If you would like to see all of the submit commands for every copy and every benchmark invocation, with all
      your variables (such as <samp class="snugr">$BIND</samp>) resolved, try <kbd class="nbsnugr">runcpu --verbose=40
         --fake</kbd>, or go to the run directory and use <a class="external" href="utility.html#specinvoke">specinvoke
         -n</a> (dry run).</td>
</tr>

<tr>
   <td><kbd>70</kbd></td>
   <td>Information on selection of median results.</td>
</tr>

<tr>
   <td><kbd>89</kbd></td>
   <td>Progress comparing run directory checksum for executables.</td>
</tr>

<tr>
   <td><kbd>90</kbd></td>
   <td>Time required for various internal functions in the tools.</td>
</tr>

<tr>
   <td><kbd>95, 96, 97, 98</kbd></td>
   <td>Flag parsing progress during flag reporting (progressively more detail)</td>
</tr>


<tr>
   <td style="padding-bottom:0.7em;"><kbd>99</kbd></td>
   <td>Gruesome detail of comparing hashes of files being copied during run directory setup.</td>
</tr>

<tr>
   <td colspan="2" class="gray">
      <b>Messages at the following levels will always appear in your log files</b></td>
</tr>

<tr>
   <td><kbd>100</kbd></td>
   <td>Various config file errors, such as bad preprocessor directives, bad placement of certain options, illegal
   characters...</td>
</tr>

<tr>
   <td><kbd>102</kbd></td>
   <td>Information about output formats that could not be loaded.</td>
</tr>

<tr>
   <td><kbd>103</kbd></td>
   <td>A tally of successes and failures during the run broken down by benchmark.</td>
</tr>

<tr>
   <td><kbd>106</kbd></td>
   <td>A list of runtime and calculated ratio for each benchmark run.</td>
</tr>

<tr>
   <td><kbd>107</kbd></td>
   <td>Dividers to visually block each phase of the run.</td>
</tr>

<tr>
   <td><kbd>110</kbd></td>
   <td>Elapsed time for each portion of a workload (if an executable is invoked more than once).</td>
</tr>

<tr>
   <td><kbd>120</kbd></td>
   <td>Messages about which commands are being issued for which benchmarks.</td>
</tr>

<tr>
   <td><kbd>125</kbd></td>
   <td>A listing of each individual child processes' start, end, and elapsed times.</td>
</tr>

<tr>
   <td><kbd>130</kbd></td>
   <td>A nice header with the time of the runcpu invocation and the command line used.  Information about what happened with
   your <a href="#sysinfo-program">sysinfo program</a></td>
</tr>

<tr>
   <td><kbd>140</kbd></td>
   <td>General information about the settings for the current run.</td>
</tr>

<tr>
   <td><kbd>145</kbd></td>
   <td>Messages about file comparisons.</td>
</tr>

<tr>
   <td><kbd>150</kbd></td>
   <td>List of commands that will be run, and details about the settings used for comparing output files.  Also the contents
   of the makefile written.</td>
</tr>

<tr>
   <td><kbd>155</kbd></td>
   <td>Start, end, and elapsed times for benchmark run.</td>
</tr>

<tr>
   <td><kbd>160</kbd></td>
   <td>Start, end, and elapsed times for benchmark compilation.</td>
</tr>

<tr>
   <td><kbd>180</kbd></td>
   <td>stdout and stderr from commands run</td>
</tr>

<tr>
   <td><kbd>190</kbd></td>
   <td>Start and stop of <a href="#delay">delay</a>s</td>
</tr>

<tr>
   <td><kbd>191</kbd></td>
   <td>Notification of command line used to run specinvoke.</td>
</tr>
</table>



<!-- .......................................................................................................................... -->
<h3 id="sectionVIII.C">     VIII.C.    Deciphering an FDO log file
</h3>


<p>This section demonstrates how to find various portions of a log file using an example build with  feedback-directed
optimization (FDO).  See the section <a href="#UsingFeedback">Using Feedback</a> for more information on how to enable FDO.
</p>

<p class="snugbot">FDO typically requires two compiles. The first creates an executable image with instrumentation.  You run
the program with a "training" workload, the instrumentation observes it, and a profile is written.  The second compile then
uses the profile to improve optimization.   SPEC CPU makes all of this relatively easy.  Here's a config file that builds
519.lbm_r with FDO:</p>

<div class="exHeader" id="fdoExample8"><span><b>FDO Example 8:</b> FDO tracks in the log file </span>
   <span id="FDO-example-log"> </span>
   <span id="FDO.example.log"> </span>
   <span id="FDO_example_log"> </span>
   <span id="FDOexamplelog"> </span>
   <span id="FdoExampleLog"> </span>
   <span id="fdo-example-log"> </span>
   <span id="fdo.example.log"> </span>
   <span id="fdoExampleLog"> </span>
   <span id="fdo_example_log"> </span>
   <span id="fdoexamplelog"> </span>
   <span id="FDO-log"> </span>
   <span id="FDO.log"> </span>
   <span id="FDO_log"> </span>
   <span id="FDOlog"> </span>
   <span id="FdoLog"> </span>
   <span id="fdo-log"> </span>
   <span id="fdo.log"> </span>
   <span id="fdoLog"> </span>
   <span id="fdo_log"> </span>
   <span id="fdolog"> </span>
</div>

<pre  class="l1snugish">$ <b>cat mat.cfg</b>
iterations            = 1
label                 = blue271
runlist               = 519.lbm_r
size                  = test
teeout                = yes
tune                  = peak
default:
   CC                 = gcc
   CC_VERSION_OPTION  = -v
fprate=peak:
   OPTIMIZE           = -O2
   PASS1_OPTIMIZE     = -fprofile-generate
   PASS2_OPTIMIZE     = -fprofile-use

$ <b>cat mat.sh</b>
runcpu --config=mat | grep -e Training -e lbm.c -e .log
$ <b>./mat.sh </b>
gcc -c -o lbm.o -DSPEC -DSPEC_CPU -DNDEBUG -DSPEC_AUTO_SUPPRESS_OPENMP -O2 -fprofile-generate lbm.c
Training 519.lbm_r with the train workload
gcc -c -o lbm.o -DSPEC -DSPEC_CPU -DNDEBUG -DSPEC_AUTO_SUPPRESS_OPENMP -O2 -fprofile-use      lbm.c
The log for this run is in /vampir/cpu2017/rc4/result/CPU2017.838.log
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>

<p>The <kbd>PASSn_OPTIMIZE</kbd> lines cause FDO to happen.  The <kbd>grep</kbd> picks out a few lines of interest: compile
using <kbd class="nb">-fprofile-generate;</kbd> run the training workload; recompile with
<kbd class="nb">-fprofile-use.</kbd></p>

<p>For much more detail, you can examine the log file.  In this section, the log file from the above command is used (with
light editing for readability, e.g. adjusted white space).  Useful search strings are bolded.</p>

<p class="hanging1snugbot"><b>'runcpu:'</b> Search for <kbd>runcpu:</kbd> to verify that we have the correct log file:</p>

<pre class="l2snugish">$ <b>go result</b>                 <a href="utility.html#go" class="external">(go)</a>
/vampir/cpu2017/rc4/result
$ <b>grep runcpu: CPU2017.837.log </b>
runcpu: runcpu --config=mat
$</pre>
<p>Yes, this looks like the right log.  Bring it up in an editor.</p>

<p class="hanging1snugbot"><b>'Building'</b> If you search for <kbd class="snugr">Building</kbd>, you will find what was
written to <kbd>Makefile.deps</kbd> (dependencies) and <kbd>Makefile.spec</kbd> (the actual Makefile).  In this case, there
are no dependencies.</p>


<pre class="l2snugish">  <b>Building</b> 519.lbm_r peak blue271: (build_peak_blue271.0000) [2017-02-14 05:26:09]
Wrote to makefile
'/vampir/cpu2017/rc4/benchspec/CPU/519.lbm_r/build/build_peak_blue271.0000/Makefile.deps':


# End dependencies
# These are the build dependencies
Wrote to makefile
'/vampir/cpu2017/rc4/benchspec/CPU/519.lbm_r/build/build_peak_blue271.0000/<b>Makefile.spec</b>':
TUNE=peak
LABEL=blue271
NUMBER=519
NAME=lbm_r
SOURCES= lbm.c main.c
EXEBASE=lbm_r
NEED_MATH=yes
BENCHLANG=C

BENCH_FLAGS      = -DSPEC_AUTO_SUPPRESS_OPENMP
CC               = gcc
CC_VERSION_OPTION = -v
OPTIMIZE         = -O2
OS               = unix
PASS1_OPTIMIZE   = -fprofile-generate
PASS2_OPTIMIZE   = -fprofile-use </pre>


<p class="hanging1snugbot"><b>'specmake'</b> Search for <kbd class="snugr">specmake</kbd>.  There will be several hits.  For
a more narrow search, use &nbsp;<kbd>^specmake.*build</kbd>&nbsp; if your editor allows it.  Below, </p>
<p class="l2snug"><kbd>specmake clean</kbd> removes old files
<br /><kbd>specmake build</kbd> does the actual build
<br /><kbd>specmake options</kbd> generates a summary list of options from the build.</p>
<p class="l1snug">Just after the <kbd>specmake build</kbd> is the first set of actual compile commands.  There are
several mandatory flags added by the toolset.  For example, a flag is added to suppress <a href="#openmp">OpenMP</a>
directives, because this is a SPECrate run.  You can also see <kbd class="nb">-O2 -fprofile-generate</kbd> as requested
in the config file.</p>

<pre class="l2snugish">Issuing make.clean command 'specmake --output-sync clean'
<b>specmake</b> --output-sync <b>clean</b>
Start make.clean command: 2017-02-14 05:26:09 (1487067969.8877)
rm -rf *.o  lbm.out
find . \( -name \*.o -o -name '*.fppized.f*' -o -name '*.i' -o -name '*.mod' \) -print | xargs rm -rf
rm -rf lbm_r
rm -rf lbm_r.exe
rm -rf core
Stop make.clean command: 2017-02-14 05:26:10 (1487067970.06632)
Elapsed time for make.clean command: 00:00:00 (0.178615808486938)
Issuing fdo_make_pass1 command 'specmake --output-sync --always-make build FDO=PASS1'
<b>specmake</b> --output-sync --always-make <b>build</b> FDO=PASS1
Start fdo_make_pass1 command: 2017-02-14 05:26:10 (1487067970.06816)
gcc -c -o lbm.o  -DSPEC -DSPEC_CPU -DNDEBUG -DSPEC_AUTO_SUPPRESS_OPENMP -O2 -fprofile-generate  lbm.c
gcc -c -o main.o -DSPEC -DSPEC_CPU -DNDEBUG -DSPEC_AUTO_SUPPRESS_OPENMP -O2 -fprofile-generate  main.c
gcc       -O2  -fprofile-generate        lbm.o main.o             -lm         -o lbm_r
Stop fdo_make_pass1 command: 2017-02-14 05:26:10 (1487067970.73817)
Elapsed time for fdo_make_pass1 command: 00:00:00 (0.670012950897217)
Issuing options1 command 'specmake --output-sync options FDO=PASS1'
<b>specmake</b> --output-sync <b>options</b> FDO=PASS1
Start options1 command: 2017-02-14 05:26:10 (1487067970.73965)</pre>

<p class="l1snug">If you are curious about the build command</p>
<pre class="l2snug">specmake --output-sync --always-make build FDO=PASS1</pre>
<p class="l1snug">the details are:</p>
<p class="l2snug"><a class="external" href="utility.html#specmake">specmake</a> is
<a class="external" href="https://www.gnu.org/software/make/manual/">GNU Make</a>.
<br /><kbd class="nb">--output-sync</kbd> consolidates compiler stdout and stderr messages by module
<br /><kbd class="nb">--always-make</kbd> rebuilds all targets
<br /><kbd class="nb">build</kbd> selects the target which is the benchmark executable in <kbd>$SPEC/benchspec/Makefile.defaults</kbd>
<br /><kbd class="nb">FDO=PASS1</kbd> turns on the Feedback Directed Optimization switches matching <kbd>PASS1</kbd> in <kbd>Makefile.defaults</kbd>
<br />For more information on how SPEC CPU 2017 builds work, see the <a href="makevars.html" class="external">Make Variables</a> document.
</p>


<p class="hanging1snugbot"><b>'Training'</b> Search for <kbd class="snugr">Training</kbd>. At the top of this section,
runcpu forces single threading (effectively disabling <a href="#openmp">OpenMP</a>) because this is a SPECrate
run.  It takes a bit over 26 seconds to run the training workload. </p>

<pre class="l2snugish"><b>Training</b> 519.lbm_r with the train workload
OpenMP environment variables removed: None
OpenMP environment variables in effect:
    OMP_NUM_THREADS       '1'
    OMP_THREAD_LIMIT      '1'
Pre-run environment changes:
    'OMP_NUM_THREADS' added: (value now '1')
    'OMP_THREAD_LIMIT' added: (value now '1')
Commands to run (specinvoke command file):
  -N C
  -C /vampir/cpu2017/rc4/benchspec/CPU/519.lbm_r/build/build_peak_blue271.0000
  <b>-o lbm.out -e lbm.err ../build_peak_blue271.0000/lbm_r 300 reference.dat 0 1 100_100_130_cf_b.of </b>
Specinvoke: /vampir/cpu2017/rc4/bin/specinvoke -d /vampir/cpu2017/rc4/benchspec/CPU/519.lbm_r/build...
Issuing command '/vampir/cpu2017/rc4/bin/specinvoke -d /vampir/cpu2017/rc4/benchspec/CPU/519.lbm_r/...
/vampir/cpu2017/rc4/bin/specinvoke -d /vampir/cpu2017/rc4/benchspec/CPU/519.lbm_r/build/build_peak_...
Start command: 2017-02-14 05:26:11 (1487067971.19247)
Stop command: 2017-02-14 05:26:37 (1487067997.72349)
Elapsed time for command: 00:00:26 (26.5310192108154)
Workload elapsed time (copy 0 workload 1) = 26.366245 seconds
Copy 0 of 519.lbm_r (peak train) run 1 finished at 2017-02-14 05:26:37. Total elapsed time: 26.3662</pre>

<p class="l1snug">Notice the section 'Commands to run'.  The key line begins with <kbd class="nb">-o</kbd> which tells <a
   class="external" href="utility.html#specinvoke">specinvoke</a> to</p>
<p class="l2snug">
send output to <kbd>lbm.out</kbd> (from <kbd class="nbsnugr">-o lbm.out</kbd>)
<br />send errors to <kbd>lbm.err</kbd> (from <kbd class="nbsnugr">-e lbm.err</kbd>)
<br />run the benchmark executable binary <kbd>lbm_r</kbd> (from <kbd class="snugr">..path../lbm_r</kbd>)
<br />with arguments <kbd>300 reference.dat 0 1 100_100_130_cf_b.of </kbd>
</p>
<p class="l1snugtop">Some benchmarks run more than once and have multiple lines that start with <kbd class="nb">-o</kbd> in the
corresponding location.  For example, the compression benchmark 557.xz_r compresses several different kinds of input
stream.  You can see the inputs that SPEC has provided for training purposes in the directories
<kbd class="nb">nnn.benchmark/data/train/input</kbd> and <kbd class="nbsnugr">nnn.benchmark/data/all/input</kbd>.  In some
cases, the training workloads required significant development effort. As a user of the suite you don't have to worry
about that; you simply apply them.</p>

<p class="commentary">
   <span id="Training-fidelity"> </span>
   <span id="Training.fidelity"> </span>
   <span id="TrainingFidelity"> </span>
   <span id="Training_fidelity"> </span>
   <span id="Trainingfidelity"> </span>
   <span id="training-fidelity"> </span>
   <span id="training.fidelity"> </span>
   <span id="trainingFidelity"> </span>
   <span id="training_fidelity"> </span>
   <span id="trainingfidelity"> </span>
   <span id="Feedback-Research"> </span>
   <span id="Feedback.Research"> </span>
   <span id="FeedbackResearch"> </span>
   <span id="Feedback_Research"> </span>
   <span id="feedback-research"> </span>
   <span id="feedback.research"> </span>
   <span id="feedbackResearch"> </span>
   <span id="feedback_research"> </span>
   <span id="feedbackresearch"> </span>
   <span id="FDO-Research"> </span>      <span id="FDO-research"> </span>
   <span id="FDO.Research"> </span>      <span id="FDO.research"> </span>
   <span id="FDOResearch"> </span>       <span id="FDOresearch"> </span>
   <span id="FDO_Research"> </span>      <span id="FDO_research"> </span>
   <span id="FdoResearch"> </span>       <span id="Fdoresearch"> </span>
   <span id="fdo-research"> </span>
   <span id="fdo.research"> </span>
   <span id="fdoResearch"> </span>
   <span id="fdo_research"> </span>
   <span id="fdoresearch"> </span>
   <b>About training fidelity:</b> SPEC is aware that there is some variation in the fidelity between benchmark training workloads vs. the
timed "ref" workloads.  One might argue that a training data set is "not good enough": compilers might guess incorrectly if
they rely on it; or argue that a set is "too good": compilers can guess too easily.  In the real world also, not just in benchmarking, there is
such variation, because training data sets can be difficult to find.   If you would like to experiment with different training
workloads, see the comments on using a sandbox in the document <a href="runcpu-avoidance.html" class="external">Avoiding
   runcpu</a>; see the utility <a class="external" href="utility.html#convert_to_development">convert_to_development</a>; and
please be reminded that you <a class="external" href="runrules.html#academic">must not</a> represent measurements with other
workloads as official SPEC metrics.
<a style="font-size:80%;" class="external" href="https://www.spec.org/cpu2017/Docs/config.html#FDO-research">[link to this paragraph]</a></p>


<p class="hanging1snugbot"><b>'specmake'</b> (again):  If you search again for <kbd class="snugr">specmake</kbd>, you will
come to the second <kbd class="snugr">specmake build</kbd>, which uses the generated profile.</p>

<pre class="l2snugish">Issuing fdo_make_pass2 command 'specmake --output-sync --always-make build FDO=PASS2'
specmake --output-sync --always-make build FDO=PASS2
Start fdo_make_pass2 command: 2017-02-14 05:26:38 (1487067998.25607)
gcc -c -o lbm.o  -DSPEC -DSPEC_CPU -DNDEBUG -DSPEC_AUTO_SUPPRESS_OPENMP -O2 -fprofile-use lbm.c
gcc -c -o main.o -DSPEC -DSPEC_CPU -DNDEBUG -DSPEC_AUTO_SUPPRESS_OPENMP -O2 -fprofile-use main.c
gcc       -O2  -fprofile-use        lbm.o main.o             -lm         -o lbm_r
Stop fdo_make_pass2 command: 2017-02-14 05:26:38 (1487067998.92049) </pre>

<p>And that's it.  The tools did most of the work; the user simply set the PASSn flags in the config file.</p>


<!-- .......................................................................................................................... -->
<h3 id="sectionVIII.D">     VIII.D.    Help, I've got too many log files!
</h3>



<p>If you do many builds and runs, you may find that your result directory gets too cluttered.  Within a result directory,
all <a href="#output_format">output formats</a> other than <samp>.rsf</samp> can be regenerated from your <samp>.rsf</samp>
files.  Therefore, you could reduce clutter by deleting HTML, PDF, and other reports.  You can delete old <samp>.debug</samp>
logs unless you plan to submit a <a class="external" href="techsupport.html">support request</a>. </p>

<p class="snugbot">Still feel cluttered?  A simple solution is to move your result directory aside, giving it a new name.
Don't worry about creating a new directory; <samp>runcpu</samp> will do so automatically.   You should be careful to ensure
no surprises for any currently-running users.
If you move result directories, it is a good idea to also clean temporary directories at the same time.
<br />Example:</p>

<pre class="l2snugish">cd $SPEC
mv result old-result
rm -Rf tmp/
cd <i>output_root</i>     # <span style="font-family:arial,sans-serif;">(If you use an <a href="#output_root">output_root</a>)</span>
rm -Rf tmp/</pre>

<p><b>Windows users:</b> Windows users can achieve similar effects using the <kbd>rename</kbd> command to move directories,
and the <kbd>rd</kbd> command to remove directories. </p>



<!-- .......................................................................................................................... -->
<h3 id="sectionVIII.E">     VIII.E.    Finding the build directory
</h3>



<p>As described under <a class="external" href="runcpu.html#disk_usage">"About Disk Usage" in runcpu.html</a>, the CPU 2017 tools
do the actual builds and runs in newly created directories.  The benchmark sources are never modified in the <kbd>src</kbd>
directory.</p>

<p>The <kbd>build</kbd> directories for a benchmark are located underneath that benchmarks' top-level directory, typically
<kbd class="nb">$SPEC/benchspec/CPU/nnn.benchmark/build</kbd> (Unix) or
<kbd class="nb">%SPEC%\benchspec\CPU\nnn.benchmark\build</kbd> (Windows).   </p>

   <p class="l1">(If you are using the <a class="external" href="runcpu.html#output_root">output_root</a> feature, then the first
   part of that path will change to be your requested root instead of <kbd class="snugr">SPEC</kbd>.)</p>

<p class="snugbot"> The build directories have logical names, typically of the form <kbd
   class="snugr">build_&lt;tune&gt;_&lt;label&gt;.0000</kbd>.  Continuing the <a href="#FDO-log">FDO log</a> example, this
directory was created:</p>

<pre class="l2snugish">$ <b>go lbm build</b>                <a href="utility.html#go" class="external">(go)</a>
/vampir/cpu2017/rc4/benchspec/CPU/519.lbm_r/build
$ <b>ls -ld *blue*</b>
drwxrwxr-x  40 mat staff  1360 Feb 14 05:26 build_peak_blue271.0000
$ </pre>

<p class="l1snugtop">On Windows, you would say <kbd>cd %SPEC%\benchspec\CPU\519.lbm_r\build</kbd> followed by <kbd
   class="snugr">dir build*</kbd>.</p>

<p>If the directory <kbd>build_&lt;tune&gt;_&lt;label&gt;.0000</kbd> already exists when a new build is
attempted for the same tuning and label, the directory will be re-used, unless:</p>
<ul>
   <li>You have set the environment variable <a href="runcpu.html#NO_RUNDIR_DEL"
         class="external">SPEC_CPU2017_NO_RUNDIR_DEL</a>, or </li>
<li>The directory has been left in a "locked" state by an aborted previous build. </li>
</ul>
<p>In such cases, the <kbd>0000</kbd> will be incremented until a name is generated that is available.  You can
find locked directories by searching for <kbd>lock=yes</kbd> in the file
<kbd>$SPEC/benchspec/CPU/&lt;nnn.benchmark&gt;/run/list</kbd> (Unix) or
<kbd>%SPEC%\benchspec\CPU\&lt;nnn.benchmark&gt;\run\list</kbd> (Windows).
</p>

<p>When more than one build directory has been created for a given tuning and label, you may need to trace the directory
back to the specific build attempt that created it.  You can do so by searching for the directory name in the log files:</p>


<pre class="l1snugish">$ <b>grep build_peak_blue271.0000 *log | grep Building</b>
CPU2017.838.log:  Building 519.lbm_r peak blue271: (build_peak_blue271.0000) [2017-02-14 05:26:09]
$  </pre>

<p>In the above example, the <kbd>grep</kbd> command locates log #838 as the log that corresponds to this run directory.  On
Windows, of course, you would use <kbd>findstr</kbd> instead of <kbd class="snugr">grep</kbd>.</p>




<!-- .......................................................................................................................... -->
<h3 id="sectionVIII.F">     VIII.F.    Files in the build directory
</h3>



<p>A variety of files are output to the build directory.  Here are some of the key files which can usefully be examined:</p>


<table>
<tr>
   <td><kbd>Makefile.spec</kbd></td>
   <td>The components for make that were generated for the current config file with the current set of runcpu options. </td>
</tr>

<tr>
   <td><kbd>options.out</kbd></td>
   <td>For 1 pass compile: build options summary.</td>
</tr>

<tr>
   <td><kbd>options1.out</kbd></td>
   <td>For N pass compile: summary of first pass.</td>
</tr>

<tr>
   <td><kbd>options2.out</kbd></td>
   <td>For N pass compile: summary of second pass.</td>
</tr>

<tr>
   <td><kbd>make.out</kbd></td>
   <td>For 1 pass compile: detailed commands generated. </td>
</tr>

<tr>
   <td><kbd>fdo_make_pass1.out</kbd></td>
   <td> For N pass compile: detailed commands generated for 1st pass.</td>
</tr>

<tr>
   <td><kbd>fdo_make_pass2.out</kbd></td>
   <td> For N pass compile: detailed commands generated for 2nd pass.</td>
</tr>

</table>


<!-- .......................................................................................................................... -->
<h3 id="sectionVIII.G">     VIII.G.    For more information
</h3>

<p>For more information about how the run directories work, see the descriptions of <kbd class="snugr">specinvoke</kbd>, <kbd
class="snugr">specmake</kbd>, and <kbd class="snugr">specdiff</kbd> in <a class="external" href="utility.html">utility.html</a>.</p>

<!-- .......................................................................................................................... -->
<h2 id="sectionIX" >          IX. Power measurement
   <span id="Power-Measurement"> </span>
   <span id="Power.Measurement"> </span>
   <span id="PowerMeasurement"> </span>
   <span id="Power_Measurement"> </span>
   <span id="power-measurement"> </span>
   <span id="power.measurement"> </span>
   <span id="powerMeasurement"> </span>
   <span id="power_measurement"> </span>
   <span id="powermeasurement"> </span>
</h2>

<p>SPEC CPU 2017 v1.0 provided <span class="new">new</span> capabilities for power measurement.  
   <br />As of SPEC CPU 2017
   v1.1, these capabilities are fully supported, and power results can be compared across systems.</p>   

   <p>Power measurement is optional.   </p>

   <p>Power measurement uses the same methods as other SPEC benchmarks, as initially introduced with the 
   <a class="external" href="https://www.spec.org/power_ssj2008/">SPECpower_ssj&reg;2008</a> benchmark suite.</p>

<h3 id="sectionIX.A">         IX.A. Getting started with power measurement</h3>

   <p>To get started:</p>
   <ol>
      <li><p>Review the <span class="new">new</span> SPEC CPU 2017 Run Rules regarding power, especially section 
         <a class="external" href="runrules.html#rule_3.9">3.9 Power and Temperature Measurement</a>.</p></li>
      <li><p class="snugbot">You will need additional hardware: </p>
         <ul class="snugtop">
            <li>An accepted power analyzer, which has been calibrated within the last year.   See the list of 
               <a class="external" href="https://www.spec.org/power/docs/SPECpower-Device_List.html">accepted devices</a>
               which is maintained by the SPECpower subcommittee.</li>
            <li>An accepted temperature sensor (see the same list).</li>
            <li><p class="snugtop">An x86-based Linux or Windows "Controller System", where you will run SPEC's Power and
               Temperature reporting tool, SPEC PTDaemon&trade;.  The PTDaemon controls your power analyzer and temperature sensor,
               translating vendor-specific command and hardware interfaces into a consistent interface for use by 
               <samp>runcpu</samp>.  Use the 
               <a class="external" href="https://www.spec.org/power/docs/SPECpower-Device_Compatibility.html">SPECpower Device
                  Compatibility</a> page to help you pick a controller system that is compatible with your power analyzer and
               temperature sensor.</p></li>
         </ul>
      </li>

      <li><p>On the controller system, follow the 
         <a class="external" href="https://www.spec.org/power/docs/SPEC-Power_Measurement_Setup_Guide.pdf">Power and
            Temperature Measurement Setup Guide</a> to set up PTDaemon so that the power analyzer and the temperature meter
         are available at known network locations.  There are also some examples <a href="#ptd-examples">just below</a> 
         that may help you.</p></li>

      <li><p class="snugbot">Back on the system under test, edit your config file:</p>
         <ul class="snug">
            <li><p class="snug">Enter the network locations into the <a href="#power_analyzer">power_analyzer</a> and 
               <a href="#temp_meter">temp_meter</a> fields.  For example, if your controller system is named "regler", you
               might enter: </p> 
               <pre class="snug">power_analyzer = regler:8888
temp_meter     = regler:8889</pre>
            </li>
            <li>Set the <a href="#voltage_range">voltage_range</a> field.</li>
            <li>Set the <a href="#idle_current_range">idle_current_range</a> and the 
               <a href="#current_range">current range</a> to <a href="#InitialCurrentRange">initial approximations</a> for
               the current that will be used. You may need to adjust these once you actually do some measurements.   You also
            may find that you need to set <a href="#MultipleCurrentRanges">multiple ranges</a>.  </li>
         </ul>
      </li>

      <li><p>Set <a href="#power">power = yes</a> in your config file, or use 
         <a class="external" href="runcpu.html#power">runcpu --power</a>, and try a simple run, for example:</p>
      <pre>$ runcpu -c myconfig --size=test --iterations=1 --tune=base --copies=1 519.lbm </pre>
      <p>You should see messages such as these:</p>
      <pre>Connecting to power analyzers...
Attempting to connect to PTD at regler:8888 with 30 second timeout...
Connected to 1 power analyzers
Connecting to temperature meters...
Attempting to connect to PTD at regler:8889 with 30 second timeout...
Connected to 1 temperature meters</pre>
      </li>
   </ol>

<h3 id="sectionIX.B">         IX.B. PTD Examples
   <span id="Ptd-example"> </span>     <span id="Ptd-examples"> </span>
   <span id="Ptd.example"> </span>     <span id="Ptd.examples"> </span>
   <span id="PtdExample"> </span>      <span id="PtdExamples"> </span>
   <span id="Ptd_example"> </span>     <span id="Ptd_examples"> </span>
   <span id="Ptdexample"> </span>      <span id="Ptdexamples"> </span>
   <span id="ptd-example"> </span>     <span id="ptd-examples"> </span>
   <span id="ptd.example"> </span>     <span id="ptd.examples"> </span>
   <span id="ptdExample"> </span>      <span id="ptdExamples"> </span>
   <span id="ptd_example"> </span>     <span id="ptd_examples"> </span>
   <span id="ptdexample"> </span>      <span id="ptdexamples"> </span>
</h3>

<p><b>Example connections:</b> Your particular setup for PTDaemon will depend on the details of your power analyzer,
temperature meter, and controller system.  See the list of 
<a class="external" href="https://www.spec.org/power/docs/SPECpower-Device_List.html">accepted devices</a> and the 
<a class="external" href="https://www.spec.org/power/docs/SPECpower-Device_Compatibility.html">SPECpower Device
   Compatibility</a> page.  </p>

<table class="l1">
   <tr>
      <td style="width:400px;"><p class="snugtop">The diagram on the right shows one example setup, using a Linux controller system (named
         "<samp>regler</samp>") with a USB port connected to a temperature monitor, and another USB port connected to a power analyzer
         via a USB-to-RS232 converter.  Your connections may differ.  </p>
         <p>One copy of ptd controls the analyzer, making its measurements available at network location
         <samp class="snugr">regler:8888</samp>.  Another copy of ptd controls the temperature monitor and provides data to network
         location <samp class="snugr">regler:8889</samp>.</p>  
         <p>On the System Under Test (SUT), <samp>runcpu</samp> starts up a series of SPECrate jobs, and obtains power and
         temperature data from network locations <samp>regler:8888</samp> and <samp class="snugr">regler:8889</samp>.</p>
         <p>The temperature probe is hung about 25 mm (1 inch) from the primary air intake (as the rules
         <a class="external" href="runrules.html#rule_3.9.6">require</a>).</p>  
         <p class="snugbot">All power to the SUT comes through the power analyzer.</p>
      </td>
      <td><a href="images/ptd-example.png">
            <img style="width:600px;" alt="example ptd setup" src="images/ptd-example.png" /></a></td>
   </tr>
</table>

<p><b>Software example:</b> Use the 
<a class="external" href="https://www.spec.org/power/docs/SPEC-Power_Measurement_Setup_Guide.pdf">Power and Temperature
   Measurement Setup Guide</a> to set up PTDaemon.  The details will depend on your particular power analyzer, temperature
sensor, and controller system; the following is only an example.</p>

<table class="l1" style="font-size:90%;background:">
   <tr>
      <td><p class="snugtop">From the system under test, copy the PTD binary to a controller system.</p>
         <p class="snugbot">Reminder: PTDaemon is distributed with the SPEC CPU 2017 software under
         <a class="external" href="https://www.spec.org/cpu2017/Docs/licenses.html#SPEClicense">license terms</a>
         which do not allow you to copy it outside of your licensed institution.</p>
      </td>
      <td><pre class="snug">$ <b>cd $SPEC</b>
$ <b>scp PTDaemon/binaries/ptd-linux-x86 root@regler:/root/ptd</b>
root@regler's password:
ptd-linux-x86                100% 3778KB  16.8MB/s   00:00
$</pre>
      </td>
   </tr>
   <tr>
      <td><p class="snugtop">On the controller system, verify which devices communicate with your power analyzer and
         temperature sensor.</p>

         <p>This example uses USB on Linux.  The <kbd>lsusb</kbd> command prints the devices.  The last two lines
         match what the user connected, namely, a Keyspan serial adapter (which is connected to the power analyzer)
         and  a Digi Watchport/H temperature sensor.   (Tip: in case of ambiguity, the list of 
         <a class="external" href="http://www.linux-usb.org/usb-ids.html">USB IDs</a> may help you.)</p>

         <p class="snugbot">The <kbd>dmesg</kbd> command shows which one is associated with which
         <samp>/dev/ttyUSB</samp> device.</p>
      </td>
      <td><pre class="snug">$ <b>lsusb | grep -v hub</b>
Bus 001 Device 002: ID 046b:ff01 American Megatrends, Inc. 
Bus 002 Device 002: ID 04b4:6560 Cypress Semiconductor Corp. CY7C65640 USB-2.0 "TetraHub"
Bus 005 Device 002: ID 046b:ff10 American Megatrends, Inc. Virtual Keyboard and Mouse
Bus 007 Device 002: ID 06cd:0121 Keyspan USA-19hs serial adapter
Bus 008 Device 002: ID 1608:0305 Inside Out Networks [hex] Watchport/H
$ <b>ls /dev/*USB*</b>
/dev/ttyUSB0  /dev/ttyUSB1
$ <b>dmesg | grep ttyUSB</b>
usb 7-2: Keyspan 1 port adapter converter now attached to ttyUSB0
usb 8-1: Edgeport TI 1 port adapter converter now attached to ttyUSB1
$ </pre>
      </td>
   </tr>
   <tr>
      <td><p class="snugtop">Start PTD.  In this example, a simple script starts PTDaemon with logging to files in
         the directory <samp class="snugr">/root/ptd/logs</samp>.</p>

         <p>There are many more options, as described at the 
         <a class="external" href="https://www.spec.org/power/docs/SPEC-Power_Measurement_Setup_Guide.pdf">Power and
            Temperature Measurement Setup Guide</a>.  For example, you might want to add the debug option
         <kbd>-d</kbd> while you are doing initial setup.  </p>


         <p>The <kbd>pgrep</kbd> command verifies that both copies are running.  </p>
      </td>
      <td><pre class="snug"># cat start-ptd.sh 
#!/bin/bash

PT=/root/ptd/ptd-linux-x86
LG=/root/ptd/logs

export LIBC_FATAL_STDERR_=1  # Send fatal errors to the output files

$PT    -l $LG/power.log -p 8888 wt210       /dev/ttyUSB0 &gt;&gt; $LG/power.out 2&gt;&amp;1 &amp;
$PT -t -l $LG/temp.log  -p 8889 watchport/h /dev/ttyUSB1 &gt;&gt; $LG/temp.out  2&gt;&amp;1 &amp;

# ./start-ptd.sh 
# pgrep -l ptd
16980 ptd-linux-x86
16981 ptd-linux-x86
#</pre> 
      </td>
   </tr>
</table>



<h3 id="sectionIX.C">         IX.C. Descriptive fields for power and temperature </h3>

<p>The above will you get started.  Prior to publishing any results, you will also need to fill out
the various other config file fields that describe your power and temperature measurement for human readers, for example:
   <br /><a class="switch" href="#hw_power_cal_date">      hw_power_{id}_cal_date</a> 
   <br /><a class="switch" href="#hw_power_connection">    hw_power_{id}_connection</a>
   <br /><a class="switch" href="#hw_temperature_connection">hw_temperature_{id}_connection</a>
   <br /><a class="switch" href="#hw_temperature_setup">   hw_temperature_{id}_setup</a>.</p>

<p>There are many other such fields; please search for "power" and "temp" in the list of <a href="#ReaderFields">Reader
   Fields</a> in the table of contents.</p>

<h3 id="sectionIX.D">         IX.D. Current ranges
   <span id="Current-ranges"> </span>
   <span id="Current.ranges"> </span>
   <span id="CurrentRanges"> </span>
   <span id="Current_ranges"> </span>
   <span id="Currentranges"> </span>
   <span id="current-ranges"> </span>
   <span id="current.ranges"> </span>
   <span id="currentRanges"> </span>
   <span id="current_ranges"> </span>
   <span id="currentranges"> </span>
</h3>

<p class="hanging1snugbot"><b>Analyzer Power Ranges:</b> Power analyzers typically need to be set according to the expected
incoming power.  In your config file, you estimate the current needed for the benchmarks, and then the SPEC toolset tells the
analyzer what power range to use. </p>

<p class="l1snugbot">For example, if your power analyzer has three ranges of 1&nbsp;Amp, 10&nbsp;Amps, and 20&nbsp;Amps, and
your config file has:</p>
<pre class="l2snugish">intrate:
   current_range=7
fpspeed:
   current_range=12
</pre>
<p class="l1snugtop">then the middle range will automatically be selected when running integer rate, and the upper range will
be selected when running floating point speed.</p>

<p class="hanging1"><b>Requirements:</b> The run rules <a class="external" href="runrules.html#rule_3.9.5">require</a> the
tester to pick current ranges that meet certain conditions, notably including the condition that uncertainty must be reported
at less than 1%.  This section is intended to help you with <samp>current_range</samp> selection.</p>

<p class="hanging1"><b>Auto-ranging:</b>  Some power analyzers can dynamically respond to incoming current and automatically
pick a power range.  <a href="#auto-ranging">Auto-ranging</a> may be useful during 
<a href="#InitialCurrentRange">initial setup</a>, but must be avoided for reportable runs unless there is 
<a class="external" href="runrules.html#autoranging">no other choice</a> (in which case evidence must be preserved to prove
that it was the only choice).</p>

<p class="hanging1snugbot">
   <span id="Initial-current-range"> </span>     <span id="Initial-current-ranges"> </span>
   <span id="Initial.current.range"> </span>     <span id="Initial.current.ranges"> </span>
   <span id="InitialCurrentRange"> </span>       <span id="InitialCurrentRanges"> </span>
   <span id="Initial_current_range"> </span>     <span id="Initial_current_ranges"> </span>
   <span id="Initialcurrentrange"> </span>       <span id="Initialcurrentranges"> </span>
   <span id="initial-current-range"> </span>     <span id="initial-current-ranges"> </span>
   <span id="initial.current.range"> </span>     <span id="initial.current.ranges"> </span>
   <span id="initialCurrentRange"> </span>       <span id="initialCurrentRanges"> </span>
   <span id="initial_current_range"> </span>     <span id="initial_current_ranges"> </span>
   <span id="initialcurrentrange"> </span>       <span id="initialcurrentranges"> </span>
<b>Initial Current Range:</b> You will need to pick initial values for both the expected maximum 
<a href="#current_range">current_range</a> and the expected <a href="#idle_current_range">idle_current_range</a>.  
There are several ways you can pick initial values:</p>
<ul class="l1">
   <li>Use the manufacturer's specifications.  Server manufacturers will often include a calculator on their website.</li>
   <li>Or, perhaps the service processor (aka "BMC", baseboard management controller) may tell you.</li>
   <li><p class="snug">Or, if your power analyzer supports auto-ranging, <span class="alarm">temporarily</span> set the
   <samp>current_range=auto</samp> and do a single-<a href="#iterations">iteration</a>, base <a href="#tune">tuning</a>,
      non-<a href="#reportable">reportable</a> run of floating point rate while exercising all available 
      <a class="external" href="runrules.html#CountCPUs">hardware threads</a>.  Then, either:</p> 
      <ul class="snug"> 
         <li>Observe the "Max. Power(W)" and "Idle Power(W)" from the reports and convert the watts to Amps (which will
            depend on your input voltage); or</li>
         <li><p class="snug">Check out the PTD log, looking for the maximum Amps.  For example, on a Linux controller system
            you could enter commands similar to these:</p>
             <pre class="snug"># grep ",Amps" power.log | sort -nk8 -t, | tail -3
Time,05-12-2019 07:41:48.300,Watts,2779.100000,Volts,209.010000,Amps,13.328000,PF,0.997600,Mark,507.cactuBSSN_r
Time,05-12-2019 07:41:56.300,Watts,2783.300000,Volts,208.990000,Amps,13.349000,PF,0.997700,Mark,507.cactuBSSN_r
Time,05-12-2019 07:41:47.300,Watts,2787.900000,Volts,208.980000,Amps,13.372000,PF,0.997700,Mark,507.cactuBSSN_r
# grep "Mark,Idle" power.log | sort -nk8 -t, | tail -3
Time,05-12-2019 02:06:45.600,Watts,1491.800000,Volts,210.440000,Amps,7.132000,PF,0.994000,Mark,Idle
Time,05-12-2019 02:06:44.600,Watts,1492.600000,Volts,210.470000,Amps,7.135000,PF,0.994000,Mark,Idle
Time,05-12-2019 02:06:47.600,Watts,1492.700000,Volts,210.430000,Amps,7.137000,PF,0.994000,Mark,Idle
# </pre>
             <p class="snug">The above commands search the power log, sorting numerically by the 8th field, where fields are
             delimited by commas, and print the last few (highest) records.  From the above example, one could set 
             <samp>current_range=13.4</samp> and <samp class="snugr">idle_current_range=7.2</samp>.</p></li>
       </ul>
       <p class="snug">After you complete the non-reportable, single-iteration run, <span class="alarm">change the word
          "auto"</span> to the number of Amps that were observed.  </p>
   </li>
</ul>

<p class="hanging1snug"><b>Adjusting the range:</b> You may need to adjust your initial values after you do more runs.  Keep
an eye on the reported "Max.&nbsp;Power(W)" in the various reports.   Watch for any reported errors.  For example, if you
see errors such as these:</p>
<pre class="l2snugish">ERROR: Average uncertainty of all samples from regler:8888 exceeds 1%
ERROR: Reading power analyzers returned errors</pre>
<p class="l1snugtop">then you may have set <samp>current_range</samp> to a value that is too high.</p>  
<p class="l1snugbot">On the other hand, if you see
errors such as these:</p>
<pre class="l2snugish">Meter 'regler:8888' reports 10 errors
Meter 'regler:8888' reports 10 samples, of which only 0 are good
ERROR: Power analyzer 'regler:8888' returned no measurement uncertainty information</pre>
<p class="l1snug">then one possiblity that you should check would be whether you may have set a <samp>current_range</samp>
that is too low.</p>

<p class="hanging1snugbot">
   <span id="Multiple-ranges"> </span>     <span id="Multiple-current-ranges"> </span>
   <span id="Multiple.ranges"> </span>     <span id="Multiple.current.ranges"> </span>
   <span id="MultipleRanges"> </span>      <span id="MultipleCurrentRanges"> </span>
   <span id="Multiple_ranges"> </span>     <span id="Multiple_current_ranges"> </span>
   <span id="Multipleranges"> </span>      <span id="Multiplecurrentranges"> </span>
   <span id="multiple-ranges"> </span>     <span id="multiple-current-ranges"> </span>
   <span id="multiple.ranges"> </span>     <span id="multiple.current.ranges"> </span>
   <span id="multipleRanges"> </span>      <span id="multipleCurrentRanges"> </span>
   <span id="multiple_ranges"> </span>     <span id="multiple_current_ranges"> </span>
   <span id="multipleranges"> </span>      <span id="multiplecurrentranges"> </span>

<b>Multiple ranges:</b> To meet the rules, you may need to pick different current ranges for different benchmarks, by setting
<a href="#current_range">current_range</a> in benchmark-specific sections.  For example, if you find that 507.cactuBSSN_r
uses more current than other floating point rate benchmarks, perhaps you might set something like this:</p>
   <pre class="l2snugish">fprate=base:
   current_range=9 
507.cactuBSSN_r=base:
   current_range=13.4 </pre>
   <p class="l1snugish">Note: it is <a href="runrules.html#current_range" class="external">allowed</a> to set different
   current ranges for different benchmarks, even in base.</p>

<h3 id="sectionIX.E">         IX.E. Power questions? </h3>

   <p>If you run into difficulties, a few suggestions may be found in the 
   <a class="external" href="faq.html#Power.01">FAQ</a>.</p>


<div id="Appendices"></div>


<!-- .......................................................................................................................... -->
<h2 id="AppendixA">         Appendix A: Auxiliary Benchmark Sets
   <span id="Other-benchmark-sets"> </span>
   <span id="Other.benchmark.sets"> </span>
   <span id="OtherBenchmarkSets"> </span>
   <span id="Other_benchmark_sets"> </span>
   <span id="Otherbenchmarksets"> </span>
   <span id="other-benchmark-sets"> </span>
   <span id="other.benchmark.sets"> </span>
   <span id="otherBenchmarkSets"> </span>
   <span id="other_benchmark_sets"> </span>
   <span id="otherbenchmarksets"> </span>
   <span id="Other-bsets"> </span>
   <span id="Other.bsets"> </span>
   <span id="OtherBsets"> </span>
   <span id="Other_bsets"> </span>
   <span id="Otherbsets"> </span>
   <span id="other-bsets"> </span>
   <span id="other.bsets"> </span>
   <span id="otherBsets"> </span>
   <span id="other_bsets"> </span>
   <span id="otherbsets"> </span>
   <span id="Auxiliary-Benchmark-Sets"> </span>
   <span id="Auxiliary.Benchmark.Sets"> </span>
   <span id="AuxiliaryBenchmarkSets"> </span>
   <span id="Auxiliary_Benchmark_Sets"> </span>
   <span id="auxiliary-benchmark-sets"> </span>
   <span id="auxiliary.benchmark.sets"> </span>
   <span id="auxiliaryBenchmarkSets"> </span>
   <span id="auxiliary_benchmark_sets"> </span>
   <span id="auxiliarybenchmarksets"> </span>
   <span id="Auxiliary-bsets"> </span>
   <span id="Auxiliary.bsets"> </span>
   <span id="AuxiliaryBsets"> </span>
   <span id="Auxiliary_bsets"> </span>
   <span id="Auxiliarybsets"> </span>
   <span id="auxiliary-bsets"> </span>
   <span id="auxiliary.bsets"> </span>
   <span id="auxiliaryBsets"> </span>
   <span id="auxiliary_bsets"> </span>
   <span id="auxiliarybsets"> </span>

</h2>

<table class="noborder">
   <tr>
      <td style="margin-right:3em;padding-right:3em; width:500px;">
         <p class="snugtop">To reference a set in the
            <samp>benchmark</samp> <a href="#sectionSpecifier">specifier</a>,
            typically one uses a set that corresponds to a metric, or else
            <samp>default:</samp>

         </p>
         <table class="noborder" style="margin-left:3em;">
            <tr>
               <td style="border-bottom:thin solid gray;font-size:110%;font-weight:bold;">intrate  </td>
               <td style="border-bottom:thin solid gray;">   SPECrate 2017 Integer</td></tr>
            <tr>
               <td style="border-bottom:thin solid gray;font-size:110%;font-weight:bold;">fprate   </td>
               <td style="border-bottom:thin solid gray;">   SPECrate 2017 Floating Point</td></tr>
            <tr>
               <td style="border-bottom:thin solid gray;font-size:110%;font-weight:bold;padding-right:1em;">intspeed </td>
               <td style="border-bottom:thin solid gray;">   SPECspeed 2017 Integer</td></tr>
            <tr>
               <td style="border-bottom:thin solid gray;font-size:110%;font-weight:bold;">fpspeed  </td>
               <td style="border-bottom:thin solid gray;">   SPECspeed 2017 Floating Point</td></tr>
            <tr>
               <td style="border-bottom:thin solid gray;font-size:110%;font-weight:bold;">default  </td>
               <td style="border-bottom:thin solid gray;">   Any benchmark</td></tr>
         </table>
      </td>
      <td style="margin-left:1em;padding-left:1em;">
         <pre style="border-left:thin dotted gray;"> # examples
  intrate:
     OPTIMIZE = -O2
  fprate:
     OPTIMIZE = -O3
  fpspeed:
     EXTRA_OPTIMIZE = -DSPEC_OPENMP -fopenmp
  default=peak:
     LDOPTIONS = --shared
         </pre>
      </td>
   </tr>
</table>

<p class="snugbot">This appendix describes the Auxiliary Benchmark Sets.
<br />These sets are available but require <span class="alarm">caution</span>.  They are not recommended unless you are an
expert user.</p>

<pre class="l3snugish" style="font-size:95%;">
specspeed    intspeed plus fpspeed
specrate     intrate  plus fprate
cpu          all benchmarks: the same benchmarks as 'default'; higher priority than 'default'
openmp       benchmarks with OpenMP directives
serial_speed specspeed benchmarks without OpenMP
any_fortran  benchmarks using Fortran (in whole or in part)
pure_fortran benchmarks using Fortran and no other language
  .          Any other benchmark set from
  .             ls $SPEC/benchspec/CPU    (Unix)
  .             dir %SPEC%\benchspec\CPU  (Windows)
</pre>

<p class="snugbot">Considerations when using Auxiliary Benchmarks Sets:</p>
<ul class="snugish">
   <li>Do not try to use the <a href="#preenv">preenv</a> feature.  It works <em>only</em> for the header <a
         href="#sections">section</a> and these: <kbd> default: intrate: intspeed: fprate: fpspeed:</kbd>  </li>
   <li>The base <a class="external" href="runrules.html#BaseFlags">consistency</a> rules must not be violated.  Auxiliary
      sets that are supersets of the metrics are safe in that regard (<kbd class="snuglr">specspeed: specrate: cpu:</kbd>).  Others may only
      be used in peak.</li>

   <li><p class="snug">Benchmarks are members of many auxiliary sets.  (For example, <kbd>503.bwaves_r</kbd> appears in sets
      <kbd class="snugr">specrate:</kbd>, <kbd class="snugr">pure_fortran</kbd>, and <kbd>any_fortran</kbd> among others).  If a config file addresses
      more than one, conflicts are resolved alphabetically.  Effectively, the precedence listed in <a href="#pex1">Precedence
         Example 1</a> becomes:</p>
      <pre class="l1">
  highest   named benchmark(s)
            suite name
            auxilary sets in alphabetical order
  lowest    default</pre>
   </li>
</ul>


<div style="background:#fffcfc;border:thin solid red;padding:4px 6px;">
   <p id="bset_warning" class="snug"><span class="alarm">Warning:</span> Usually, you should use only benchmark sets that
   correspond directly to SPEC metrics: <kbd class="snugr">intrate</kbd>, <kbd class="snugr">intspeed</kbd>, <kbd
      class="snugr">fprate</kbd>, or  <kbd class="snugr">fpspeed</kbd>, because:</p>
   <ol class="l1snug">
      <li>The <a href="#preenv">preenv</a> feature can only be used with sections that correspond to metrics.  </li>
      <li>The rules for base require consistency within a metric. </li>
      <li>Other sets add another level of complexity to the <a href="#precedence">precedence</a> rules.</li>
   </ol>
   <p class="l1snug">If you use a set that is not a metric, care must be taken to avoid accidental rule violations,
   to avoid surprises from missing <kbd>preenv</kbd> variables, and to avoid precedence surprises.</p>
</div>


<p><b>Example:</b> The <kbd>diff</kbd> command shows that only one line differs between two config files.
<kbd>benchmark_set.wrong.cfg</kbd> falls into two traps.</p>

<pre class="l2snugish">$ <b>diff --width 110 --side-by-side  --left-column \</b>
&gt;  <b> benchmark_set.correct.cfg                          benchmark_set.wrong.cfg </b>
flagsurl       = $[top]/config/flags/gcc.xml          (
output_format  = text                                 (
output_root    = /tmp/benchmark_set                   (
runlist        = intspeed                             (
size           = test                                 (
default:                                              (
   CC          = gcc      -std=c99                    (
   CXX         = g++      -std=c++03                  (
   FC          = gfortran -std=f2003                  (
   # How to say "Show me your version"                (
   CC_VERSION_OPTION    = -v                          (
   CXX_VERSION_OPTION   = -v                          (
   FC_VERSION_OPTION    = -v                          (
default=base:                                         (
   OPTIMIZE             = -O1                         (
intspeed:  # correct                                  | openmp:    # wrong wrong wrong wrong wrong wrong
   EXTRA_OPTIMIZE       = -DSPEC_OPENMP -fopenmp      (
   preENV_OMP_STACKSIZE = 120M                        (
                                                      (
$</pre>
<p class="l1snugish">The script runs both in fake mode, and searches the output for the <kbd>OMP_STACKSIZE</kbd>
setting:</p>
<pre class="l2snugish">$<b>cat benchmark_set.sh </b>
runcpu --fakereportable --config=benchmark_set.correct | grep speed.txt
runcpu --fakereportable --config=benchmark_set.wrong   | grep speed.txt
cd /tmp/benchmark_set/result
grep STACKSIZE *txt
$
$ <b>./benchmark_set.sh </b>
    format: Text -&gt; /tmp/benchmark_set/result/CPU2017.001.intspeed.txt
    format: Text -&gt; /tmp/benchmark_set/result/CPU2017.002.intspeed.txt
CPU2017.001.intspeed.txt:    OMP_STACKSIZE = "120M"
$  <a class="exnote" href="config.html#exampleFormat">(Notes about examples)</a> </pre>

      <p class="l1snugtop">Notice that only <kbd>benchmark_set.correct.cfg</kbd> gets the desired <kbd class="snugr">OMP_STACKSIZE</kbd>.
      (The <kbd>grep</kbd> does not match <kbd class="snugr">CPU2017.002.intspeed.txt</kbd>.)</p>

      <p class="l1">More importantly, <kbd>benchmark_set.correct.cfg</kbd> compiles all C benchmarks the same way (as <a
         class="external" href="runrules.html#BaseFlags">required</a>).  From <kbd class="snugr">CPU2017.001.intspeed.txt</kbd>:</p>
      <pre style="font-size:90%;width:700px;background:#f0f0f0;" class="l2">
                              Base Optimization Flags
                              -----------------------
C benchmarks:
     -std=c99 -O1 -DSPEC_OPENMP -fopenmp
      </pre>
      <p class="l1snugish">The <a class="external" href="runrules.html#BaseFlags">consistency rule</a> is violated by
      <kbd>benchmark_set.wrong.cfg</kbd> and
      results using it would be <a class="external" href="runrules.html#noncompliant">non-compliant</a>.
      From <kbd class="snugr">CPU2017.002.intspeed.txt</kbd>:</p>
      <pre style="font-size:90%;width:700px;background:#f0f0f0;" class="l2">
                              Base Optimization Flags
                              -----------------------
C benchmarks:
 600.perlbench_s: -std=c99 -O1
       602.gcc_s: Same as 600.perlbench_s
       605.mcf_s: Same as 600.perlbench_s
      625.x264_s: Same as 600.perlbench_s
        657.xz_s: -std=c99 -O1 -DSPEC_OPENMP -fopenmp
</pre>



<!-- .......................................................................................................................... -->
<h2 id="AppendixB">         Appendix B. Troubleshooting
   <span id="Trouble"> </span>
   <span id="trouble"> </span>

   <span id="Trouble-shooting"> </span>
   <span id="Trouble.shooting"> </span>
   <span id="TroubleShooting"> </span>
   <span id="Trouble_shooting"> </span>
   <span id="Troubleshooting"> </span>
   <span id="trouble-shooting"> </span>
   <span id="trouble.shooting"> </span>
   <span id="troubleShooting"> </span>
   <span id="trouble_shooting"> </span>
   <span id="troubleshooting"> </span>

</h2>

<p>When something goes wrong, here are some things to check:</p>

<ol>

<li><p> Are there any obvious clues in the log file?  Search for the word "<kbd class="snuglr">Building</kbd>".  Keep searching until you hit
the next benchmark AFTER the one that you are interested in.  Now scroll backward looking for errors.</p></li>

<li><p>Did your desired switches get applied?  Go to the build directory, and look at <kbd class="snugr">options*out</kbd>.</p></li>

<li><p>Did the tools or your compilers report any errors?  Look in the build directory at <kbd class="snugr">*out</kbd> or
<kbd class="snugr">*err</kbd>.</p></li>

<li><p>What happens if you try the build by hand?  See the section on <kbd>specmake</kbd> in <a class="external"
href="utility.html#specmake">utility.html</a>.</p></li>

<li><p>If an actual run fails, what happens if you invoke the run by hand?  See the information about
   "<kbd class="nbsnuglr">specinvoke -n</kbd>" in <a class="external" href="utility.html#specinvoke">utility.html</a></p></li>

<li><p>Do you understand what is in your path, and why?  Sometimes confusion can be greatly reduced by ensuring that you have
only what is needed, avoiding, in particular, experimental and non-standard versions of standard utilities.  </p>

<p class="l1"><span class="alarm">Note:</span> on Windows systems, SPEC recommends that Windows/Unix compatibility products should
be removed from the <kbd>%PATH%</kbd> prior to invoking <kbd class="snugr">runcpu</kbd>, in order to reduce the probability of
certain <a class="external" href="faq.html#Run.04">difficult-to-diagnose error messages</a>.</p></li>

<li><p>Try asking the tools to leave more clues behind, with <a href="#keeptmp">keeptmp</a>.</p></li>

</ol>


<h2 id="AppendixC">
   <span id="obsolete"> </span>
   <span id="removed"> </span>
   Appendix C. Obsolete/removed items
</h2>

<table style="margin-top:1em;">
   <tr>
      <td><b>Option</b></td>
      <td><b>Notes</b></td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="allow_extension_override"   >allow_extension_override    </span></td>
      <td>Now called <a href="#allow_label_override">allow_label_override</a>.</td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="company_name"               >company_name</span></td>
      <td>Obsolete.  You are probably looking for <a href="#hw_vendor">hw_vendor</a>, <a href="#tester">tester</a>, or
         <a href="#test_sponsor">test_sponsor</a>.  See the example under <a href="#test_sponsor">test_sponsor</a>.</td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="ext"                        >ext    </span></td>
      <td>Obsolete.  For CPU 2017, use <a href="#label">label</a></td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="hw_cpu_char"                >hw_cpu_char    </span></td>
      <td>Obsolete.  For CPU 2006, was used primarily as an additional field to describe MHz.  For CPU 2017, there are two
         fields: <a href="#hw_cpu_nominal_mhz">hw_cpu_nominal_mhz</a> and <a href="#hw_cpu_max_mhz">hw_cpu_max_mhz</a> </td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="hw_cpu_mhz"                 >hw_cpu_mhz     </span></td>
      <td>Obsolete.  For CPU 2017, there are two fields: <a href="#hw_cpu_nominal_mhz">hw_cpu_nominal_mhz</a> and <a
                                                           href="#hw_cpu_max_mhz">hw_cpu_max_mhz</a> </td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="hw_cpu_ncoresperchip"       >hw_cpu_ncoresperchip     </span></td>
      <td>Obsolete.  For CPU 2017, specify the total number of enabled cores (<a href="#hw_ncores">hw_ncores</a>) and the
         total number of enabled chips (<a href="#hw_nchips">hw_nchips</a>); trust the reader to do the division.  (If for
         some reason this is not possible, please use the free-form notes to explain.)  </td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="hw_fpu"                     >hw_fpu</span></td>
      <td>Obsolete.  </td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="mach"                       >mach</span></td>
      <td>Obsolete.  Was removed in CPU 2017 because it was rarely used; and it tended to increase both complexity and
         confusion.</td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="machine_name"               >machine_name</span></td>
      <td>Obsolete since retirement of CPU95.</td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="max_active_compares"        >max_active_compares    </span></td>
      <td>Obsolete.  Was removed in CPU 2017 primarily because of complexity considerations when implementing the new parallel
         setup methods.</td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="rate"                       >rate  </span></td>
      <td>Obsolete, because of the change to how benchmarks are defined in CPU 2017 (SPECrate = 5xx, SPECspeed = 6xx). See the
         discussion of removed items in <a class="external" href="runcpu.html#rate">Using SPEC CPU 2017</a>. </td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="speed"                      >speed   </span></td>
      <td>Obsolete, because of the change to how benchmarks are defined in CPU 2017 (SPECrate = 5xx, SPECspeed = 6xx). See the
         discussion of removed items in <a class="external" href="runcpu.html#rate">Using SPEC CPU 2017</a>. </td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="sw_auto_parallel"           >sw_auto_parallel</span></td>
      <td><p class="snugtop">This flag has been obsolete since the release of SPEC CPU 2006 V1.1.   If your compiler creates
         binaries that use multiple processors, you should instead make sure that your flags file indicates this by setting
         the flag attribute <a class="external" href="flag-description.html#parallel">parallel="yes"</a>.  The tools will
         notice if you use a flag that has this flag attribute set, and if so will automatically include that information in
         the reports.</p>
         <p class="snugbot">See the  discussion of <a href="#parallelreporting">parallel reporting</a>.</p>
      </td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="test_date"                  >test_date</span></td>
      <td>When the tests were run.  This field is populated automatically based on the clock in the system under test.  Setting
         this in the config file will generate a warning and the setting will be ignored.  If your system clock is incorrect,
         then the value may be edited in the raw file (see <a class="external" href="utility.html#rawformat">utility.html</a>).
         It is better to avoid the necessity to edit, by setting your system clock properly.</td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="tester_name"                >tester_name</span></td>
      <td>Obsolete.  You are probably looking for <a href="#hw_vendor">hw_vendor</a>, <a href="#tester">tester</a>, or
         <a href="#test_sponsor">test_sponsor</a>.  See the example under <a href="#test_sponsor">test_sponsor</a>.</td>
   </tr>
   <tr>
      <td><span  class="switchstrike" id="VENDOR"                     >VENDOR</span></td>
      <td>This field is obsolete, and has been since SPEC CPU92 was retired. </td>
   </tr>
</table>

<p style="border-top:thin solid black;">
SPEC CPU&reg; 2017 Config Files:
Copyright&nbsp;&copy;&nbsp;2017-2019 Standard Performance Evaluation Corporation (SPEC&reg;)</p>
<!-- this space intentionally left blank: some empty space at the bottom increases the probability that clicking on a link in
   the table of contents will actually position the desired section at the top of your browser window -->
<p style="margin:300px 1em;">&nbsp;</p>


</body>
<!-- vim: set filetype=xhtml syntax=xhtml shiftwidth=3 tabstop=8 expandtab nosmarttab colorcolumn=132: -->
</html>

